{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","path":"fancybox/jquery.fancybox.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","path":"fancybox/jquery.fancybox.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.4.1.min.js","path":"js/jquery-3.4.1.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","path":"js/script.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.woff2","path":"css/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.eot","path":"fonts/iconfont.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.svg","path":"fonts/iconfont.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.ttf","path":"fonts/iconfont.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.woff","path":"fonts/iconfont.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/quotes.png","path":"img/quotes.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/md5.min.js","path":"js/md5.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/common/animation.js","path":"js/common/animation.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/common/pack.js","path":"js/common/pack.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/common/utils.js","path":"js/common/utils.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/layout/back-top.js","path":"js/layout/back-top.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/layout/header.js","path":"js/layout/header.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/layout/loading.js","path":"js/layout/loading.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/layout/post.js","path":"js/layout/post.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/libs/axios.min.js","path":"js/libs/axios.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/libs/lunr.min.js","path":"js/libs/lunr.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/page/post.js","path":"js/page/post.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/js/page/search.js","path":"js/page/search.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/base/index.scss","path":"scss/base/index.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/archive.scss","path":"scss/views/page/archive.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/about.scss","path":"scss/views/page/about.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/category.scss","path":"scss/views/page/category.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/error.scss","path":"scss/views/page/error.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/index.scss","path":"scss/views/page/index.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/post.scss","path":"scss/views/page/post.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/search.scss","path":"scss/views/page/search.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/tag.scss","path":"scss/views/page/tag.scss","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/logo.png","path":"img/logo.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-144x144.png","path":"img/android-chrome-144x144.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-192x192.png","path":"img/android-chrome-192x192.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-256x256.png","path":"img/android-chrome-256x256.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-36x36.png","path":"img/android-chrome-36x36.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-384x384.png","path":"img/android-chrome-384x384.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-48x48.png","path":"img/android-chrome-48x48.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-512x512.png","path":"img/android-chrome-512x512.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-72x72.png","path":"img/android-chrome-72x72.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-96x96.png","path":"img/android-chrome-96x96.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-1024x1024.png","path":"img/apple-touch-icon-1024x1024.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-114x114.png","path":"img/apple-touch-icon-114x114.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-120x120.png","path":"img/apple-touch-icon-120x120.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-152x152.png","path":"img/apple-touch-icon-152x152.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-144x144.png","path":"img/apple-touch-icon-144x144.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-167x167.png","path":"img/apple-touch-icon-167x167.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-180x180.png","path":"img/apple-touch-icon-180x180.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-57x57.png","path":"img/apple-touch-icon-57x57.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-60x60.png","path":"img/apple-touch-icon-60x60.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-72x72.png","path":"img/apple-touch-icon-72x72.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-76x76.png","path":"img/apple-touch-icon-76x76.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-precomposed.png","path":"img/apple-touch-icon-precomposed.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon.png","path":"img/apple-touch-icon.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/browserconfig.xml","path":"img/browserconfig.xml","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/favicon-16x16.png","path":"img/favicon-16x16.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/favicon-32x32.png","path":"img/favicon-32x32.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/favicon-48x48.png","path":"img/favicon-48x48.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/manifest.json","path":"img/manifest.json","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/mstile-144x144.png","path":"img/mstile-144x144.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/mstile-150x150.png","path":"img/mstile-150x150.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/mstile-310x150.png","path":"img/mstile-310x150.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/mstile-310x310.png","path":"img/mstile-310x310.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/mstile-70x70.png","path":"img/mstile-70x70.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/article_default.jpg","path":"img/article_default.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/bg.jpg","path":"img/bg.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/loader.gif","path":"img/loader.gif","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/qrcode.png","path":"img/qrcode.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/dns_title.png","path":"img/network-deploy/dns_title.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/https_title.png","path":"img/network-deploy/https_title.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/docker_title.png","path":"img/network-deploy/docker_title.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/nginx_title.png","path":"img/network-deploy/nginx_title.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/technology-sense/data_repeated_title.png","path":"img/technology-sense/data_repeated_title.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/technology-sense/request_repeated_title.png","path":"img/technology-sense/request_repeated_title.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/git_title.png","path":"img/network-deploy/git_title.png","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"3e6a609ba2f7a9a1a4a3aed1e3e99d4aab8e02b3","modified":1615813346566},{"_id":"public/atom.xml","hash":"e3175ab5ef049bb684e4b4b0edd32fa5c44fc6bc","modified":1615830569454},{"_id":"public/sitemap.xml","hash":"3ec540f17ed73b97571a96be5989d4d7532ca94d","modified":1615830569454},{"_id":"public/2021/03/15/hello-world/index.html","hash":"b44ccb72c3a69341f2890d0fccdc3361ccd5ee8e","modified":1615822418455},{"_id":"public/archives/index.html","hash":"c3f6003317a76f11e50f92a2bd5a916893f307ae","modified":1615830569454},{"_id":"public/archives/2021/index.html","hash":"47c6c483a0142cc1393a0927c112155d32a61420","modified":1615830569454},{"_id":"public/archives/2021/03/index.html","hash":"702ef2c1236a1188ef91aa485d8e80a6892150e8","modified":1615830569454},{"_id":"public/index.html","hash":"011d65dee555e71b1297f94cd6a60507cf70159d","modified":1615830569454},{"_id":"node_modules/hexo-theme-landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/_config.yml","hash":"b608c1f1322760dce9805285a602a95832730a2e","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/README.md","hash":"d2772ece6d4422ccdaa0359c3e07588834044052","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/package.json","hash":"1f9c2fdb39408876e85a4817c2493bdc0f6b8199","modified":1615799785288},{"_id":"node_modules/hexo-theme-landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/en.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/hu.yml","hash":"284d557130bf54a74e7dcef9d42096130e4d9550","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/it.yml","hash":"89b7d91306b2c1a0f3ac023b657bf974f798a1e8","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/mn.yml","hash":"2e7523951072a9403ead3840ad823edd1084c116","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/tr.yml","hash":"a1cdbfa17682d7a971de8ab8588bf57c74224b5b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/zh-CN.yml","hash":"1efd95774f401c80193eac6ee3f1794bfe93dc5a","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/layout.ejs","hash":"0d1765036e4874500e68256fedb7470e96eeb6ee","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/scripts/fancybox.js","hash":"c857d7a5e4a5d71c743a009c5932bf84229db428","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/after-footer.ejs","hash":"414914ebb159fac1922b056b905e570ac7521925","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive.ejs","hash":"7cb70a7a54f8c7ae49b10d1f37c0a9b74eab8826","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/article.ejs","hash":"dfd555c00e85ffc4207c88968d12b219c1f086ec","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/footer.ejs","hash":"3656eb692254346671abc03cb3ba1459829e0dce","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/google-analytics.ejs","hash":"2ea7442ea1e1a8ab4e41e26c563f58413b59a3d0","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/head.ejs","hash":"f215d92a882247a7cc5ea80b241bedfcec0ea6ca","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/header.ejs","hash":"c1acd247e14588cdf101a69460cb8319c18cd078","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/gauges-analytics.ejs","hash":"21a1e2a3907d1a3dad1cd0ab855fe6735f233c74","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/recent_posts.ejs","hash":"60c4b012dcc656438ff59997e60367e5a21ab746","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","hash":"9c451e5efd72c5bb8b56e8c2b94be731e99db05b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","hash":"998ed4c5b147e1299bf62beebf33514474f28112","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/date.ejs","hash":"f1458584b679545830b75bef2526e2f3eb931045","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/title.ejs","hash":"4d7e62574ddf46de9b41605fe3140d77b5ddb26d","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/article.styl","hash":"80759482d07063c091e940f964a1cf6693d3d406","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/header.styl","hash":"85ab11e082f4dd86dde72bed653d57ec5381f30c","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/highlight.styl","hash":"bf4e7be1968dad495b04e83c95eac14c4d0ad7c0","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_variables.styl","hash":"581b0cbefdaa5f894922133989dd2d3bf71ded79","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.4.1.min.js","hash":"88523924351bac0b5d560fe0c5781e2556e7693d","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":499162500000},{"_id":"node_modules/hexo-theme-landscape/source/css/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":499162500000},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"048e85f7dbba1d88a4acb102159355ac0fa7414e","modified":1615807624786},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1615807624786},{"_id":"public/css/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1615807624786},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1615807624786},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1615807624786},{"_id":"public/css/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1615807624786},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1615807624786},{"_id":"public/css/style.css","hash":"f6ac52e3d004bb19640fff7186b6777b2f9cb4c6","modified":1615807624786},{"_id":"public/fancybox/jquery.fancybox.min.css","hash":"ecada09ddd7bb5960a0541b8b87be8cca96133cd","modified":1615807624786},{"_id":"public/js/script.js","hash":"b3bf9d3db2aa3890e0b2d28d3226bf78a9d39294","modified":1615807624786},{"_id":"public/fancybox/jquery.fancybox.min.js","hash":"f135e23ba12525e9db7030cee5165319ce3a1f1e","modified":1615807624786},{"_id":"public/js/jquery-3.4.1.min.js","hash":"86c2c51c7486f954afac7742ecce2bd2c2a94164","modified":1615807624786},{"_id":"themes/hexo-theme-skapp/source/scss/base/_input.scss","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1615799843967},{"_id":"themes/hexo-theme-skapp/.gitignore","hash":"82ef2f3b23b55ea98c542341063157af2e059619","modified":1615799843842},{"_id":"themes/hexo-theme-skapp/LICENSE","hash":"35e1d1fbdb2b983d6a269988411e626e2e49fc46","modified":1615799843843},{"_id":"themes/hexo-theme-skapp/README-cn.md","hash":"3598c30bf4797ce98670b6299d6d28881d083a81","modified":1615799843845},{"_id":"themes/hexo-theme-skapp/_config.yml","hash":"3efae5bd03a319bd14ac00f6604609c637627c3e","modified":1615812896200},{"_id":"themes/hexo-theme-skapp/README.md","hash":"16ad533b44c15789764f9bad3166421893628deb","modified":1615799843847},{"_id":"themes/hexo-theme-skapp/package-lock.json","hash":"dc4ee1f15b3b73041b48c235daa2dcedf46894d7","modified":1615799863954},{"_id":"themes/hexo-theme-skapp/package.json","hash":"4e1b664cceaaad0d36238b8cc699bce37a656cfe","modified":1615799843918},{"_id":"themes/hexo-theme-skapp/languages/en.yml","hash":"1a4f5bce3b60ca76b0e905957172051900091299","modified":1615799843851},{"_id":"themes/hexo-theme-skapp/languages/zh-cn.yml","hash":"88757f002e1589fb18ad1747b92978d92dfe171d","modified":1615799843853},{"_id":"themes/hexo-theme-skapp/layout/_layout.swig","hash":"ffa95529e579118b6d839e17f20bc9ea2156dab0","modified":1615821382545},{"_id":"themes/hexo-theme-skapp/layout/about.swig","hash":"9f6cea58373ddc0635ee2416fbcd8dad407bdfa7","modified":1615799843906},{"_id":"themes/hexo-theme-skapp/layout/archive.swig","hash":"eaf468f189f068af58805d8142055008b392d981","modified":1615799843908},{"_id":"themes/hexo-theme-skapp/layout/category.swig","hash":"7fcb568f095d3c313cd2643e4b9933b62316d67f","modified":1615799843909},{"_id":"themes/hexo-theme-skapp/layout/error.swig","hash":"fa7acb45c6cf022a0a6e3736095444d9066706b3","modified":1615799843910},{"_id":"themes/hexo-theme-skapp/layout/index.swig","hash":"bfd8af9f057dbb6edb3af5c0ebdb18ecb0ad3a98","modified":1615799843912},{"_id":"themes/hexo-theme-skapp/layout/post.swig","hash":"43984751ff19fc3976f5f15bf0c8a5dabffe7c53","modified":1615799843914},{"_id":"themes/hexo-theme-skapp/layout/search.swig","hash":"6352de699394e756d529216181103f7e2e8ac1a0","modified":1615799843915},{"_id":"themes/hexo-theme-skapp/layout/tag.swig","hash":"48caf533976c533241d7a709931d2945303e2c36","modified":1615799843916},{"_id":"themes/hexo-theme-skapp/scripts/helper.js","hash":"e5bb3f9b58b794349c4a25750f0bf1ab556a115d","modified":1615799843921},{"_id":"themes/hexo-theme-skapp/scripts/renderer.js","hash":"433f140c0d506b4b6807232872549451407ae527","modified":1615799843922},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.eot","hash":"87bd2f3e4f3b26d80fe97943b8deec98168affc2","modified":1615799843927},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.svg","hash":"34f7c2b49d2f9339d944a7419989498b2cc2f76b","modified":1615799843929},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.ttf","hash":"cbe6cffb573ef986e91c6705c9839a9c53edb1c8","modified":1615799843931},{"_id":"themes/hexo-theme-skapp/source/fonts/iconfont.woff","hash":"37b11e65abc366b2b4a212a302b36f7152921625","modified":1615799843933},{"_id":"themes/hexo-theme-skapp/source/img/quotes.png","hash":"4510107c2b0ea522ac2dc2048cb7471b468af5ff","modified":1615799843935},{"_id":"themes/hexo-theme-skapp/source/js/md5.min.js","hash":"c27927a82941ba972c140abf26ad82e04c32d86a","modified":1615799843955},{"_id":"themes/hexo-theme-skapp/source/scss/_theme.scss","hash":"5d63a2c2a326d3951fbe4096fe11cfce380a514e","modified":1615799843962},{"_id":"themes/hexo-theme-skapp/layout/_partial/about/main.swig","hash":"b2e0d54346244d8661a3a6948ea30d2d846ea3e6","modified":1615799843859},{"_id":"themes/hexo-theme-skapp/layout/_partial/category/main.swig","hash":"f2094d81620bc30cd2e5755ae0cff9517d52f602","modified":1615799843864},{"_id":"themes/hexo-theme-skapp/layout/_partial/archive/main.swig","hash":"57c33af136eca2a0d83e01345304ee1e6b2f9275","modified":1615799843862},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/analytics.swig","hash":"381147862c6a50e987496c6bfdc06d36bad14d7a","modified":1615799843867},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/back-top.swig","hash":"97a248605facffc986ff5e06338ee3fe662b6a2b","modified":1615799843868},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/comment.swig","hash":"9b27c782ea76cbaace9ddb38729ea153ee90f18e","modified":1615799843870},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/error-header.swig","hash":"18ad4d1acd16ac1dc6c4be19149d7de6f8904abd","modified":1615799843871},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/footer.swig","hash":"d1dcfdec65750226d1f90d7cc2ac2260832c9c82","modified":1615807816582},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/head.swig","hash":"74756b1d58a2209049fcf5985adc95fb94d8c8ff","modified":1615819981921},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/header.swig","hash":"bdb9955afdc20ade2a8ea98130d360671538d182","modified":1615799843877},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/loader.swig","hash":"69b476a9d85929c1d9a37951003924d2185825a1","modified":1615799843878},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/math.swig","hash":"e4cb3dea80531201b7a6113fb2d08d389d16e63c","modified":1615799843880},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/prefetch.swig","hash":"06bb0e8583d08716a1e7e91bf149539b2aeb49f4","modified":1615799843881},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/sidebar.swig","hash":"c3f8405d657d5105f37a76d805dc5941a819fa09","modified":1615811293106},{"_id":"themes/hexo-theme-skapp/layout/_partial/common/small-header.swig","hash":"d17b47dbb91a476a6ecbe4dfaf45cc7e2efa568f","modified":1615799843884},{"_id":"themes/hexo-theme-skapp/layout/_partial/error/main.swig","hash":"04a96565937aeb86be41ce83c6ed78aa7653a6f7","modified":1615799843887},{"_id":"themes/hexo-theme-skapp/layout/_partial/index/main.swig","hash":"f2094d81620bc30cd2e5755ae0cff9517d52f602","modified":1615799843891},{"_id":"themes/hexo-theme-skapp/layout/_partial/post/content.swig","hash":"853fa690220dc60fbd5feb6465c411496b5e0734","modified":1615799843894},{"_id":"themes/hexo-theme-skapp/layout/_partial/post/main.swig","hash":"5895556b4852c5b355e3d4f77fddecc7c7511dce","modified":1615799843896},{"_id":"themes/hexo-theme-skapp/layout/_partial/post/mini.swig","hash":"c7fa61d557ddc51157d87ecf0a22d67561cfe3ed","modified":1615799843897},{"_id":"themes/hexo-theme-skapp/layout/_partial/post/post-statistical.swig","hash":"e160d861a4521f9ece0ed3575e958faad0b4068c","modified":1615799843899},{"_id":"themes/hexo-theme-skapp/layout/_partial/search/main.swig","hash":"d21af97d8128b781c11ef0ee00f6335cabd864ec","modified":1615799843902},{"_id":"themes/hexo-theme-skapp/layout/_partial/tag/main.swig","hash":"f2094d81620bc30cd2e5755ae0cff9517d52f602","modified":1615799843904},{"_id":"themes/hexo-theme-skapp/source/js/common/animation.js","hash":"6a1a7629612c4c2dc85a1d00ff538d00e493d3bb","modified":1615799843939},{"_id":"themes/hexo-theme-skapp/source/js/common/pack.js","hash":"dab2804004a471e5df698eeae71b6ab2922e4443","modified":1615799843941},{"_id":"themes/hexo-theme-skapp/source/js/common/utils.js","hash":"d8b5ef7c7360ce2e5c2a96ccbc1e5f1494e69b04","modified":1615799843942},{"_id":"themes/hexo-theme-skapp/source/js/layout/back-top.js","hash":"e4014c0e03fc0c1e67f458526c143c9eea8a31b8","modified":1615799843945},{"_id":"themes/hexo-theme-skapp/source/js/layout/header.js","hash":"0264d36e2009d05850fd42760f285e87a3ea5be5","modified":1615799843947},{"_id":"themes/hexo-theme-skapp/source/js/layout/loading.js","hash":"c60923eec07b75024692bd9aae410a0d8a3adce3","modified":1615799843948},{"_id":"themes/hexo-theme-skapp/source/js/layout/post.js","hash":"5a0c6c42f27ea5d723e0f008e0f44f1e4b031d13","modified":1615799843950},{"_id":"themes/hexo-theme-skapp/source/js/libs/axios.min.js","hash":"338a9f6113dec0b9ec84fee55c96a6014b889156","modified":1615799843952},{"_id":"themes/hexo-theme-skapp/source/js/libs/lunr.min.js","hash":"ec9df958d5baa501684c434bb54a724f9b98eced","modified":1615799843954},{"_id":"themes/hexo-theme-skapp/source/js/page/post.js","hash":"335f692d0c6c35dfee1f75868e1e29cfcdc1f529","modified":1615799843958},{"_id":"themes/hexo-theme-skapp/source/js/page/search.js","hash":"0985dc97ebdf11fef3935d0d3504bfc7747a2fcc","modified":1615799843959},{"_id":"themes/hexo-theme-skapp/source/scss/base/_element.scss","hash":"59381e14408e1c6d696147e7e8aa4ce261a8413d","modified":1615799843965},{"_id":"themes/hexo-theme-skapp/source/scss/base/_font.scss","hash":"f04cf1809ceb46595bbc8c8dc98013a57010eab2","modified":1615799843966},{"_id":"themes/hexo-theme-skapp/source/scss/base/_js-toggle.scss","hash":"2144fd9dc98865e405fa3207829e8d1eea35988e","modified":1615799843969},{"_id":"themes/hexo-theme-skapp/source/scss/base/_mixins.scss","hash":"823c6e5d56df0e0e926a8843400d8e3e34ff44dc","modified":1615799843970},{"_id":"themes/hexo-theme-skapp/source/scss/base/index.scss","hash":"da0bc6af7a87e768d68d3316e7611fb4d578a441","modified":1615799843972},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_back-top.scss","hash":"996e70395bc76abeb59b58832696ab21e9b3c632","modified":1615799843976},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_container.scss","hash":"7eebdf731c56ec33feb63fae505465d2cbd27447","modified":1615799843978},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_footer.scss","hash":"ac552e54f377d92153ae989a8934e54364b94595","modified":1615799843979},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_index.scss","hash":"c74bc9b2f877c6d8fa29a6daa5136653ba1f7e35","modified":1615799843982},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_mini-post.scss","hash":"f57131293aa60bafb9c81416fb44b5c311da4afc","modified":1615799843986},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_loading.scss","hash":"41591203dc41876e916399fbaae33ff6a79a080c","modified":1615799843984},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_header.scss","hash":"219a554cdd706a0773230d6618b2271c419d1e2b","modified":1615799843981},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_paginator.scss","hash":"43dd98f41c8a88732969f65fafca6b4f5b508b72","modified":1615799843987},{"_id":"themes/hexo-theme-skapp/source/scss/views/layout/_sidebar.scss","hash":"9ca8f0baeec9ba89662610684e33c8c8343416a5","modified":1615799843989},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/archive.scss","hash":"bc6fd08a9a5e5146e6405c1845858f6bd643817f","modified":1615799843993},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/about.scss","hash":"9e899e9162ce8db9ff99bbfe5ac9e90108b652e3","modified":1615799843991},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/category.scss","hash":"060931308b8ac3740ca3928afeb6246041cf9a84","modified":1615799843994},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/error.scss","hash":"c708ce4d926460d2dfdc7af56b69915a32f3da7a","modified":1615799843996},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/index.scss","hash":"be170e52e6836afb4c3d22d789bddf7f091245a7","modified":1615799843998},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/post.scss","hash":"8fc1ae6d180ce9d494fb877144f16e1e3030a6aa","modified":1615799843999},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/search.scss","hash":"38f55dbfe22fae61c7c18eb9f3dc72207fd9b28c","modified":1615799844000},{"_id":"themes/hexo-theme-skapp/source/scss/views/page/tag.scss","hash":"060931308b8ac3740ca3928afeb6246041cf9a84","modified":1615799844002},{"_id":"source/_data/favicons.json","hash":"74b8bfed1e01ab261aa7f8ec046598ab8a2662c7","modified":1615804526102},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-144x144.png","hash":"f68f2abae37de4216b2125695aa6f1598753d82f","modified":1615804526129},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-192x192.png","hash":"e453fd09e6bece00eaa37e0a85c05a129909cce5","modified":1615804526132},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-256x256.png","hash":"80b8da536a02ce6cf2d16a58bfe8026f1eb158d3","modified":1615804526133},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-36x36.png","hash":"2009e441e84b92f39d10c913c6998f3f5944720e","modified":1615804526122},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-48x48.png","hash":"d9cc589a6258fe734a6fdfe98dcc0385e6f81abe","modified":1615804526124},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-72x72.png","hash":"a212b8ab0b734810e8bdb20e58c9d7408ebd4f86","modified":1615804526126},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-96x96.png","hash":"8492f33f0b78345214d91b41e067329913f8d1c4","modified":1615804526128},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-114x114.png","hash":"37491bc5bf5eeada5b866579884f5b9a2a4a1c20","modified":1615804526147},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-120x120.png","hash":"4942aa68c6a5a993f3d207a967ea16e2a0f61d90","modified":1615804526149},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-152x152.png","hash":"4454fb3cf28be2101cff71626aac0c5967e6fc0a","modified":1615804526153},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-144x144.png","hash":"f68f2abae37de4216b2125695aa6f1598753d82f","modified":1615804526151},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-167x167.png","hash":"8d12c59988e6bca5980d2412631cc3a8f2a562e8","modified":1615804526155},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-180x180.png","hash":"5c50538deba5ce458d9b95ecea4ebdcab1e49d0a","modified":1615804526157},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-57x57.png","hash":"8c214c315782be54d0b1f9e406779d6fde7d78ea","modified":1615804526139},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-60x60.png","hash":"553f2a1b1e3c40a49a0db72f7fe454025cf4fb74","modified":1615804526141},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-72x72.png","hash":"a212b8ab0b734810e8bdb20e58c9d7408ebd4f86","modified":1615804526143},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-76x76.png","hash":"2e2a85640b52c416b60b0e528f893b52b05cbc98","modified":1615804526145},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-precomposed.png","hash":"5c50538deba5ce458d9b95ecea4ebdcab1e49d0a","modified":1615804526164},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon.png","hash":"5c50538deba5ce458d9b95ecea4ebdcab1e49d0a","modified":1615804526161},{"_id":"themes/hexo-theme-skapp/source/img/browserconfig.xml","hash":"fdf64346d968f84f0d72f86e9f4c6cdb5ddeb625","modified":1615804526108},{"_id":"themes/hexo-theme-skapp/source/img/favicon-16x16.png","hash":"4a4bd7faabeb5e003597d5873cdba0fa22a95117","modified":1615804526115},{"_id":"themes/hexo-theme-skapp/source/img/favicon-32x32.png","hash":"66bcfbd194d1bd88f82b9114d38aad333364ae97","modified":1615804526117},{"_id":"themes/hexo-theme-skapp/source/img/favicon-48x48.png","hash":"d9cc589a6258fe734a6fdfe98dcc0385e6f81abe","modified":1615804526119},{"_id":"themes/hexo-theme-skapp/source/img/favicon.ico","hash":"a507ef7ce3be6c89ae070d4bc86b257ba955bafe","modified":1615804526121},{"_id":"themes/hexo-theme-skapp/source/img/logo.png","hash":"ce0a4ef1745f9f30cc2e14084316081f3a6f09af","modified":1615804466336},{"_id":"themes/hexo-theme-skapp/source/img/manifest.json","hash":"cd1ab9b5862f510052f5074c61e1ad82817e04ba","modified":1615804526106},{"_id":"themes/hexo-theme-skapp/source/img/mstile-144x144.png","hash":"f68f2abae37de4216b2125695aa6f1598753d82f","modified":1615804526168},{"_id":"themes/hexo-theme-skapp/source/img/mstile-150x150.png","hash":"05f0a170af71bae4e0b98ffa5dd21754e0ec72b8","modified":1615804526169},{"_id":"themes/hexo-theme-skapp/source/img/mstile-310x150.png","hash":"bc28b44c3ea2ec4e6755c37f10c01c8e7412dce4","modified":1615804526171},{"_id":"themes/hexo-theme-skapp/source/img/mstile-70x70.png","hash":"a3b06af5f8126e14a8734f32509135d68db0ee95","modified":1615804526166},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-384x384.png","hash":"02d9bb2075dbe5a41bd2490665b1b13697a080e6","modified":1615804526135},{"_id":"themes/hexo-theme-skapp/source/img/mstile-310x310.png","hash":"e8bf90b7508706441a1ba33fe4503d6a791ea54a","modified":1615804526173},{"_id":"themes/hexo-theme-skapp/source/img/android-chrome-512x512.png","hash":"4bbe04bf20da7403da9233d05c3042e4b023f418","modified":1615804526137},{"_id":"themes/hexo-theme-skapp/source/img/apple-touch-icon-1024x1024.png","hash":"2a88bbe7a3c78870cc62b397ae7df50e3926e6a7","modified":1615804526160},{"_id":"themes/hexo-theme-skapp/source/img/bg.png","hash":"aa5f7e89b0f4a8bcb1240468df7bc172401d5ab4","modified":1615805964836},{"_id":"themes/hexo-theme-skapp/source/img/article_default.jpg","hash":"d7582abaa968f61c0d2cf63156437df79af5ca65","modified":1615806080408},{"_id":"themes/hexo-theme-skapp/source/img/bg.jpg","hash":"a9de124ccc98b611531bdef75764637a0b8fd36e","modified":1615806417555},{"_id":"themes/hexo-theme-skapp/source/img/404.jpg","hash":"9f47a79e8ed23cda7708c7b870dffaf7f30ef188","modified":1615807131501},{"_id":"themes/hexo-theme-skapp/source/img/loader.gif","hash":"ed66db39f70b6240bd1cdcd8afa0d9c29cb2c7f3","modified":1615807163912},{"_id":"public/img/favicon-32x32.png","hash":"aa4ec69c93dd7a733cc97ee2cb74854d69ffa2b2","modified":1615807624786},{"_id":"public/img/favicon-48x48.png","hash":"31f775672986813cb1f035311ea1b554ee95b30c","modified":1615807624786},{"_id":"public/img/android-chrome-36x36.png","hash":"187944a0761a517f20064ed3532d8352975ee0f3","modified":1615807624786},{"_id":"public/img/android-chrome-48x48.png","hash":"31f775672986813cb1f035311ea1b554ee95b30c","modified":1615807624786},{"_id":"public/img/android-chrome-72x72.png","hash":"0a8d988ab6b509c8ad386f985c56f335f8220352","modified":1615807624786},{"_id":"public/img/android-chrome-96x96.png","hash":"464bf45514efc396074931f84f375c5ce7f3e04b","modified":1615807624786},{"_id":"public/img/android-chrome-144x144.png","hash":"bbf9c29446d74ddf1f6003f8353091d810ad7609","modified":1615807624786},{"_id":"public/img/android-chrome-192x192.png","hash":"48fbc0f98b45af5da869c21e9c906a1702bba437","modified":1615807624786},{"_id":"public/img/android-chrome-256x256.png","hash":"ac95b1b01b0251a11723b7b1612f5380f8b0a71a","modified":1615807624786},{"_id":"public/img/android-chrome-384x384.png","hash":"2554c29d77f0643476e32b5fa2852b2ac66b0f39","modified":1615807624786},{"_id":"public/img/android-chrome-512x512.png","hash":"fa626d1b31622e0ee931e7de3e5696b837352dad","modified":1615807624786},{"_id":"public/img/apple-touch-icon-57x57.png","hash":"893361e8544c1c84114b4fdb5639d86783b4a8f1","modified":1615807624786},{"_id":"public/img/apple-touch-icon-60x60.png","hash":"171937abde8eb886c7b5004bfa61f49f7588bdbd","modified":1615807624786},{"_id":"public/img/apple-touch-icon-72x72.png","hash":"0a8d988ab6b509c8ad386f985c56f335f8220352","modified":1615807624786},{"_id":"public/img/apple-touch-icon-76x76.png","hash":"28418d560ab3e0e03c45f7da866d2ac3b5cc3a7c","modified":1615807624786},{"_id":"public/img/apple-touch-icon-114x114.png","hash":"ea345bd6c8a1aa2516a0086ecfc2bf9778b5508d","modified":1615807624786},{"_id":"public/img/apple-touch-icon-120x120.png","hash":"4b9f9313129b8e23a9070e4d2f09b0f5aa051eee","modified":1615807624786},{"_id":"public/img/apple-touch-icon-144x144.png","hash":"bbf9c29446d74ddf1f6003f8353091d810ad7609","modified":1615807624786},{"_id":"public/img/apple-touch-icon-152x152.png","hash":"2048b38f12fd20ac5f1795721a8b023ee9c5676d","modified":1615807624786},{"_id":"public/img/apple-touch-icon-167x167.png","hash":"448812d40187125b495a4c75b1a7c432dec2630e","modified":1615807624786},{"_id":"public/img/apple-touch-icon-180x180.png","hash":"513898e6229a0fbe48f27073ec8a9bd9e5737a37","modified":1615807624786},{"_id":"public/img/apple-touch-icon-1024x1024.png","hash":"22dc318984015c4a7234afe21d83b5b6fb10161a","modified":1615807624786},{"_id":"public/img/apple-touch-icon.png","hash":"513898e6229a0fbe48f27073ec8a9bd9e5737a37","modified":1615807624786},{"_id":"public/img/apple-touch-icon-precomposed.png","hash":"513898e6229a0fbe48f27073ec8a9bd9e5737a37","modified":1615807624786},{"_id":"public/img/mstile-70x70.png","hash":"32119abb85b1f455c37f5dc4210d95ea13b3a188","modified":1615807624786},{"_id":"public/img/mstile-144x144.png","hash":"bbf9c29446d74ddf1f6003f8353091d810ad7609","modified":1615807624786},{"_id":"public/img/mstile-150x150.png","hash":"b27c78813f5a68047f5d74a66acdd6de7f8a6e63","modified":1615807624786},{"_id":"public/img/mstile-310x310.png","hash":"9171e1c7a591cb7c3b68c476bee9fb5c54791dd3","modified":1615807624786},{"_id":"public/fonts/iconfont.svg","hash":"b606414ee9d4fe20d41c53b4ae66b58d1e8d40a2","modified":1615807624786},{"_id":"public/img/quotes.png","hash":"d971044cf4d14bc81e63c5a9f9528832fab378cf","modified":1615807624786},{"_id":"public/assets/lunr/2021.json","hash":"9c3e4ada3b850aa380eca6d162ccde752496d01d","modified":1615830569454},{"_id":"public/assets/lunr/all.json","hash":"9c3e4ada3b850aa380eca6d162ccde752496d01d","modified":1615830569454},{"_id":"public/js/common.js","hash":"eb3f1a8a8d25935b4f159d460baf8f2a370b41e8","modified":1615807624786},{"_id":"public/img/browserconfig.xml","hash":"fdf64346d968f84f0d72f86e9f4c6cdb5ddeb625","modified":1615807624786},{"_id":"public/img/favicon-16x16.png","hash":"4a4bd7faabeb5e003597d5873cdba0fa22a95117","modified":1615807624786},{"_id":"public/img/favicon.ico","hash":"a507ef7ce3be6c89ae070d4bc86b257ba955bafe","modified":1615807624786},{"_id":"public/img/mstile-310x150.png","hash":"bc28b44c3ea2ec4e6755c37f10c01c8e7412dce4","modified":1615807624786},{"_id":"public/fonts/iconfont.eot","hash":"87bd2f3e4f3b26d80fe97943b8deec98168affc2","modified":1615807624786},{"_id":"public/fonts/iconfont.ttf","hash":"cbe6cffb573ef986e91c6705c9839a9c53edb1c8","modified":1615807624786},{"_id":"public/fonts/iconfont.woff","hash":"37b11e65abc366b2b4a212a302b36f7152921625","modified":1615807624786},{"_id":"public/img/article_default.jpg","hash":"d7582abaa968f61c0d2cf63156437df79af5ca65","modified":1615807624786},{"_id":"public/img/logo.png","hash":"ce0a4ef1745f9f30cc2e14084316081f3a6f09af","modified":1615807624786},{"_id":"public/img/bg.jpg","hash":"a9de124ccc98b611531bdef75764637a0b8fd36e","modified":1615807624786},{"_id":"public/img/404.jpg","hash":"9f47a79e8ed23cda7708c7b870dffaf7f30ef188","modified":1615807624786},{"_id":"public/img/loader.gif","hash":"ed66db39f70b6240bd1cdcd8afa0d9c29cb2c7f3","modified":1615807624786},{"_id":"public/img/manifest.json","hash":"918ac4ddf802badeeda0c1e598e1247f10fdb6a3","modified":1615807624786},{"_id":"public/scss/views/page/archive.css","hash":"792d23471a6ca60d82623dccb4db975110c98a5e","modified":1615807624786},{"_id":"public/scss/base/index.css","hash":"b5f7aac502c5cce0034f655e816ff1f034bbf191","modified":1615807624786},{"_id":"public/scss/views/page/about.css","hash":"f90ae1b4cf6af7fce11b5a43d7c603932578516d","modified":1615807624786},{"_id":"public/scss/views/page/category.css","hash":"7e3731ded7a245d6a8f7f15ca25ec2e0eb183859","modified":1615807624786},{"_id":"public/scss/views/page/error.css","hash":"6c5d23595bf4b2c13ffd4ed91c64d5cb980c1010","modified":1615807624786},{"_id":"public/scss/views/page/post.css","hash":"bd314e8bd996bef7e74343eda4a0b4c82307cec8","modified":1615807624786},{"_id":"public/scss/views/page/index.css","hash":"7e3731ded7a245d6a8f7f15ca25ec2e0eb183859","modified":1615807624786},{"_id":"public/scss/views/page/search.css","hash":"1e078b0236d167f8c3090db50345e249a42d8f0d","modified":1615807624786},{"_id":"public/scss/views/page/tag.css","hash":"7e3731ded7a245d6a8f7f15ca25ec2e0eb183859","modified":1615807624786},{"_id":"public/js/md5.min.js","hash":"21c2a499f862150d66ecbf728623f8d6cb0bfb3a","modified":1615807624786},{"_id":"public/js/common/animation.js","hash":"e20bd33dcf4f7d9834ef3809d9c34f2577198ae8","modified":1615807624786},{"_id":"public/js/common/pack.js","hash":"7e59daf725f6b324d45fcdc04bb32ae73e553a65","modified":1615807624786},{"_id":"public/js/common/utils.js","hash":"39162db90c091127d796a3b7df7c7754ec49233b","modified":1615807624786},{"_id":"public/js/layout/back-top.js","hash":"9228f4a4dd49486090b9c5943b1f28a75aa74c68","modified":1615807624786},{"_id":"public/js/layout/header.js","hash":"15c354ac06c2886f0ef80c1fa0a037d7086e8278","modified":1615807624786},{"_id":"public/js/layout/loading.js","hash":"4678f71ab17f627c14df93d64876ec6256a62890","modified":1615807624786},{"_id":"public/js/layout/post.js","hash":"d283b30fec045c8f597122ef1188f192061663d6","modified":1615807624786},{"_id":"public/js/libs/axios.min.js","hash":"76e76191dab7742e6a189506660a435115780184","modified":1615807624786},{"_id":"public/js/libs/lunr.min.js","hash":"d4a1bcd3d4e5de75caf002948ee6059241811cc6","modified":1615807624786},{"_id":"public/js/page/post.js","hash":"d7f9aab4ace1a8090872bf15c71ae7e37218d360","modified":1615807624786},{"_id":"public/js/page/search.js","hash":"408f84470f774c90db99408db22571b53474fad6","modified":1615807624786},{"_id":"source/_data/contact.yml","hash":"ab509b1ed0fa8bbbeca476637935b45a92f959e1","modified":1615808005027},{"_id":"source/_posts/hello-world2.md","hash":"4f71b97e9aec9be6152e84b66b6ecb27b3f2fecc","modified":1615810775537},{"_id":"themes/hexo-theme-skapp/source/img/qrcode.png","hash":"942b3b214686e3ea292d2393ad70830f2b06d12e","modified":1615810966000},{"_id":"source/_posts/hello-world/image-20210315203750702.png","hash":"19827394851e5cbb3ed54463a032f11f627ea1e8","modified":1615811878098},{"_id":"public/2021/03/15/hello-world/index/image-20210315203750702.png","hash":"c17f6452e51ad9e0cbe86a91429314f0a9f5272c","modified":1615814156395},{"_id":"public/2021/03/15/hello-world2/index.html","hash":"7b9cac285a8b93e4d77ab0669f91299acb4c55b9","modified":1615822418455},{"_id":"public/categories/GO语言/index.html","hash":"a9eb550fc771f7d9efefd47baad72c21ca994d67","modified":1615830569454},{"_id":"public/categories/技术场景/index.html","hash":"039bed5327275ec763ee698a99ac27d59a01ccc2","modified":1615830569454},{"_id":"public/tags/Go语言/index.html","hash":"3e627cfa71e9aaabbf9898fc747ce7b4a273766a","modified":1615830569454},{"_id":"public/tags/技术场景/index.html","hash":"d88c1546fbd603a876d747fb050923115e65477f","modified":1615830569454},{"_id":"public/img/qrcode.png","hash":"942b3b214686e3ea292d2393ad70830f2b06d12e","modified":1615814156395},{"_id":"source/_posts/network-deploy-dns.md","hash":"2f1eaa34624038fff5740faee4809248cdc76f44","modified":1615826004578},{"_id":"public/2021/hello-world/index/image-20210315203750702.png","hash":"c17f6452e51ad9e0cbe86a91429314f0a9f5272c","modified":1615824311843},{"_id":"public/2021/network-deploy-dns/index.html","hash":"bd400c7b750a0b27671f36086615aea3014ab547","modified":1615830569454},{"_id":"public/2021/hello-world2/index.html","hash":"aa10af96dd51202cda112335831a9a68ffb168f4","modified":1615830569454},{"_id":"public/2021/hello-world/index.html","hash":"a1a71d6de468e9a9160e6d7886fe5daf19b90a6b","modified":1615830569454},{"_id":"source/_posts/network-deploy-dns/title.png","hash":"d2c430db0dbefc53c54dd2aed7e16264bafb3559","modified":1615824135890},{"_id":"public/categories/企业网络/index.html","hash":"2427fc7a6624ba86818588718a642e41a4511180","modified":1615830569454},{"_id":"public/tags/企业网络/index.html","hash":"c34996f17045519cbbf4553a7fbae17697d6c969","modified":1615830569454},{"_id":"public/2021/network-deploy-dns/index/title.png","hash":"d2c430db0dbefc53c54dd2aed7e16264bafb3559","modified":1615824819815},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/dns_title.png","hash":"d2c430db0dbefc53c54dd2aed7e16264bafb3559","modified":1615824949375},{"_id":"source/_posts/network-deploy-docker.md","hash":"eb886ada1be22935cfbdceb878c507471dfbd1fa","modified":1615826682862},{"_id":"source/_posts/network-deploy-git.md","hash":"c03d3637f9c5a7f409708c0249f79d67e6b8f977","modified":1615827609662},{"_id":"source/_posts/network-deploy-https.md","hash":"81cc4198e467db9f6ea951ecf1be75a7efee728a","modified":1615826067016},{"_id":"source/_posts/network-deploy-nginx.md","hash":"ad5ac8edb483c238d1bbadfa703135b772736357","modified":1615826422700},{"_id":"source/_posts/technology-sense-network-request-repeated.md","hash":"1129b193a4e900fbdbd861d2202b43a3ee412f26","modified":1615828443604},{"_id":"source/_posts/technology-sense-sql-order-repeated.md","hash":"bf78f38d308c7b34c28c2b0d90af20f1e8e320f0","modified":1615827897959},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/docker_title.png","hash":"8cc6f642c76ac81994adef95898eddad5ce81c46","modified":1615826736576},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/https_title.png","hash":"8e5dfc1a3d2380ad8b0498a42cb1f4ab38098200","modified":1615825343698},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/nginx_title.png","hash":"5632e2b2fcf7582cc66672d24e93010cf7534c57","modified":1615826461019},{"_id":"themes/hexo-theme-skapp/source/img/technology-sense/data_repeated_title.png","hash":"7c11781da1ef358ffe1d97d3eb756725e0f847f2","modified":1615828714639},{"_id":"themes/hexo-theme-skapp/source/img/technology-sense/request_repeated_title.png","hash":"c731eee3aefe36b0d10b8d9cfca570233d919fb6","modified":1615828785471},{"_id":"public/2021/technology-sense-network-request-repeated/index.html","hash":"52ddf2d8e5b8c1321536ae7a76cf5190ce6f2ce2","modified":1615830569454},{"_id":"public/2021/technology-sense-sql-order-repeated/index.html","hash":"d37d13915ad9b28fb92cec2ebde86185b0e1e429","modified":1615830569454},{"_id":"public/2021/network-deploy-git/index.html","hash":"e8494e2db9a91d46717dff63ff3dec932c9c2df4","modified":1615830569454},{"_id":"public/2021/network-deploy-docker/index.html","hash":"f97e728a9236b0a0dc51072f1cca87f481e0b014","modified":1615830569454},{"_id":"public/2021/network-deploy-nginx/index.html","hash":"39a702da7d87f0e0ff48c32e805d91576b8c871d","modified":1615830569454},{"_id":"public/2021/network-deploy-https/index.html","hash":"47b62516e23be8b29cabe97bf561fe292a41ea3b","modified":1615830569454},{"_id":"public/img/network-deploy/dns_title.png","hash":"d2c430db0dbefc53c54dd2aed7e16264bafb3559","modified":1615830569454},{"_id":"public/img/network-deploy/https_title.png","hash":"8e5dfc1a3d2380ad8b0498a42cb1f4ab38098200","modified":1615830569454},{"_id":"public/img/network-deploy/nginx_title.png","hash":"5632e2b2fcf7582cc66672d24e93010cf7534c57","modified":1615830569454},{"_id":"public/img/technology-sense/data_repeated_title.png","hash":"7c11781da1ef358ffe1d97d3eb756725e0f847f2","modified":1615830569454},{"_id":"public/img/network-deploy/docker_title.png","hash":"8cc6f642c76ac81994adef95898eddad5ce81c46","modified":1615830569454},{"_id":"public/img/technology-sense/request_repeated_title.png","hash":"c731eee3aefe36b0d10b8d9cfca570233d919fb6","modified":1615830569454},{"_id":"source/_posts/images/acc.png","hash":"5f85480bb6caa6be4b2c74478176e35427a60a55","modified":1615831024369},{"_id":"themes/hexo-theme-skapp/source/img/network-deploy/git_title.png","hash":"f7a4eec9b859549237574c5d16502fc8ccec9430","modified":1615831075870},{"_id":"public/img/network-deploy/git_title.png","hash":"978af5776a733ae300636911b03d348160902821","modified":1615831106550}],"Category":[{"name":"foo","_id":"ckmaiq8p90000e8vla54og6jr"},{"name":"bar","parent":"ckmaiq8p90000e8vla54og6jr","_id":"ckmaiq8pc0001e8vlb4mi55cy"},{"name":"GO语言","_id":"ckmak0lwi0006s0vle7nqbcyy"},{"name":"技术场景","_id":"ckmak0q8p000as0vlhbzv7nnf"},{"name":"企业网络","_id":"ckmas94ms0000qcvleiqzhya1"}],"Data":[{"_id":"favicons","data":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"]},{"_id":"contact","data":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}],"Page":[],"Post":[{"title":"Hello World","subtitle":"人生若如初见,何时秋风悲画扇,等闲却道故人心,却道故人心意变","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"hello-world","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n\n\n\n```sequence\nA --> B: hello\n```\n\n\n\n\n\n人生若如插件\n\n```mermaid\ngraph TD;\n    1[protoc解析处理] --> 2[拷贝经过protbuf序列化之后的二进制到标准输出]\n    2 --> 3[自定义插件 protoc-gen-template]\n    3 --> 4[从标准输出读取protobuf的二进制数据]\n    4 --> 5[通过protobuf相关的库进行反序列化,比如,proto.Unmarshal]\n    5 --> 6[反序列化之后,会获得plugin.CodeGeneratorRequest]    \n```\n\n\n\n\n![image-20210315203750702](/image-20210315203750702.png)","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\nsubtitle: 人生若如初见,何时秋风悲画扇,等闲却道故人心,却道故人心意变\ncategories: \"技术场景\"\ntags: \"技术场景\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: hello-world\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n\n\n\n```sequence\nA --> B: hello\n```\n\n\n\n\n\n人生若如插件\n\n```mermaid\ngraph TD;\n    1[protoc解析处理] --> 2[拷贝经过protbuf序列化之后的二进制到标准输出]\n    2 --> 3[自定义插件 protoc-gen-template]\n    3 --> 4[从标准输出读取protobuf的二进制数据]\n    4 --> 5[通过protobuf相关的库进行反序列化,比如,proto.Unmarshal]\n    5 --> 6[反序列化之后,会获得plugin.CodeGeneratorRequest]    \n```\n\n\n\n\n![image-20210315203750702](/image-20210315203750702.png)","slug":"hello-world","published":1,"date":"2021-03-15T09:15:36.166Z","updated":"2021-03-15T13:02:26.566Z","_id":"ckmaf86by0000oovlepycdqlw","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A --&gt; B: hello</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>人生若如插件</p>\n<pre class=\"mermaid\">graph TD;\n    1[protoc解析处理] --> 2[拷贝经过protbuf序列化之后的二进制到标准输出]\n    2 --> 3[自定义插件 protoc-gen-template]\n    3 --> 4[从标准输出读取protobuf的二进制数据]\n    4 --> 5[通过protobuf相关的库进行反序列化,比如,proto.Unmarshal]\n    5 --> 6[反序列化之后,会获得plugin.CodeGeneratorRequest]</pre>\n\n\n\n\n<p><img src=\"/2021/03/15/hello-world/index/image-20210315203750702.png\" alt=\"image-20210315203750702\"></p>\n","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A --&gt; B: hello</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>人生若如插件</p>\n<pre class=\"mermaid\">graph TD;\n    1[protoc解析处理] --> 2[拷贝经过protbuf序列化之后的二进制到标准输出]\n    2 --> 3[自定义插件 protoc-gen-template]\n    3 --> 4[从标准输出读取protobuf的二进制数据]\n    4 --> 5[通过protobuf相关的库进行反序列化,比如,proto.Unmarshal]\n    5 --> 6[反序列化之后,会获得plugin.CodeGeneratorRequest]</pre>\n\n\n\n\n<p><img src=\"/2021/03/15/hello-world/index/image-20210315203750702.png\" alt=\"image-20210315203750702\"></p>\n"},{"title":"Hello World","subtitle":"人生若如初见,何时秋风悲画扇,等闲却道故人心,却道故人心意变","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world2.md","raw":"---\ntitle: Hello World\nsubtitle: 人生若如初见,何时秋风悲画扇,等闲却道故人心,却道故人心意变\ncategories: \"GO语言\"\ntags: \"Go语言\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world2","published":1,"date":"2021-03-15T12:18:05.807Z","updated":"2021-03-15T12:19:35.537Z","_id":"ckmajyz5u0003s0vl2ivdaidb","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"企业网络之部署NGINX","cover":"/img/network-deploy/nginx_title.png","subtitle":"企业网络之部署NGINX","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"network-deploy-nginx","_content":"NGINX是一款轻量级的WEB服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在BSD-LIKE 协议下发行.\n\n\n\n其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好.\n\n\n\nNGINX的安装方式有两种.第一种是通过YUM源安装,第二种是编译安装.\n\n\n\n此处采用编译安装的方式.之所以采用编译安装的方式,是因为个人所从事的工作中会频繁的用到一些NGINX的三方模块.\n\n\n\n通过维护一个NGINX工程,在需要用到三方模块的时候,在将三方模块通过GIT CLONE 进NGINX工程之后,配合CI/CD,可以很方便的对线上或者内网的NGINX做更新.\n\n\n\n#### 01.通过YUM安装相关依赖\n\n\n\n```\ndnf  install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf  config-manager --set-enabled powertools\ndnf  install -y wget curl gcc-c++ pcre pcre-devel zlib zlib-devel \ndnf  install -y libxslt-devel\ndnf  install -y libuuid-devel libblkid-devel libudev-devel \ndnf  install -y fuse-devel libedit-devel libatomic_ops-devel\ndnf  install -y openssl openssl-devel perl gd-devel\n```\n\n\n\n#### 02.下载NGINX的源码并解压\n\n\n\n```\nwget http://nginx.org/download/nginx-1.19.6.tar.gztar -zxvf nginx-1.19.6.tar.gzmv nginx-1.19.6 nginx\n```\n\n\n\n#### 03.配置工程\n\n\n\n在配置工程之前,需要使用下列命令查看下NGINX有哪些模块.根据自身目前需求可以删减相关的模块\n\n\n\n```\n[root@localhost nginx]# ./configure --help\n  --help                             print this message\n  --prefix=PATH                      set installation prefix\n  --sbin-path=PATH                   set nginx binary pathname\n  --modules-path=PATH                set modules path\n  --conf-path=PATH                   set nginx.conf pathname\n  --error-log-path=PATH              set error log pathname\n  --pid-path=PATH                    set nginx.pid pathname\n  --lock-path=PATH                   set nginx.lock pathname\n\n  --user=USER                        set non-privileged user for\n                                     worker processes\n  --group=GROUP                      set non-privileged group for\n                                     worker processes\n\n  --build=NAME                       set build name\n  --builddir=DIR                     set build directory\n\n  --with-select_module               enable select module\n  --without-select_module            disable select module\n  --with-poll_module                 enable poll module\n  --without-poll_module              disable poll module\n\n  --with-threads                     enable thread pool support\n\n  --with-file-aio                    enable file AIO support\n\n  --with-http_ssl_module             enable ngx_http_ssl_module\n  --with-http_v2_module              enable ngx_http_v2_module\n  --with-http_realip_module          enable ngx_http_realip_module\n  --with-http_addition_module        enable ngx_http_addition_module\n  --with-http_xslt_module            enable ngx_http_xslt_module\n  --with-http_xslt_module=dynamic    enable dynamic ngx_http_xslt_module\n  --with-http_image_filter_module    enable ngx_http_image_filter_module\n  --with-http_image_filter_module=dynamic\n                                     enable dynamic ngx_http_image_filter_module\n  --with-http_geoip_module           enable ngx_http_geoip_module\n  --with-http_geoip_module=dynamic   enable dynamic ngx_http_geoip_module\n  --with-http_sub_module             enable ngx_http_sub_module\n  --with-http_dav_module             enable ngx_http_dav_module\n  --with-http_flv_module             enable ngx_http_flv_module\n  --with-http_mp4_module             enable ngx_http_mp4_module\n  --with-http_gunzip_module          enable ngx_http_gunzip_module\n  --with-http_gzip_static_module     enable ngx_http_gzip_static_module\n  --with-http_auth_request_module    enable ngx_http_auth_request_module\n  --with-http_random_index_module    enable ngx_http_random_index_module\n  --with-http_secure_link_module     enable ngx_http_secure_link_module\n  --with-http_degradation_module     enable ngx_http_degradation_module\n  --with-http_slice_module           enable ngx_http_slice_module\n  --with-http_stub_status_module     enable ngx_http_stub_status_module\n\n  --without-http_charset_module      disable ngx_http_charset_module\n  --without-http_gzip_module         disable ngx_http_gzip_module\n  --without-http_ssi_module          disable ngx_http_ssi_module\n  --without-http_userid_module       disable ngx_http_userid_module\n  --without-http_access_module       disable ngx_http_access_module\n  --without-http_auth_basic_module   disable ngx_http_auth_basic_module\n  --without-http_mirror_module       disable ngx_http_mirror_module\n  --without-http_autoindex_module    disable ngx_http_autoindex_module\n  --without-http_geo_module          disable ngx_http_geo_module\n  --without-http_map_module          disable ngx_http_map_module\n  --without-http_split_clients_module disable ngx_http_split_clients_module\n  --without-http_referer_module      disable ngx_http_referer_module\n  --without-http_rewrite_module      disable ngx_http_rewrite_module\n  --without-http_proxy_module        disable ngx_http_proxy_module\n  --without-http_fastcgi_module      disable ngx_http_fastcgi_module\n  --without-http_uwsgi_module        disable ngx_http_uwsgi_module\n  --without-http_scgi_module         disable ngx_http_scgi_module\n  --without-http_grpc_module         disable ngx_http_grpc_module\n  --without-http_memcached_module    disable ngx_http_memcached_module\n  --without-http_limit_conn_module   disable ngx_http_limit_conn_module\n  --without-http_limit_req_module    disable ngx_http_limit_req_module\n  --without-http_empty_gif_module    disable ngx_http_empty_gif_module\n  --without-http_browser_module      disable ngx_http_browser_module\n  --without-http_upstream_hash_module\n                                     disable ngx_http_upstream_hash_module\n  --without-http_upstream_ip_hash_module\n                                     disable ngx_http_upstream_ip_hash_module\n  --without-http_upstream_least_conn_module\n                                     disable ngx_http_upstream_least_conn_module\n  --without-http_upstream_random_module\n                                     disable ngx_http_upstream_random_module\n  --without-http_upstream_keepalive_module\n                                     disable ngx_http_upstream_keepalive_module\n  --without-http_upstream_zone_module\n                                     disable ngx_http_upstream_zone_module\n\n  --with-http_perl_module            enable ngx_http_perl_module\n  --with-http_perl_module=dynamic    enable dynamic ngx_http_perl_module\n  --with-perl_modules_path=PATH      set Perl modules path\n  --with-perl=PATH                   set perl binary pathname\n\n  --http-log-path=PATH               set http access log pathname\n  --http-client-body-temp-path=PATH  set path to store\n                                     http client request body temporary files\n  --http-proxy-temp-path=PATH        set path to store\n                                     http proxy temporary files\n  --http-fastcgi-temp-path=PATH      set path to store\n                                     http fastcgi temporary files\n  --http-uwsgi-temp-path=PATH        set path to store\n                                     http uwsgi temporary files\n  --http-scgi-temp-path=PATH         set path to store\n                                     http scgi temporary files\n\n  --without-http                     disable HTTP server\n  --without-http-cache               disable HTTP cache\n\n  --with-mail                        enable POP3/IMAP4/SMTP proxy module\n  --with-mail=dynamic                enable dynamic POP3/IMAP4/SMTP proxy module\n  --with-mail_ssl_module             enable ngx_mail_ssl_module\n  --without-mail_pop3_module         disable ngx_mail_pop3_module\n  --without-mail_imap_module         disable ngx_mail_imap_module\n  --without-mail_smtp_module         disable ngx_mail_smtp_module\n\n  --with-stream                      enable TCP/UDP proxy module\n  --with-stream=dynamic              enable dynamic TCP/UDP proxy module\n  --with-stream_ssl_module           enable ngx_stream_ssl_module\n  --with-stream_realip_module        enable ngx_stream_realip_module\n  --with-stream_geoip_module         enable ngx_stream_geoip_module\n  --with-stream_geoip_module=dynamic enable dynamic ngx_stream_geoip_module\n  --with-stream_ssl_preread_module   enable ngx_stream_ssl_preread_module\n  --without-stream_limit_conn_module disable ngx_stream_limit_conn_module\n  --without-stream_access_module     disable ngx_stream_access_module\n  --without-stream_geo_module        disable ngx_stream_geo_module\n  --without-stream_map_module        disable ngx_stream_map_module\n  --without-stream_split_clients_module\n                                     disable ngx_stream_split_clients_module\n  --without-stream_return_module     disable ngx_stream_return_module\n  --without-stream_set_module        disable ngx_stream_set_module\n  --without-stream_upstream_hash_module\n                                     disable ngx_stream_upstream_hash_module\n  --without-stream_upstream_least_conn_module\n                                     disable ngx_stream_upstream_least_conn_module\n  --without-stream_upstream_random_module\n                                     disable ngx_stream_upstream_random_module\n  --without-stream_upstream_zone_module\n                                     disable ngx_stream_upstream_zone_module\n\n  --with-google_perftools_module     enable ngx_google_perftools_module\n  --with-cpp_test_module             enable ngx_cpp_test_module\n\n  --add-module=PATH                  enable external module\n  --add-dynamic-module=PATH          enable dynamic external module\n\n  --with-compat                      dynamic modules compatibility\n\n  --with-cc=PATH                     set C compiler pathname\n  --with-cpp=PATH                    set C preprocessor pathname\n  --with-cc-opt=OPTIONS              set additional C compiler options\n  --with-ld-opt=OPTIONS              set additional linker options\n  --with-cpu-opt=CPU                 build for the specified CPU, valid values:\n                                     pentium, pentiumpro, pentium3, pentium4,\n                                     athlon, opteron, sparc32, sparc64, ppc64\n\n  --without-pcre                     disable PCRE library usage\n  --with-pcre                        force PCRE library usage\n  --with-pcre=DIR                    set path to PCRE library sources\n  --with-pcre-opt=OPTIONS            set additional build options for PCRE\n  --with-pcre-jit                    build PCRE with JIT compilation support\n\n  --with-zlib=DIR                    set path to zlib library sources\n  --with-zlib-opt=OPTIONS            set additional build options for zlib\n  --with-zlib-asm=CPU                use zlib assembler sources optimized\n                                     for the specified CPU, valid values:\n                                     pentium, pentiumpro\n\n  --with-libatomic                   force libatomic_ops library usage\n  --with-libatomic=DIR               set path to libatomic_ops library sources\n\n  --with-openssl=DIR                 set path to OpenSSL library sources\n  --with-openssl-opt=OPTIONS         set additional build options for OpenSSL\n\n  --with-debug                       enable debug logging\n```\n\n\n\n下面是个人需要的配置\n\n\n\n```\n./configure --with-libatomic --with-pcre --with-compat \\\n  --with-stream --with-stream=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module   \\\n  --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module \\\n  --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module \\\n  --with-http_auth_request_module    --with-http_random_index_module   --with-http_secure_link_module \\\n  --with-http_degradation_module     --with-http_slice_module --with-http_stub_status_module \\\n  --with-threads --with-file-aio --with-http_ssl_module --with-http_v2_module --with-http_realip_module \\\n  --with-http_addition_module --with-http_xslt_module --with-http_xslt_module=dynamic --with-http_image_filter_module --with-http_image_filter_module=dynamic\\\n  --prefix=/etc/nginx \\\n  --sbin-path=/etc/nginx/nginx \\\n  --modules-path=/etc/nginx/modules \\\n  --conf-path=/etc/nginx/nginx.conf \\\n  --error-log-path=/etc/nginx/log \\\n  --pid-path=/etc/nginx/run/nginx.pid \\\n  --lock-path=/etc/nginx/nginx.lock\n```\n\n\n\n#### 04.编译&安装\n\n\n\n```\nmake make install\n```\n\n\n\n#### 05.加入systemctl\n\n\n\n进入 /usr/lib/systemd/system 目录下，编辑文件 nginx.service\n\n\n\n```\ncat > /usr/lib/systemd/system/nginx.service <<EOF\n[Unit]\nDescription=nginx\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/nginx/nginx\nExecReload=/etc/nginx/nginx -s reload\nExecStop=/etc/nginx/nginx -s quit\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\nEOF\nsystemctl daemon-reload \nsystemctl start nginx\nsystemctl enable nginx\n```\n\n\n\n#### 06.使用方式\n\n\n\n```\nsystemctl start nginx # 启动nginx\nsystemctl status nginx # 查看nginx的命令\nsystemctl restart nginx # 重启nginx服务\nsystemctl stop nginx # 停止nginx服务\nsystemctl enable nginx # 将nginx设为开机启动\nsystemctl reload nginx # 重新加载配置\n```","source":"_posts/network-deploy-nginx.md","raw":"---\ntitle: 企业网络之部署NGINX\ncover:  /img/network-deploy/nginx_title.png\nsubtitle: 企业网络之部署NGINX\ncategories: \"企业网络\"\ntags: \"企业网络\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: network-deploy-nginx\n\n---\nNGINX是一款轻量级的WEB服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在BSD-LIKE 协议下发行.\n\n\n\n其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好.\n\n\n\nNGINX的安装方式有两种.第一种是通过YUM源安装,第二种是编译安装.\n\n\n\n此处采用编译安装的方式.之所以采用编译安装的方式,是因为个人所从事的工作中会频繁的用到一些NGINX的三方模块.\n\n\n\n通过维护一个NGINX工程,在需要用到三方模块的时候,在将三方模块通过GIT CLONE 进NGINX工程之后,配合CI/CD,可以很方便的对线上或者内网的NGINX做更新.\n\n\n\n#### 01.通过YUM安装相关依赖\n\n\n\n```\ndnf  install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf  config-manager --set-enabled powertools\ndnf  install -y wget curl gcc-c++ pcre pcre-devel zlib zlib-devel \ndnf  install -y libxslt-devel\ndnf  install -y libuuid-devel libblkid-devel libudev-devel \ndnf  install -y fuse-devel libedit-devel libatomic_ops-devel\ndnf  install -y openssl openssl-devel perl gd-devel\n```\n\n\n\n#### 02.下载NGINX的源码并解压\n\n\n\n```\nwget http://nginx.org/download/nginx-1.19.6.tar.gztar -zxvf nginx-1.19.6.tar.gzmv nginx-1.19.6 nginx\n```\n\n\n\n#### 03.配置工程\n\n\n\n在配置工程之前,需要使用下列命令查看下NGINX有哪些模块.根据自身目前需求可以删减相关的模块\n\n\n\n```\n[root@localhost nginx]# ./configure --help\n  --help                             print this message\n  --prefix=PATH                      set installation prefix\n  --sbin-path=PATH                   set nginx binary pathname\n  --modules-path=PATH                set modules path\n  --conf-path=PATH                   set nginx.conf pathname\n  --error-log-path=PATH              set error log pathname\n  --pid-path=PATH                    set nginx.pid pathname\n  --lock-path=PATH                   set nginx.lock pathname\n\n  --user=USER                        set non-privileged user for\n                                     worker processes\n  --group=GROUP                      set non-privileged group for\n                                     worker processes\n\n  --build=NAME                       set build name\n  --builddir=DIR                     set build directory\n\n  --with-select_module               enable select module\n  --without-select_module            disable select module\n  --with-poll_module                 enable poll module\n  --without-poll_module              disable poll module\n\n  --with-threads                     enable thread pool support\n\n  --with-file-aio                    enable file AIO support\n\n  --with-http_ssl_module             enable ngx_http_ssl_module\n  --with-http_v2_module              enable ngx_http_v2_module\n  --with-http_realip_module          enable ngx_http_realip_module\n  --with-http_addition_module        enable ngx_http_addition_module\n  --with-http_xslt_module            enable ngx_http_xslt_module\n  --with-http_xslt_module=dynamic    enable dynamic ngx_http_xslt_module\n  --with-http_image_filter_module    enable ngx_http_image_filter_module\n  --with-http_image_filter_module=dynamic\n                                     enable dynamic ngx_http_image_filter_module\n  --with-http_geoip_module           enable ngx_http_geoip_module\n  --with-http_geoip_module=dynamic   enable dynamic ngx_http_geoip_module\n  --with-http_sub_module             enable ngx_http_sub_module\n  --with-http_dav_module             enable ngx_http_dav_module\n  --with-http_flv_module             enable ngx_http_flv_module\n  --with-http_mp4_module             enable ngx_http_mp4_module\n  --with-http_gunzip_module          enable ngx_http_gunzip_module\n  --with-http_gzip_static_module     enable ngx_http_gzip_static_module\n  --with-http_auth_request_module    enable ngx_http_auth_request_module\n  --with-http_random_index_module    enable ngx_http_random_index_module\n  --with-http_secure_link_module     enable ngx_http_secure_link_module\n  --with-http_degradation_module     enable ngx_http_degradation_module\n  --with-http_slice_module           enable ngx_http_slice_module\n  --with-http_stub_status_module     enable ngx_http_stub_status_module\n\n  --without-http_charset_module      disable ngx_http_charset_module\n  --without-http_gzip_module         disable ngx_http_gzip_module\n  --without-http_ssi_module          disable ngx_http_ssi_module\n  --without-http_userid_module       disable ngx_http_userid_module\n  --without-http_access_module       disable ngx_http_access_module\n  --without-http_auth_basic_module   disable ngx_http_auth_basic_module\n  --without-http_mirror_module       disable ngx_http_mirror_module\n  --without-http_autoindex_module    disable ngx_http_autoindex_module\n  --without-http_geo_module          disable ngx_http_geo_module\n  --without-http_map_module          disable ngx_http_map_module\n  --without-http_split_clients_module disable ngx_http_split_clients_module\n  --without-http_referer_module      disable ngx_http_referer_module\n  --without-http_rewrite_module      disable ngx_http_rewrite_module\n  --without-http_proxy_module        disable ngx_http_proxy_module\n  --without-http_fastcgi_module      disable ngx_http_fastcgi_module\n  --without-http_uwsgi_module        disable ngx_http_uwsgi_module\n  --without-http_scgi_module         disable ngx_http_scgi_module\n  --without-http_grpc_module         disable ngx_http_grpc_module\n  --without-http_memcached_module    disable ngx_http_memcached_module\n  --without-http_limit_conn_module   disable ngx_http_limit_conn_module\n  --without-http_limit_req_module    disable ngx_http_limit_req_module\n  --without-http_empty_gif_module    disable ngx_http_empty_gif_module\n  --without-http_browser_module      disable ngx_http_browser_module\n  --without-http_upstream_hash_module\n                                     disable ngx_http_upstream_hash_module\n  --without-http_upstream_ip_hash_module\n                                     disable ngx_http_upstream_ip_hash_module\n  --without-http_upstream_least_conn_module\n                                     disable ngx_http_upstream_least_conn_module\n  --without-http_upstream_random_module\n                                     disable ngx_http_upstream_random_module\n  --without-http_upstream_keepalive_module\n                                     disable ngx_http_upstream_keepalive_module\n  --without-http_upstream_zone_module\n                                     disable ngx_http_upstream_zone_module\n\n  --with-http_perl_module            enable ngx_http_perl_module\n  --with-http_perl_module=dynamic    enable dynamic ngx_http_perl_module\n  --with-perl_modules_path=PATH      set Perl modules path\n  --with-perl=PATH                   set perl binary pathname\n\n  --http-log-path=PATH               set http access log pathname\n  --http-client-body-temp-path=PATH  set path to store\n                                     http client request body temporary files\n  --http-proxy-temp-path=PATH        set path to store\n                                     http proxy temporary files\n  --http-fastcgi-temp-path=PATH      set path to store\n                                     http fastcgi temporary files\n  --http-uwsgi-temp-path=PATH        set path to store\n                                     http uwsgi temporary files\n  --http-scgi-temp-path=PATH         set path to store\n                                     http scgi temporary files\n\n  --without-http                     disable HTTP server\n  --without-http-cache               disable HTTP cache\n\n  --with-mail                        enable POP3/IMAP4/SMTP proxy module\n  --with-mail=dynamic                enable dynamic POP3/IMAP4/SMTP proxy module\n  --with-mail_ssl_module             enable ngx_mail_ssl_module\n  --without-mail_pop3_module         disable ngx_mail_pop3_module\n  --without-mail_imap_module         disable ngx_mail_imap_module\n  --without-mail_smtp_module         disable ngx_mail_smtp_module\n\n  --with-stream                      enable TCP/UDP proxy module\n  --with-stream=dynamic              enable dynamic TCP/UDP proxy module\n  --with-stream_ssl_module           enable ngx_stream_ssl_module\n  --with-stream_realip_module        enable ngx_stream_realip_module\n  --with-stream_geoip_module         enable ngx_stream_geoip_module\n  --with-stream_geoip_module=dynamic enable dynamic ngx_stream_geoip_module\n  --with-stream_ssl_preread_module   enable ngx_stream_ssl_preread_module\n  --without-stream_limit_conn_module disable ngx_stream_limit_conn_module\n  --without-stream_access_module     disable ngx_stream_access_module\n  --without-stream_geo_module        disable ngx_stream_geo_module\n  --without-stream_map_module        disable ngx_stream_map_module\n  --without-stream_split_clients_module\n                                     disable ngx_stream_split_clients_module\n  --without-stream_return_module     disable ngx_stream_return_module\n  --without-stream_set_module        disable ngx_stream_set_module\n  --without-stream_upstream_hash_module\n                                     disable ngx_stream_upstream_hash_module\n  --without-stream_upstream_least_conn_module\n                                     disable ngx_stream_upstream_least_conn_module\n  --without-stream_upstream_random_module\n                                     disable ngx_stream_upstream_random_module\n  --without-stream_upstream_zone_module\n                                     disable ngx_stream_upstream_zone_module\n\n  --with-google_perftools_module     enable ngx_google_perftools_module\n  --with-cpp_test_module             enable ngx_cpp_test_module\n\n  --add-module=PATH                  enable external module\n  --add-dynamic-module=PATH          enable dynamic external module\n\n  --with-compat                      dynamic modules compatibility\n\n  --with-cc=PATH                     set C compiler pathname\n  --with-cpp=PATH                    set C preprocessor pathname\n  --with-cc-opt=OPTIONS              set additional C compiler options\n  --with-ld-opt=OPTIONS              set additional linker options\n  --with-cpu-opt=CPU                 build for the specified CPU, valid values:\n                                     pentium, pentiumpro, pentium3, pentium4,\n                                     athlon, opteron, sparc32, sparc64, ppc64\n\n  --without-pcre                     disable PCRE library usage\n  --with-pcre                        force PCRE library usage\n  --with-pcre=DIR                    set path to PCRE library sources\n  --with-pcre-opt=OPTIONS            set additional build options for PCRE\n  --with-pcre-jit                    build PCRE with JIT compilation support\n\n  --with-zlib=DIR                    set path to zlib library sources\n  --with-zlib-opt=OPTIONS            set additional build options for zlib\n  --with-zlib-asm=CPU                use zlib assembler sources optimized\n                                     for the specified CPU, valid values:\n                                     pentium, pentiumpro\n\n  --with-libatomic                   force libatomic_ops library usage\n  --with-libatomic=DIR               set path to libatomic_ops library sources\n\n  --with-openssl=DIR                 set path to OpenSSL library sources\n  --with-openssl-opt=OPTIONS         set additional build options for OpenSSL\n\n  --with-debug                       enable debug logging\n```\n\n\n\n下面是个人需要的配置\n\n\n\n```\n./configure --with-libatomic --with-pcre --with-compat \\\n  --with-stream --with-stream=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module   \\\n  --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module \\\n  --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module \\\n  --with-http_auth_request_module    --with-http_random_index_module   --with-http_secure_link_module \\\n  --with-http_degradation_module     --with-http_slice_module --with-http_stub_status_module \\\n  --with-threads --with-file-aio --with-http_ssl_module --with-http_v2_module --with-http_realip_module \\\n  --with-http_addition_module --with-http_xslt_module --with-http_xslt_module=dynamic --with-http_image_filter_module --with-http_image_filter_module=dynamic\\\n  --prefix=/etc/nginx \\\n  --sbin-path=/etc/nginx/nginx \\\n  --modules-path=/etc/nginx/modules \\\n  --conf-path=/etc/nginx/nginx.conf \\\n  --error-log-path=/etc/nginx/log \\\n  --pid-path=/etc/nginx/run/nginx.pid \\\n  --lock-path=/etc/nginx/nginx.lock\n```\n\n\n\n#### 04.编译&安装\n\n\n\n```\nmake make install\n```\n\n\n\n#### 05.加入systemctl\n\n\n\n进入 /usr/lib/systemd/system 目录下，编辑文件 nginx.service\n\n\n\n```\ncat > /usr/lib/systemd/system/nginx.service <<EOF\n[Unit]\nDescription=nginx\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/nginx/nginx\nExecReload=/etc/nginx/nginx -s reload\nExecStop=/etc/nginx/nginx -s quit\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\nEOF\nsystemctl daemon-reload \nsystemctl start nginx\nsystemctl enable nginx\n```\n\n\n\n#### 06.使用方式\n\n\n\n```\nsystemctl start nginx # 启动nginx\nsystemctl status nginx # 查看nginx的命令\nsystemctl restart nginx # 重启nginx服务\nsystemctl stop nginx # 停止nginx服务\nsystemctl enable nginx # 将nginx设为开机启动\nsystemctl reload nginx # 重新加载配置\n```","slug":"network-deploy-nginx","published":1,"date":"2021-03-15T16:29:38.516Z","updated":"2021-03-15T16:40:22.700Z","_id":"ckmasyb6j000934vl3wdueb6h","comments":1,"layout":"post","photos":[],"link":"","content":"<p>NGINX是一款轻量级的WEB服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在BSD-LIKE 协议下发行.</p>\n<p>其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好.</p>\n<p>NGINX的安装方式有两种.第一种是通过YUM源安装,第二种是编译安装.</p>\n<p>此处采用编译安装的方式.之所以采用编译安装的方式,是因为个人所从事的工作中会频繁的用到一些NGINX的三方模块.</p>\n<p>通过维护一个NGINX工程,在需要用到三方模块的时候,在将三方模块通过GIT CLONE 进NGINX工程之后,配合CI/CD,可以很方便的对线上或者内网的NGINX做更新.</p>\n<h4 id=\"01-通过YUM安装相关依赖\"><a href=\"#01-通过YUM安装相关依赖\" class=\"headerlink\" title=\"01.通过YUM安装相关依赖\"></a>01.通过YUM安装相关依赖</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dnf  install -y https:&#x2F;&#x2F;dl.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;epel-release-latest-8.noarch.rpm</span><br><span class=\"line\">dnf  config-manager --set-enabled powertools</span><br><span class=\"line\">dnf  install -y wget curl gcc-c++ pcre pcre-devel zlib zlib-devel </span><br><span class=\"line\">dnf  install -y libxslt-devel</span><br><span class=\"line\">dnf  install -y libuuid-devel libblkid-devel libudev-devel </span><br><span class=\"line\">dnf  install -y fuse-devel libedit-devel libatomic_ops-devel</span><br><span class=\"line\">dnf  install -y openssl openssl-devel perl gd-devel</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"02-下载NGINX的源码并解压\"><a href=\"#02-下载NGINX的源码并解压\" class=\"headerlink\" title=\"02.下载NGINX的源码并解压\"></a>02.下载NGINX的源码并解压</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.19.6.tar.gztar -zxvf nginx-1.19.6.tar.gzmv nginx-1.19.6 nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-配置工程\"><a href=\"#03-配置工程\" class=\"headerlink\" title=\"03.配置工程\"></a>03.配置工程</h4><p>在配置工程之前,需要使用下列命令查看下NGINX有哪些模块.根据自身目前需求可以删减相关的模块</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx]# .&#x2F;configure --help</span><br><span class=\"line\">  --help                             print this message</span><br><span class=\"line\">  --prefix&#x3D;PATH                      set installation prefix</span><br><span class=\"line\">  --sbin-path&#x3D;PATH                   set nginx binary pathname</span><br><span class=\"line\">  --modules-path&#x3D;PATH                set modules path</span><br><span class=\"line\">  --conf-path&#x3D;PATH                   set nginx.conf pathname</span><br><span class=\"line\">  --error-log-path&#x3D;PATH              set error log pathname</span><br><span class=\"line\">  --pid-path&#x3D;PATH                    set nginx.pid pathname</span><br><span class=\"line\">  --lock-path&#x3D;PATH                   set nginx.lock pathname</span><br><span class=\"line\"></span><br><span class=\"line\">  --user&#x3D;USER                        set non-privileged user for</span><br><span class=\"line\">                                     worker processes</span><br><span class=\"line\">  --group&#x3D;GROUP                      set non-privileged group for</span><br><span class=\"line\">                                     worker processes</span><br><span class=\"line\"></span><br><span class=\"line\">  --build&#x3D;NAME                       set build name</span><br><span class=\"line\">  --builddir&#x3D;DIR                     set build directory</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-select_module               enable select module</span><br><span class=\"line\">  --without-select_module            disable select module</span><br><span class=\"line\">  --with-poll_module                 enable poll module</span><br><span class=\"line\">  --without-poll_module              disable poll module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-threads                     enable thread pool support</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-file-aio                    enable file AIO support</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-http_ssl_module             enable ngx_http_ssl_module</span><br><span class=\"line\">  --with-http_v2_module              enable ngx_http_v2_module</span><br><span class=\"line\">  --with-http_realip_module          enable ngx_http_realip_module</span><br><span class=\"line\">  --with-http_addition_module        enable ngx_http_addition_module</span><br><span class=\"line\">  --with-http_xslt_module            enable ngx_http_xslt_module</span><br><span class=\"line\">  --with-http_xslt_module&#x3D;dynamic    enable dynamic ngx_http_xslt_module</span><br><span class=\"line\">  --with-http_image_filter_module    enable ngx_http_image_filter_module</span><br><span class=\"line\">  --with-http_image_filter_module&#x3D;dynamic</span><br><span class=\"line\">                                     enable dynamic ngx_http_image_filter_module</span><br><span class=\"line\">  --with-http_geoip_module           enable ngx_http_geoip_module</span><br><span class=\"line\">  --with-http_geoip_module&#x3D;dynamic   enable dynamic ngx_http_geoip_module</span><br><span class=\"line\">  --with-http_sub_module             enable ngx_http_sub_module</span><br><span class=\"line\">  --with-http_dav_module             enable ngx_http_dav_module</span><br><span class=\"line\">  --with-http_flv_module             enable ngx_http_flv_module</span><br><span class=\"line\">  --with-http_mp4_module             enable ngx_http_mp4_module</span><br><span class=\"line\">  --with-http_gunzip_module          enable ngx_http_gunzip_module</span><br><span class=\"line\">  --with-http_gzip_static_module     enable ngx_http_gzip_static_module</span><br><span class=\"line\">  --with-http_auth_request_module    enable ngx_http_auth_request_module</span><br><span class=\"line\">  --with-http_random_index_module    enable ngx_http_random_index_module</span><br><span class=\"line\">  --with-http_secure_link_module     enable ngx_http_secure_link_module</span><br><span class=\"line\">  --with-http_degradation_module     enable ngx_http_degradation_module</span><br><span class=\"line\">  --with-http_slice_module           enable ngx_http_slice_module</span><br><span class=\"line\">  --with-http_stub_status_module     enable ngx_http_stub_status_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --without-http_charset_module      disable ngx_http_charset_module</span><br><span class=\"line\">  --without-http_gzip_module         disable ngx_http_gzip_module</span><br><span class=\"line\">  --without-http_ssi_module          disable ngx_http_ssi_module</span><br><span class=\"line\">  --without-http_userid_module       disable ngx_http_userid_module</span><br><span class=\"line\">  --without-http_access_module       disable ngx_http_access_module</span><br><span class=\"line\">  --without-http_auth_basic_module   disable ngx_http_auth_basic_module</span><br><span class=\"line\">  --without-http_mirror_module       disable ngx_http_mirror_module</span><br><span class=\"line\">  --without-http_autoindex_module    disable ngx_http_autoindex_module</span><br><span class=\"line\">  --without-http_geo_module          disable ngx_http_geo_module</span><br><span class=\"line\">  --without-http_map_module          disable ngx_http_map_module</span><br><span class=\"line\">  --without-http_split_clients_module disable ngx_http_split_clients_module</span><br><span class=\"line\">  --without-http_referer_module      disable ngx_http_referer_module</span><br><span class=\"line\">  --without-http_rewrite_module      disable ngx_http_rewrite_module</span><br><span class=\"line\">  --without-http_proxy_module        disable ngx_http_proxy_module</span><br><span class=\"line\">  --without-http_fastcgi_module      disable ngx_http_fastcgi_module</span><br><span class=\"line\">  --without-http_uwsgi_module        disable ngx_http_uwsgi_module</span><br><span class=\"line\">  --without-http_scgi_module         disable ngx_http_scgi_module</span><br><span class=\"line\">  --without-http_grpc_module         disable ngx_http_grpc_module</span><br><span class=\"line\">  --without-http_memcached_module    disable ngx_http_memcached_module</span><br><span class=\"line\">  --without-http_limit_conn_module   disable ngx_http_limit_conn_module</span><br><span class=\"line\">  --without-http_limit_req_module    disable ngx_http_limit_req_module</span><br><span class=\"line\">  --without-http_empty_gif_module    disable ngx_http_empty_gif_module</span><br><span class=\"line\">  --without-http_browser_module      disable ngx_http_browser_module</span><br><span class=\"line\">  --without-http_upstream_hash_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_hash_module</span><br><span class=\"line\">  --without-http_upstream_ip_hash_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_ip_hash_module</span><br><span class=\"line\">  --without-http_upstream_least_conn_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_least_conn_module</span><br><span class=\"line\">  --without-http_upstream_random_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_random_module</span><br><span class=\"line\">  --without-http_upstream_keepalive_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_keepalive_module</span><br><span class=\"line\">  --without-http_upstream_zone_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_zone_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-http_perl_module            enable ngx_http_perl_module</span><br><span class=\"line\">  --with-http_perl_module&#x3D;dynamic    enable dynamic ngx_http_perl_module</span><br><span class=\"line\">  --with-perl_modules_path&#x3D;PATH      set Perl modules path</span><br><span class=\"line\">  --with-perl&#x3D;PATH                   set perl binary pathname</span><br><span class=\"line\"></span><br><span class=\"line\">  --http-log-path&#x3D;PATH               set http access log pathname</span><br><span class=\"line\">  --http-client-body-temp-path&#x3D;PATH  set path to store</span><br><span class=\"line\">                                     http client request body temporary files</span><br><span class=\"line\">  --http-proxy-temp-path&#x3D;PATH        set path to store</span><br><span class=\"line\">                                     http proxy temporary files</span><br><span class=\"line\">  --http-fastcgi-temp-path&#x3D;PATH      set path to store</span><br><span class=\"line\">                                     http fastcgi temporary files</span><br><span class=\"line\">  --http-uwsgi-temp-path&#x3D;PATH        set path to store</span><br><span class=\"line\">                                     http uwsgi temporary files</span><br><span class=\"line\">  --http-scgi-temp-path&#x3D;PATH         set path to store</span><br><span class=\"line\">                                     http scgi temporary files</span><br><span class=\"line\"></span><br><span class=\"line\">  --without-http                     disable HTTP server</span><br><span class=\"line\">  --without-http-cache               disable HTTP cache</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-mail                        enable POP3&#x2F;IMAP4&#x2F;SMTP proxy module</span><br><span class=\"line\">  --with-mail&#x3D;dynamic                enable dynamic POP3&#x2F;IMAP4&#x2F;SMTP proxy module</span><br><span class=\"line\">  --with-mail_ssl_module             enable ngx_mail_ssl_module</span><br><span class=\"line\">  --without-mail_pop3_module         disable ngx_mail_pop3_module</span><br><span class=\"line\">  --without-mail_imap_module         disable ngx_mail_imap_module</span><br><span class=\"line\">  --without-mail_smtp_module         disable ngx_mail_smtp_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-stream                      enable TCP&#x2F;UDP proxy module</span><br><span class=\"line\">  --with-stream&#x3D;dynamic              enable dynamic TCP&#x2F;UDP proxy module</span><br><span class=\"line\">  --with-stream_ssl_module           enable ngx_stream_ssl_module</span><br><span class=\"line\">  --with-stream_realip_module        enable ngx_stream_realip_module</span><br><span class=\"line\">  --with-stream_geoip_module         enable ngx_stream_geoip_module</span><br><span class=\"line\">  --with-stream_geoip_module&#x3D;dynamic enable dynamic ngx_stream_geoip_module</span><br><span class=\"line\">  --with-stream_ssl_preread_module   enable ngx_stream_ssl_preread_module</span><br><span class=\"line\">  --without-stream_limit_conn_module disable ngx_stream_limit_conn_module</span><br><span class=\"line\">  --without-stream_access_module     disable ngx_stream_access_module</span><br><span class=\"line\">  --without-stream_geo_module        disable ngx_stream_geo_module</span><br><span class=\"line\">  --without-stream_map_module        disable ngx_stream_map_module</span><br><span class=\"line\">  --without-stream_split_clients_module</span><br><span class=\"line\">                                     disable ngx_stream_split_clients_module</span><br><span class=\"line\">  --without-stream_return_module     disable ngx_stream_return_module</span><br><span class=\"line\">  --without-stream_set_module        disable ngx_stream_set_module</span><br><span class=\"line\">  --without-stream_upstream_hash_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_hash_module</span><br><span class=\"line\">  --without-stream_upstream_least_conn_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_least_conn_module</span><br><span class=\"line\">  --without-stream_upstream_random_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_random_module</span><br><span class=\"line\">  --without-stream_upstream_zone_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_zone_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-google_perftools_module     enable ngx_google_perftools_module</span><br><span class=\"line\">  --with-cpp_test_module             enable ngx_cpp_test_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --add-module&#x3D;PATH                  enable external module</span><br><span class=\"line\">  --add-dynamic-module&#x3D;PATH          enable dynamic external module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-compat                      dynamic modules compatibility</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-cc&#x3D;PATH                     set C compiler pathname</span><br><span class=\"line\">  --with-cpp&#x3D;PATH                    set C preprocessor pathname</span><br><span class=\"line\">  --with-cc-opt&#x3D;OPTIONS              set additional C compiler options</span><br><span class=\"line\">  --with-ld-opt&#x3D;OPTIONS              set additional linker options</span><br><span class=\"line\">  --with-cpu-opt&#x3D;CPU                 build for the specified CPU, valid values:</span><br><span class=\"line\">                                     pentium, pentiumpro, pentium3, pentium4,</span><br><span class=\"line\">                                     athlon, opteron, sparc32, sparc64, ppc64</span><br><span class=\"line\"></span><br><span class=\"line\">  --without-pcre                     disable PCRE library usage</span><br><span class=\"line\">  --with-pcre                        force PCRE library usage</span><br><span class=\"line\">  --with-pcre&#x3D;DIR                    set path to PCRE library sources</span><br><span class=\"line\">  --with-pcre-opt&#x3D;OPTIONS            set additional build options for PCRE</span><br><span class=\"line\">  --with-pcre-jit                    build PCRE with JIT compilation support</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-zlib&#x3D;DIR                    set path to zlib library sources</span><br><span class=\"line\">  --with-zlib-opt&#x3D;OPTIONS            set additional build options for zlib</span><br><span class=\"line\">  --with-zlib-asm&#x3D;CPU                use zlib assembler sources optimized</span><br><span class=\"line\">                                     for the specified CPU, valid values:</span><br><span class=\"line\">                                     pentium, pentiumpro</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-libatomic                   force libatomic_ops library usage</span><br><span class=\"line\">  --with-libatomic&#x3D;DIR               set path to libatomic_ops library sources</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-openssl&#x3D;DIR                 set path to OpenSSL library sources</span><br><span class=\"line\">  --with-openssl-opt&#x3D;OPTIONS         set additional build options for OpenSSL</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-debug                       enable debug logging</span><br></pre></td></tr></table></figure>\n\n\n\n<p>下面是个人需要的配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;configure --with-libatomic --with-pcre --with-compat \\</span><br><span class=\"line\">  --with-stream --with-stream&#x3D;dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module   \\</span><br><span class=\"line\">  --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module \\</span><br><span class=\"line\">  --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module \\</span><br><span class=\"line\">  --with-http_auth_request_module    --with-http_random_index_module   --with-http_secure_link_module \\</span><br><span class=\"line\">  --with-http_degradation_module     --with-http_slice_module --with-http_stub_status_module \\</span><br><span class=\"line\">  --with-threads --with-file-aio --with-http_ssl_module --with-http_v2_module --with-http_realip_module \\</span><br><span class=\"line\">  --with-http_addition_module --with-http_xslt_module --with-http_xslt_module&#x3D;dynamic --with-http_image_filter_module --with-http_image_filter_module&#x3D;dynamic\\</span><br><span class=\"line\">  --prefix&#x3D;&#x2F;etc&#x2F;nginx \\</span><br><span class=\"line\">  --sbin-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx \\</span><br><span class=\"line\">  --modules-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;modules \\</span><br><span class=\"line\">  --conf-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx.conf \\</span><br><span class=\"line\">  --error-log-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;log \\</span><br><span class=\"line\">  --pid-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;run&#x2F;nginx.pid \\</span><br><span class=\"line\">  --lock-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx.lock</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"04-编译-amp-安装\"><a href=\"#04-编译-amp-安装\" class=\"headerlink\" title=\"04.编译&amp;安装\"></a>04.编译&amp;安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make make install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"05-加入systemctl\"><a href=\"#05-加入systemctl\" class=\"headerlink\" title=\"05.加入systemctl\"></a>05.加入systemctl</h4><p>进入 /usr/lib/systemd/system 目录下，编辑文件 nginx.service</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt; &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service &lt;&lt;EOF</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;nginx</span><br><span class=\"line\">After&#x3D;network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type&#x3D;forking</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx</span><br><span class=\"line\">ExecReload&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx -s reload</span><br><span class=\"line\">ExecStop&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx -s quit</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\">EOF</span><br><span class=\"line\">systemctl daemon-reload </span><br><span class=\"line\">systemctl start nginx</span><br><span class=\"line\">systemctl enable nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"06-使用方式\"><a href=\"#06-使用方式\" class=\"headerlink\" title=\"06.使用方式\"></a>06.使用方式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start nginx # 启动nginx</span><br><span class=\"line\">systemctl status nginx # 查看nginx的命令</span><br><span class=\"line\">systemctl restart nginx # 重启nginx服务</span><br><span class=\"line\">systemctl stop nginx # 停止nginx服务</span><br><span class=\"line\">systemctl enable nginx # 将nginx设为开机启动</span><br><span class=\"line\">systemctl reload nginx # 重新加载配置</span><br></pre></td></tr></table></figure>","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>NGINX是一款轻量级的WEB服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在BSD-LIKE 协议下发行.</p>\n<p>其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好.</p>\n<p>NGINX的安装方式有两种.第一种是通过YUM源安装,第二种是编译安装.</p>\n<p>此处采用编译安装的方式.之所以采用编译安装的方式,是因为个人所从事的工作中会频繁的用到一些NGINX的三方模块.</p>\n<p>通过维护一个NGINX工程,在需要用到三方模块的时候,在将三方模块通过GIT CLONE 进NGINX工程之后,配合CI/CD,可以很方便的对线上或者内网的NGINX做更新.</p>\n<h4 id=\"01-通过YUM安装相关依赖\"><a href=\"#01-通过YUM安装相关依赖\" class=\"headerlink\" title=\"01.通过YUM安装相关依赖\"></a>01.通过YUM安装相关依赖</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dnf  install -y https:&#x2F;&#x2F;dl.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;epel-release-latest-8.noarch.rpm</span><br><span class=\"line\">dnf  config-manager --set-enabled powertools</span><br><span class=\"line\">dnf  install -y wget curl gcc-c++ pcre pcre-devel zlib zlib-devel </span><br><span class=\"line\">dnf  install -y libxslt-devel</span><br><span class=\"line\">dnf  install -y libuuid-devel libblkid-devel libudev-devel </span><br><span class=\"line\">dnf  install -y fuse-devel libedit-devel libatomic_ops-devel</span><br><span class=\"line\">dnf  install -y openssl openssl-devel perl gd-devel</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"02-下载NGINX的源码并解压\"><a href=\"#02-下载NGINX的源码并解压\" class=\"headerlink\" title=\"02.下载NGINX的源码并解压\"></a>02.下载NGINX的源码并解压</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.19.6.tar.gztar -zxvf nginx-1.19.6.tar.gzmv nginx-1.19.6 nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-配置工程\"><a href=\"#03-配置工程\" class=\"headerlink\" title=\"03.配置工程\"></a>03.配置工程</h4><p>在配置工程之前,需要使用下列命令查看下NGINX有哪些模块.根据自身目前需求可以删减相关的模块</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx]# .&#x2F;configure --help</span><br><span class=\"line\">  --help                             print this message</span><br><span class=\"line\">  --prefix&#x3D;PATH                      set installation prefix</span><br><span class=\"line\">  --sbin-path&#x3D;PATH                   set nginx binary pathname</span><br><span class=\"line\">  --modules-path&#x3D;PATH                set modules path</span><br><span class=\"line\">  --conf-path&#x3D;PATH                   set nginx.conf pathname</span><br><span class=\"line\">  --error-log-path&#x3D;PATH              set error log pathname</span><br><span class=\"line\">  --pid-path&#x3D;PATH                    set nginx.pid pathname</span><br><span class=\"line\">  --lock-path&#x3D;PATH                   set nginx.lock pathname</span><br><span class=\"line\"></span><br><span class=\"line\">  --user&#x3D;USER                        set non-privileged user for</span><br><span class=\"line\">                                     worker processes</span><br><span class=\"line\">  --group&#x3D;GROUP                      set non-privileged group for</span><br><span class=\"line\">                                     worker processes</span><br><span class=\"line\"></span><br><span class=\"line\">  --build&#x3D;NAME                       set build name</span><br><span class=\"line\">  --builddir&#x3D;DIR                     set build directory</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-select_module               enable select module</span><br><span class=\"line\">  --without-select_module            disable select module</span><br><span class=\"line\">  --with-poll_module                 enable poll module</span><br><span class=\"line\">  --without-poll_module              disable poll module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-threads                     enable thread pool support</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-file-aio                    enable file AIO support</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-http_ssl_module             enable ngx_http_ssl_module</span><br><span class=\"line\">  --with-http_v2_module              enable ngx_http_v2_module</span><br><span class=\"line\">  --with-http_realip_module          enable ngx_http_realip_module</span><br><span class=\"line\">  --with-http_addition_module        enable ngx_http_addition_module</span><br><span class=\"line\">  --with-http_xslt_module            enable ngx_http_xslt_module</span><br><span class=\"line\">  --with-http_xslt_module&#x3D;dynamic    enable dynamic ngx_http_xslt_module</span><br><span class=\"line\">  --with-http_image_filter_module    enable ngx_http_image_filter_module</span><br><span class=\"line\">  --with-http_image_filter_module&#x3D;dynamic</span><br><span class=\"line\">                                     enable dynamic ngx_http_image_filter_module</span><br><span class=\"line\">  --with-http_geoip_module           enable ngx_http_geoip_module</span><br><span class=\"line\">  --with-http_geoip_module&#x3D;dynamic   enable dynamic ngx_http_geoip_module</span><br><span class=\"line\">  --with-http_sub_module             enable ngx_http_sub_module</span><br><span class=\"line\">  --with-http_dav_module             enable ngx_http_dav_module</span><br><span class=\"line\">  --with-http_flv_module             enable ngx_http_flv_module</span><br><span class=\"line\">  --with-http_mp4_module             enable ngx_http_mp4_module</span><br><span class=\"line\">  --with-http_gunzip_module          enable ngx_http_gunzip_module</span><br><span class=\"line\">  --with-http_gzip_static_module     enable ngx_http_gzip_static_module</span><br><span class=\"line\">  --with-http_auth_request_module    enable ngx_http_auth_request_module</span><br><span class=\"line\">  --with-http_random_index_module    enable ngx_http_random_index_module</span><br><span class=\"line\">  --with-http_secure_link_module     enable ngx_http_secure_link_module</span><br><span class=\"line\">  --with-http_degradation_module     enable ngx_http_degradation_module</span><br><span class=\"line\">  --with-http_slice_module           enable ngx_http_slice_module</span><br><span class=\"line\">  --with-http_stub_status_module     enable ngx_http_stub_status_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --without-http_charset_module      disable ngx_http_charset_module</span><br><span class=\"line\">  --without-http_gzip_module         disable ngx_http_gzip_module</span><br><span class=\"line\">  --without-http_ssi_module          disable ngx_http_ssi_module</span><br><span class=\"line\">  --without-http_userid_module       disable ngx_http_userid_module</span><br><span class=\"line\">  --without-http_access_module       disable ngx_http_access_module</span><br><span class=\"line\">  --without-http_auth_basic_module   disable ngx_http_auth_basic_module</span><br><span class=\"line\">  --without-http_mirror_module       disable ngx_http_mirror_module</span><br><span class=\"line\">  --without-http_autoindex_module    disable ngx_http_autoindex_module</span><br><span class=\"line\">  --without-http_geo_module          disable ngx_http_geo_module</span><br><span class=\"line\">  --without-http_map_module          disable ngx_http_map_module</span><br><span class=\"line\">  --without-http_split_clients_module disable ngx_http_split_clients_module</span><br><span class=\"line\">  --without-http_referer_module      disable ngx_http_referer_module</span><br><span class=\"line\">  --without-http_rewrite_module      disable ngx_http_rewrite_module</span><br><span class=\"line\">  --without-http_proxy_module        disable ngx_http_proxy_module</span><br><span class=\"line\">  --without-http_fastcgi_module      disable ngx_http_fastcgi_module</span><br><span class=\"line\">  --without-http_uwsgi_module        disable ngx_http_uwsgi_module</span><br><span class=\"line\">  --without-http_scgi_module         disable ngx_http_scgi_module</span><br><span class=\"line\">  --without-http_grpc_module         disable ngx_http_grpc_module</span><br><span class=\"line\">  --without-http_memcached_module    disable ngx_http_memcached_module</span><br><span class=\"line\">  --without-http_limit_conn_module   disable ngx_http_limit_conn_module</span><br><span class=\"line\">  --without-http_limit_req_module    disable ngx_http_limit_req_module</span><br><span class=\"line\">  --without-http_empty_gif_module    disable ngx_http_empty_gif_module</span><br><span class=\"line\">  --without-http_browser_module      disable ngx_http_browser_module</span><br><span class=\"line\">  --without-http_upstream_hash_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_hash_module</span><br><span class=\"line\">  --without-http_upstream_ip_hash_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_ip_hash_module</span><br><span class=\"line\">  --without-http_upstream_least_conn_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_least_conn_module</span><br><span class=\"line\">  --without-http_upstream_random_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_random_module</span><br><span class=\"line\">  --without-http_upstream_keepalive_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_keepalive_module</span><br><span class=\"line\">  --without-http_upstream_zone_module</span><br><span class=\"line\">                                     disable ngx_http_upstream_zone_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-http_perl_module            enable ngx_http_perl_module</span><br><span class=\"line\">  --with-http_perl_module&#x3D;dynamic    enable dynamic ngx_http_perl_module</span><br><span class=\"line\">  --with-perl_modules_path&#x3D;PATH      set Perl modules path</span><br><span class=\"line\">  --with-perl&#x3D;PATH                   set perl binary pathname</span><br><span class=\"line\"></span><br><span class=\"line\">  --http-log-path&#x3D;PATH               set http access log pathname</span><br><span class=\"line\">  --http-client-body-temp-path&#x3D;PATH  set path to store</span><br><span class=\"line\">                                     http client request body temporary files</span><br><span class=\"line\">  --http-proxy-temp-path&#x3D;PATH        set path to store</span><br><span class=\"line\">                                     http proxy temporary files</span><br><span class=\"line\">  --http-fastcgi-temp-path&#x3D;PATH      set path to store</span><br><span class=\"line\">                                     http fastcgi temporary files</span><br><span class=\"line\">  --http-uwsgi-temp-path&#x3D;PATH        set path to store</span><br><span class=\"line\">                                     http uwsgi temporary files</span><br><span class=\"line\">  --http-scgi-temp-path&#x3D;PATH         set path to store</span><br><span class=\"line\">                                     http scgi temporary files</span><br><span class=\"line\"></span><br><span class=\"line\">  --without-http                     disable HTTP server</span><br><span class=\"line\">  --without-http-cache               disable HTTP cache</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-mail                        enable POP3&#x2F;IMAP4&#x2F;SMTP proxy module</span><br><span class=\"line\">  --with-mail&#x3D;dynamic                enable dynamic POP3&#x2F;IMAP4&#x2F;SMTP proxy module</span><br><span class=\"line\">  --with-mail_ssl_module             enable ngx_mail_ssl_module</span><br><span class=\"line\">  --without-mail_pop3_module         disable ngx_mail_pop3_module</span><br><span class=\"line\">  --without-mail_imap_module         disable ngx_mail_imap_module</span><br><span class=\"line\">  --without-mail_smtp_module         disable ngx_mail_smtp_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-stream                      enable TCP&#x2F;UDP proxy module</span><br><span class=\"line\">  --with-stream&#x3D;dynamic              enable dynamic TCP&#x2F;UDP proxy module</span><br><span class=\"line\">  --with-stream_ssl_module           enable ngx_stream_ssl_module</span><br><span class=\"line\">  --with-stream_realip_module        enable ngx_stream_realip_module</span><br><span class=\"line\">  --with-stream_geoip_module         enable ngx_stream_geoip_module</span><br><span class=\"line\">  --with-stream_geoip_module&#x3D;dynamic enable dynamic ngx_stream_geoip_module</span><br><span class=\"line\">  --with-stream_ssl_preread_module   enable ngx_stream_ssl_preread_module</span><br><span class=\"line\">  --without-stream_limit_conn_module disable ngx_stream_limit_conn_module</span><br><span class=\"line\">  --without-stream_access_module     disable ngx_stream_access_module</span><br><span class=\"line\">  --without-stream_geo_module        disable ngx_stream_geo_module</span><br><span class=\"line\">  --without-stream_map_module        disable ngx_stream_map_module</span><br><span class=\"line\">  --without-stream_split_clients_module</span><br><span class=\"line\">                                     disable ngx_stream_split_clients_module</span><br><span class=\"line\">  --without-stream_return_module     disable ngx_stream_return_module</span><br><span class=\"line\">  --without-stream_set_module        disable ngx_stream_set_module</span><br><span class=\"line\">  --without-stream_upstream_hash_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_hash_module</span><br><span class=\"line\">  --without-stream_upstream_least_conn_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_least_conn_module</span><br><span class=\"line\">  --without-stream_upstream_random_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_random_module</span><br><span class=\"line\">  --without-stream_upstream_zone_module</span><br><span class=\"line\">                                     disable ngx_stream_upstream_zone_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-google_perftools_module     enable ngx_google_perftools_module</span><br><span class=\"line\">  --with-cpp_test_module             enable ngx_cpp_test_module</span><br><span class=\"line\"></span><br><span class=\"line\">  --add-module&#x3D;PATH                  enable external module</span><br><span class=\"line\">  --add-dynamic-module&#x3D;PATH          enable dynamic external module</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-compat                      dynamic modules compatibility</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-cc&#x3D;PATH                     set C compiler pathname</span><br><span class=\"line\">  --with-cpp&#x3D;PATH                    set C preprocessor pathname</span><br><span class=\"line\">  --with-cc-opt&#x3D;OPTIONS              set additional C compiler options</span><br><span class=\"line\">  --with-ld-opt&#x3D;OPTIONS              set additional linker options</span><br><span class=\"line\">  --with-cpu-opt&#x3D;CPU                 build for the specified CPU, valid values:</span><br><span class=\"line\">                                     pentium, pentiumpro, pentium3, pentium4,</span><br><span class=\"line\">                                     athlon, opteron, sparc32, sparc64, ppc64</span><br><span class=\"line\"></span><br><span class=\"line\">  --without-pcre                     disable PCRE library usage</span><br><span class=\"line\">  --with-pcre                        force PCRE library usage</span><br><span class=\"line\">  --with-pcre&#x3D;DIR                    set path to PCRE library sources</span><br><span class=\"line\">  --with-pcre-opt&#x3D;OPTIONS            set additional build options for PCRE</span><br><span class=\"line\">  --with-pcre-jit                    build PCRE with JIT compilation support</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-zlib&#x3D;DIR                    set path to zlib library sources</span><br><span class=\"line\">  --with-zlib-opt&#x3D;OPTIONS            set additional build options for zlib</span><br><span class=\"line\">  --with-zlib-asm&#x3D;CPU                use zlib assembler sources optimized</span><br><span class=\"line\">                                     for the specified CPU, valid values:</span><br><span class=\"line\">                                     pentium, pentiumpro</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-libatomic                   force libatomic_ops library usage</span><br><span class=\"line\">  --with-libatomic&#x3D;DIR               set path to libatomic_ops library sources</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-openssl&#x3D;DIR                 set path to OpenSSL library sources</span><br><span class=\"line\">  --with-openssl-opt&#x3D;OPTIONS         set additional build options for OpenSSL</span><br><span class=\"line\"></span><br><span class=\"line\">  --with-debug                       enable debug logging</span><br></pre></td></tr></table></figure>\n\n\n\n<p>下面是个人需要的配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;configure --with-libatomic --with-pcre --with-compat \\</span><br><span class=\"line\">  --with-stream --with-stream&#x3D;dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module   \\</span><br><span class=\"line\">  --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module \\</span><br><span class=\"line\">  --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module \\</span><br><span class=\"line\">  --with-http_auth_request_module    --with-http_random_index_module   --with-http_secure_link_module \\</span><br><span class=\"line\">  --with-http_degradation_module     --with-http_slice_module --with-http_stub_status_module \\</span><br><span class=\"line\">  --with-threads --with-file-aio --with-http_ssl_module --with-http_v2_module --with-http_realip_module \\</span><br><span class=\"line\">  --with-http_addition_module --with-http_xslt_module --with-http_xslt_module&#x3D;dynamic --with-http_image_filter_module --with-http_image_filter_module&#x3D;dynamic\\</span><br><span class=\"line\">  --prefix&#x3D;&#x2F;etc&#x2F;nginx \\</span><br><span class=\"line\">  --sbin-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx \\</span><br><span class=\"line\">  --modules-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;modules \\</span><br><span class=\"line\">  --conf-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx.conf \\</span><br><span class=\"line\">  --error-log-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;log \\</span><br><span class=\"line\">  --pid-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;run&#x2F;nginx.pid \\</span><br><span class=\"line\">  --lock-path&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx.lock</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"04-编译-amp-安装\"><a href=\"#04-编译-amp-安装\" class=\"headerlink\" title=\"04.编译&amp;安装\"></a>04.编译&amp;安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make make install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"05-加入systemctl\"><a href=\"#05-加入systemctl\" class=\"headerlink\" title=\"05.加入systemctl\"></a>05.加入systemctl</h4><p>进入 /usr/lib/systemd/system 目录下，编辑文件 nginx.service</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt; &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service &lt;&lt;EOF</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;nginx</span><br><span class=\"line\">After&#x3D;network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type&#x3D;forking</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx</span><br><span class=\"line\">ExecReload&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx -s reload</span><br><span class=\"line\">ExecStop&#x3D;&#x2F;etc&#x2F;nginx&#x2F;nginx -s quit</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\">EOF</span><br><span class=\"line\">systemctl daemon-reload </span><br><span class=\"line\">systemctl start nginx</span><br><span class=\"line\">systemctl enable nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"06-使用方式\"><a href=\"#06-使用方式\" class=\"headerlink\" title=\"06.使用方式\"></a>06.使用方式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start nginx # 启动nginx</span><br><span class=\"line\">systemctl status nginx # 查看nginx的命令</span><br><span class=\"line\">systemctl restart nginx # 重启nginx服务</span><br><span class=\"line\">systemctl stop nginx # 停止nginx服务</span><br><span class=\"line\">systemctl enable nginx # 将nginx设为开机启动</span><br><span class=\"line\">systemctl reload nginx # 重新加载配置</span><br></pre></td></tr></table></figure>"},{"title":"企业网络之部署DNS","cover":"/img/network-deploy/dns_title.png","subtitle":"企业网络之部署DNS","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"network-deploy-dns","_content":"### 01.通过yum源安装bind服务\n\n\n\n```shell\nyum -y install bind bind-utils bind-chroot\n```\n\n\n\n### 02.修改/etc/named.conf\n\n\n\n```shell\noptions {        \n\tlisten-on port 53 { any; }; // 此处要替换为any        \n\tlisten-on-v6 port 53 { ::1; };        \n\tdirectory       \"/var/named\"; // 域名目录        \n\tdump-file       \"/var/named/data/cache_dump.db\";        \n\tstatistics-file \"/var/named/data/named_stats.txt\";        \n\tmemstatistics-file \"/var/named/data/named_mem_stats.txt\";        \n\tsecroots-file   \"/var/named/data/named.secroots\";        \n\trecursing-file  \"/var/named/data/named.recursing\";        \n\tallow-query     { any; };  // 需要替换为any        \n\tforwarders      { 180.76.76.76; }; // 此处替换为一个公共的dns,比如百度或者阿里        \n\trecursion yes;        \n\tdnssec-enable no; // 需要和值为no,否则查询会很慢        \n\tdnssec-validation no; // 需要设置为no,否则查询会很慢        \n\tmanaged-keys-directory \"/var/named/dynamic\";        \n\tpid-file \"/run/named/named.pid\";        \n\tsession-keyfile \"/run/named/session.key\";        \n\tinclude \"/etc/crypto-policies/back-ends/bind.config\";};\n\tlogging {        \n\t\tchannel default_debug {\n        \tfile \"data/named.run\"; // 日志文件                \n        \tseverity dynamic;        \n        \t};\n     };\n     zone \".\" IN {        \n     \ttype hint;        \n     \tfile \"named.ca\";\n     };\n     include \"/etc/named.rfc1912.zones\";\n     include \"/etc/named.root.key\";\n```\n\n\n\n### 03.增加域名\n\n\n\n此时,需要在/etc/named.rfc1912.zones下,增加公司的域名.此处以hfdy.com为例\n\n```shell\nzone \"hfdy.com\" IN {     \n\ttype master;        \n\tfile \"hfdy.com.zone\";\n};\n```\n\n\n\n### 04.配置域名\n\n\n\n```\ntouch /var/named/hfdy.com.zonevim /var/named/hfdy.com.zone# 将下列内容复制进named.hfdy文件中\n```\n\n```\n$ORIGIN hfdy.com.$TTL 600        ; 10 minutes@    IN SOA dns.hfdy.com. dnsadmin.hfdy.com. (                                                2020060230  ;serial 每次更改都需要更改这个时间                                                10800    ;refresh 每三个小时刷新一次                                                900    ;每15分钟重试一次                                                604800      ;1周过期                                                86400    ;1 天更新                                               )                                             NS    dns.hfdy.com.$TTL  60   ; 1分钟过期\nwww            A     192.168.0.198\ndns            A     192.168.0.198\nredis          A     192.168.0.198\ngit            A     192.168.0.198\nhub            A     192.168.0.198\nfile           A     192.168.0.198\nsql            A     192.168.0.198\nes01           A     192.168.0.198\nftp            A     192.168.0.198\ncloud          A     192.168.0.198\npay            A     192.168.0.198\nauth           A     192.168.0.198\naccount        A     192.168.0.198\nmysql-dev      A     192.168.0.198\nmysql-models   A     192.168.0.198\ndoc            A     192.168.0.198\nsui            A     192.168.0.198\nsed            A     192.168.0.198\nnodes          A     192.168.0.198\nchess          A     192.168.0.198\nemail          A     192.168.0.198\nim             A     192.168.0.198\ngrpc           A     192.168.0.198\ngid            A     192.168.0.198\napi            A     192.168.0.198\njks            A     192.168.0.198\n```\n\n\n\n### 05.重启+开机启动\n\n\n\n```shell\nsudo systemctl restart named\nsudo systemctl enable named\n```","source":"_posts/network-deploy-dns.md","raw":"---\ntitle: 企业网络之部署DNS\ncover:  /img/network-deploy/dns_title.png\nsubtitle: 企业网络之部署DNS\ncategories: \"企业网络\"\ntags: \"企业网络\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: network-deploy-dns\n---\n### 01.通过yum源安装bind服务\n\n\n\n```shell\nyum -y install bind bind-utils bind-chroot\n```\n\n\n\n### 02.修改/etc/named.conf\n\n\n\n```shell\noptions {        \n\tlisten-on port 53 { any; }; // 此处要替换为any        \n\tlisten-on-v6 port 53 { ::1; };        \n\tdirectory       \"/var/named\"; // 域名目录        \n\tdump-file       \"/var/named/data/cache_dump.db\";        \n\tstatistics-file \"/var/named/data/named_stats.txt\";        \n\tmemstatistics-file \"/var/named/data/named_mem_stats.txt\";        \n\tsecroots-file   \"/var/named/data/named.secroots\";        \n\trecursing-file  \"/var/named/data/named.recursing\";        \n\tallow-query     { any; };  // 需要替换为any        \n\tforwarders      { 180.76.76.76; }; // 此处替换为一个公共的dns,比如百度或者阿里        \n\trecursion yes;        \n\tdnssec-enable no; // 需要和值为no,否则查询会很慢        \n\tdnssec-validation no; // 需要设置为no,否则查询会很慢        \n\tmanaged-keys-directory \"/var/named/dynamic\";        \n\tpid-file \"/run/named/named.pid\";        \n\tsession-keyfile \"/run/named/session.key\";        \n\tinclude \"/etc/crypto-policies/back-ends/bind.config\";};\n\tlogging {        \n\t\tchannel default_debug {\n        \tfile \"data/named.run\"; // 日志文件                \n        \tseverity dynamic;        \n        \t};\n     };\n     zone \".\" IN {        \n     \ttype hint;        \n     \tfile \"named.ca\";\n     };\n     include \"/etc/named.rfc1912.zones\";\n     include \"/etc/named.root.key\";\n```\n\n\n\n### 03.增加域名\n\n\n\n此时,需要在/etc/named.rfc1912.zones下,增加公司的域名.此处以hfdy.com为例\n\n```shell\nzone \"hfdy.com\" IN {     \n\ttype master;        \n\tfile \"hfdy.com.zone\";\n};\n```\n\n\n\n### 04.配置域名\n\n\n\n```\ntouch /var/named/hfdy.com.zonevim /var/named/hfdy.com.zone# 将下列内容复制进named.hfdy文件中\n```\n\n```\n$ORIGIN hfdy.com.$TTL 600        ; 10 minutes@    IN SOA dns.hfdy.com. dnsadmin.hfdy.com. (                                                2020060230  ;serial 每次更改都需要更改这个时间                                                10800    ;refresh 每三个小时刷新一次                                                900    ;每15分钟重试一次                                                604800      ;1周过期                                                86400    ;1 天更新                                               )                                             NS    dns.hfdy.com.$TTL  60   ; 1分钟过期\nwww            A     192.168.0.198\ndns            A     192.168.0.198\nredis          A     192.168.0.198\ngit            A     192.168.0.198\nhub            A     192.168.0.198\nfile           A     192.168.0.198\nsql            A     192.168.0.198\nes01           A     192.168.0.198\nftp            A     192.168.0.198\ncloud          A     192.168.0.198\npay            A     192.168.0.198\nauth           A     192.168.0.198\naccount        A     192.168.0.198\nmysql-dev      A     192.168.0.198\nmysql-models   A     192.168.0.198\ndoc            A     192.168.0.198\nsui            A     192.168.0.198\nsed            A     192.168.0.198\nnodes          A     192.168.0.198\nchess          A     192.168.0.198\nemail          A     192.168.0.198\nim             A     192.168.0.198\ngrpc           A     192.168.0.198\ngid            A     192.168.0.198\napi            A     192.168.0.198\njks            A     192.168.0.198\n```\n\n\n\n### 05.重启+开机启动\n\n\n\n```shell\nsudo systemctl restart named\nsudo systemctl enable named\n```","slug":"network-deploy-dns","published":1,"date":"2021-03-15T15:42:33.953Z","updated":"2021-03-15T16:33:24.578Z","_id":"ckmat2nhp000f34vl9m7vbzts","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"01-通过yum源安装bind服务\"><a href=\"#01-通过yum源安装bind服务\" class=\"headerlink\" title=\"01.通过yum源安装bind服务\"></a>01.通过yum源安装bind服务</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install bind bind-utils bind-chroot</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"02-修改-etc-named-conf\"><a href=\"#02-修改-etc-named-conf\" class=\"headerlink\" title=\"02.修改/etc/named.conf\"></a>02.修改/etc/named.conf</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options &#123;        </span><br><span class=\"line\">\tlisten-on port 53 &#123; any; &#125;; // 此处要替换为any        </span><br><span class=\"line\">\tlisten-on-v6 port 53 &#123; ::1; &#125;;        </span><br><span class=\"line\">\tdirectory       &quot;/var/named&quot;; // 域名目录        </span><br><span class=\"line\">\tdump-file       &quot;/var/named/data/cache_dump.db&quot;;        </span><br><span class=\"line\">\tstatistics-file &quot;/var/named/data/named_stats.txt&quot;;        </span><br><span class=\"line\">\tmemstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;        </span><br><span class=\"line\">\tsecroots-file   &quot;/var/named/data/named.secroots&quot;;        </span><br><span class=\"line\">\trecursing-file  &quot;/var/named/data/named.recursing&quot;;        </span><br><span class=\"line\">\tallow-query     &#123; any; &#125;;  // 需要替换为any        </span><br><span class=\"line\">\tforwarders      &#123; 180.76.76.76; &#125;; // 此处替换为一个公共的dns,比如百度或者阿里        </span><br><span class=\"line\">\trecursion yes;        </span><br><span class=\"line\">\tdnssec-enable no; // 需要和值为no,否则查询会很慢        </span><br><span class=\"line\">\tdnssec-validation no; // 需要设置为no,否则查询会很慢        </span><br><span class=\"line\">\tmanaged-keys-directory &quot;/var/named/dynamic&quot;;        </span><br><span class=\"line\">\tpid-file &quot;/run/named/named.pid&quot;;        </span><br><span class=\"line\">\tsession-keyfile &quot;/run/named/session.key&quot;;        </span><br><span class=\"line\">\tinclude &quot;/etc/crypto-policies/back-ends/bind.config&quot;;&#125;;</span><br><span class=\"line\">\tlogging &#123;        </span><br><span class=\"line\">\t\tchannel default_debug &#123;</span><br><span class=\"line\">        \tfile &quot;data/named.run&quot;; // 日志文件                </span><br><span class=\"line\">        \tseverity dynamic;        </span><br><span class=\"line\">        \t&#125;;</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">     zone &quot;.&quot; IN &#123;        </span><br><span class=\"line\">     \ttype hint;        </span><br><span class=\"line\">     \tfile &quot;named.ca&quot;;</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">     include &quot;/etc/named.rfc1912.zones&quot;;</span><br><span class=\"line\">     include &quot;/etc/named.root.key&quot;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"03-增加域名\"><a href=\"#03-增加域名\" class=\"headerlink\" title=\"03.增加域名\"></a>03.增加域名</h3><p>此时,需要在/etc/named.rfc1912.zones下,增加公司的域名.此处以hfdy.com为例</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zone &quot;hfdy.com&quot; IN &#123;     </span><br><span class=\"line\">\ttype master;        </span><br><span class=\"line\">\tfile &quot;hfdy.com.zone&quot;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"04-配置域名\"><a href=\"#04-配置域名\" class=\"headerlink\" title=\"04.配置域名\"></a>04.配置域名</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch &#x2F;var&#x2F;named&#x2F;hfdy.com.zonevim &#x2F;var&#x2F;named&#x2F;hfdy.com.zone# 将下列内容复制进named.hfdy文件中</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ORIGIN hfdy.com.$TTL 600        ; 10 minutes@    IN SOA dns.hfdy.com. dnsadmin.hfdy.com. (                                                2020060230  ;serial 每次更改都需要更改这个时间                                                10800    ;refresh 每三个小时刷新一次                                                900    ;每15分钟重试一次                                                604800      ;1周过期                                                86400    ;1 天更新                                               )                                             NS    dns.hfdy.com.$TTL  60   ; 1分钟过期</span><br><span class=\"line\">www            A     192.168.0.198</span><br><span class=\"line\">dns            A     192.168.0.198</span><br><span class=\"line\">redis          A     192.168.0.198</span><br><span class=\"line\">git            A     192.168.0.198</span><br><span class=\"line\">hub            A     192.168.0.198</span><br><span class=\"line\">file           A     192.168.0.198</span><br><span class=\"line\">sql            A     192.168.0.198</span><br><span class=\"line\">es01           A     192.168.0.198</span><br><span class=\"line\">ftp            A     192.168.0.198</span><br><span class=\"line\">cloud          A     192.168.0.198</span><br><span class=\"line\">pay            A     192.168.0.198</span><br><span class=\"line\">auth           A     192.168.0.198</span><br><span class=\"line\">account        A     192.168.0.198</span><br><span class=\"line\">mysql-dev      A     192.168.0.198</span><br><span class=\"line\">mysql-models   A     192.168.0.198</span><br><span class=\"line\">doc            A     192.168.0.198</span><br><span class=\"line\">sui            A     192.168.0.198</span><br><span class=\"line\">sed            A     192.168.0.198</span><br><span class=\"line\">nodes          A     192.168.0.198</span><br><span class=\"line\">chess          A     192.168.0.198</span><br><span class=\"line\">email          A     192.168.0.198</span><br><span class=\"line\">im             A     192.168.0.198</span><br><span class=\"line\">grpc           A     192.168.0.198</span><br><span class=\"line\">gid            A     192.168.0.198</span><br><span class=\"line\">api            A     192.168.0.198</span><br><span class=\"line\">jks            A     192.168.0.198</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"05-重启-开机启动\"><a href=\"#05-重启-开机启动\" class=\"headerlink\" title=\"05.重启+开机启动\"></a>05.重启+开机启动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart named</span><br><span class=\"line\">sudo systemctl enable named</span><br></pre></td></tr></table></figure>","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<h3 id=\"01-通过yum源安装bind服务\"><a href=\"#01-通过yum源安装bind服务\" class=\"headerlink\" title=\"01.通过yum源安装bind服务\"></a>01.通过yum源安装bind服务</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install bind bind-utils bind-chroot</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"02-修改-etc-named-conf\"><a href=\"#02-修改-etc-named-conf\" class=\"headerlink\" title=\"02.修改/etc/named.conf\"></a>02.修改/etc/named.conf</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options &#123;        </span><br><span class=\"line\">\tlisten-on port 53 &#123; any; &#125;; // 此处要替换为any        </span><br><span class=\"line\">\tlisten-on-v6 port 53 &#123; ::1; &#125;;        </span><br><span class=\"line\">\tdirectory       &quot;/var/named&quot;; // 域名目录        </span><br><span class=\"line\">\tdump-file       &quot;/var/named/data/cache_dump.db&quot;;        </span><br><span class=\"line\">\tstatistics-file &quot;/var/named/data/named_stats.txt&quot;;        </span><br><span class=\"line\">\tmemstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;        </span><br><span class=\"line\">\tsecroots-file   &quot;/var/named/data/named.secroots&quot;;        </span><br><span class=\"line\">\trecursing-file  &quot;/var/named/data/named.recursing&quot;;        </span><br><span class=\"line\">\tallow-query     &#123; any; &#125;;  // 需要替换为any        </span><br><span class=\"line\">\tforwarders      &#123; 180.76.76.76; &#125;; // 此处替换为一个公共的dns,比如百度或者阿里        </span><br><span class=\"line\">\trecursion yes;        </span><br><span class=\"line\">\tdnssec-enable no; // 需要和值为no,否则查询会很慢        </span><br><span class=\"line\">\tdnssec-validation no; // 需要设置为no,否则查询会很慢        </span><br><span class=\"line\">\tmanaged-keys-directory &quot;/var/named/dynamic&quot;;        </span><br><span class=\"line\">\tpid-file &quot;/run/named/named.pid&quot;;        </span><br><span class=\"line\">\tsession-keyfile &quot;/run/named/session.key&quot;;        </span><br><span class=\"line\">\tinclude &quot;/etc/crypto-policies/back-ends/bind.config&quot;;&#125;;</span><br><span class=\"line\">\tlogging &#123;        </span><br><span class=\"line\">\t\tchannel default_debug &#123;</span><br><span class=\"line\">        \tfile &quot;data/named.run&quot;; // 日志文件                </span><br><span class=\"line\">        \tseverity dynamic;        </span><br><span class=\"line\">        \t&#125;;</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">     zone &quot;.&quot; IN &#123;        </span><br><span class=\"line\">     \ttype hint;        </span><br><span class=\"line\">     \tfile &quot;named.ca&quot;;</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">     include &quot;/etc/named.rfc1912.zones&quot;;</span><br><span class=\"line\">     include &quot;/etc/named.root.key&quot;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"03-增加域名\"><a href=\"#03-增加域名\" class=\"headerlink\" title=\"03.增加域名\"></a>03.增加域名</h3><p>此时,需要在/etc/named.rfc1912.zones下,增加公司的域名.此处以hfdy.com为例</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zone &quot;hfdy.com&quot; IN &#123;     </span><br><span class=\"line\">\ttype master;        </span><br><span class=\"line\">\tfile &quot;hfdy.com.zone&quot;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"04-配置域名\"><a href=\"#04-配置域名\" class=\"headerlink\" title=\"04.配置域名\"></a>04.配置域名</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch &#x2F;var&#x2F;named&#x2F;hfdy.com.zonevim &#x2F;var&#x2F;named&#x2F;hfdy.com.zone# 将下列内容复制进named.hfdy文件中</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ORIGIN hfdy.com.$TTL 600        ; 10 minutes@    IN SOA dns.hfdy.com. dnsadmin.hfdy.com. (                                                2020060230  ;serial 每次更改都需要更改这个时间                                                10800    ;refresh 每三个小时刷新一次                                                900    ;每15分钟重试一次                                                604800      ;1周过期                                                86400    ;1 天更新                                               )                                             NS    dns.hfdy.com.$TTL  60   ; 1分钟过期</span><br><span class=\"line\">www            A     192.168.0.198</span><br><span class=\"line\">dns            A     192.168.0.198</span><br><span class=\"line\">redis          A     192.168.0.198</span><br><span class=\"line\">git            A     192.168.0.198</span><br><span class=\"line\">hub            A     192.168.0.198</span><br><span class=\"line\">file           A     192.168.0.198</span><br><span class=\"line\">sql            A     192.168.0.198</span><br><span class=\"line\">es01           A     192.168.0.198</span><br><span class=\"line\">ftp            A     192.168.0.198</span><br><span class=\"line\">cloud          A     192.168.0.198</span><br><span class=\"line\">pay            A     192.168.0.198</span><br><span class=\"line\">auth           A     192.168.0.198</span><br><span class=\"line\">account        A     192.168.0.198</span><br><span class=\"line\">mysql-dev      A     192.168.0.198</span><br><span class=\"line\">mysql-models   A     192.168.0.198</span><br><span class=\"line\">doc            A     192.168.0.198</span><br><span class=\"line\">sui            A     192.168.0.198</span><br><span class=\"line\">sed            A     192.168.0.198</span><br><span class=\"line\">nodes          A     192.168.0.198</span><br><span class=\"line\">chess          A     192.168.0.198</span><br><span class=\"line\">email          A     192.168.0.198</span><br><span class=\"line\">im             A     192.168.0.198</span><br><span class=\"line\">grpc           A     192.168.0.198</span><br><span class=\"line\">gid            A     192.168.0.198</span><br><span class=\"line\">api            A     192.168.0.198</span><br><span class=\"line\">jks            A     192.168.0.198</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"05-重启-开机启动\"><a href=\"#05-重启-开机启动\" class=\"headerlink\" title=\"05.重启+开机启动\"></a>05.重启+开机启动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart named</span><br><span class=\"line\">sudo systemctl enable named</span><br></pre></td></tr></table></figure>"},{"title":"企业网络之内网安全HTTPS","cover":"/img/network-deploy/https_title.png","subtitle":"企业网络之内网安全HTTPS","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"network-deploy-https","_content":"HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性\n\n\n\n### 1.为什么需要在内网部署安全的HTTPS\n\n\n\n(1) 保持正式环境与开发环境一致\n\n\n\n(2) HTTPS普及,倘若不使用可信任的HTTPS,需要做一些额外的配置,比如DOCKER,GRPC,K8S等一些列应用.\n\n\n\n(3) 方便一些语言做良好的开发环境,比如,GO中的gomod.\n\n\n\n### 2.如何在内网部署被客户端信任的HTTPS\n\n\n\n#### 01.Github项目\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert\n```\n\n\n\nmkcert 是一个使用GO语言编写的生成本地自签证书的小程序，具有跨平台，使用简单，支持多域名，自动信任CA等一系列方便的特性可供本地开发时快速创建HTTPS环境使用.\n\n\n\n#### 02.下载mkcert的可执行文件\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert/releases/tag/v1.4.3\n```\n\n\n\n根据对应的系统,下载对应的二进制文件.\n\n\n\n下载完毕之后,请将这二进制文件重命名为mkcert,并给mkcert可执行权限.\n\n\n\n#### 03.生成CA根证书\n\n\n\n在生成CA根证书之前,需要准备一台电脑.这台电脑的作用之一就是以后负责生成HTTPS证书的电脑.\n\n\n\n因为个人喜好的原因.自从出道以来,用的服务器都是centos.所以这个HTTPS的生成的计算机系统采用centos8\n\n\n\n```\nyum install nss-tools -y./mkcert -install\n```\n\n\n\n#### 04.保存CA根证书\n\n\n\n```\n# 查看根证书的目录\n[root@localhost https]# ./mkcert -CAROOT/root/.local/share/mkcert\n[root@localhost https]# ll \n/root/.local/share/mkcerttotal 8-r--------. 1 root root 2484 Dec 24 21:33 \nrootCA-key.pem-rw-r--r--. 1 root root 1688 Dec 24 21:33 rootCA.pem\n```\n\n\n\n将rootCA-key.pem rootCA.pem 保存妥善. 因为,每一台计算机都需要安装这个根证书.\n\n\n\n个人一般是将其放在网络共享盘和基于NGINX搭建的文件服务器里.\n\n\n\n因为,这样方便别人下载安装.\n\n\n\n#### 05.生成HTTPS证书\n\n\n\n```\n[root@localhost https]# ./mkcert www.hfdy.com *.hfdy.com\nCreated a new certificate valid for the following names 📜 - \"www.hfdy.com\" - \"*.hfdy.com\"Reminder: X.509 wildcards only go one level deep, so this won't match a.b.hfdy.com ℹ️ The certificate is at \"./www.hfdy.com+1.pem\" and the key at \"./www.hfdy.com+1-key.pem\" ✅It will expire on 24 March 2023 🗓\n[root@localhost https]# ls mkcert  \nwww.hfdy.com+1-key.pem  www.hfdy.com+1.pem\n[root@localhost https]# \n```\n\n\n\n## 3.WINDOWS安装CA根证书\n\n\n\n#### 01.下载mkcert\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert/releases/tag/v1.4.3\n```\n\n\n\n在上列地址中下载windows版本的可执行文件.并将mkcert-v1.4.3-windows-amd64.exe重命名为mkcert.exe\n\n\n\n#### 02.创建CA证书目录\n\n\n\n```\n# 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmdmkcert -install\n```\n\n\n\n#### 03.安装CA证书\n\n\n\n```\nE:\\code\\golang\\bin>mkcert -CAROOTC:\\Users\\Administrator\\AppData\\Local\\mkcertE:\\code\\golang\\bin>\n```\n\n\n\n将证书服务器的rootCA-key.pem和rootCA.pem复制到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem\n\n\n\n替换完毕后,再度执行下列命令\n\n\n\n```\nmkcert -install\n```\n\n\n\n至此,WINDOWS上的就配置完毕.\n\n\n\n### 4.LINUX安装CA根证书\n\n\n\n#### 01.下载mkcert\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert/releases/tag/v1.4.3\n```\n\n\n\n在上列地址中下载linux版本的文件.并将mkcert-v1.4.3-linux-amd64.exe重命名为mkcert. 并给与可执行权限.\n\n\n\n#### 02.创建CA证书目录\n\n```\nyum install nss-tools -y# 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmd\nmkcert -install\n```\n\n\n\n#### 03.安装CA证书\n\n\n\n```\n[root@localhost https]# ./mkcert -install\nThe local CA is already installed in the system trust store! 👍\nThe local CA is already installed in the Firefox and/or Chrome/Chromium trust store! 👍\n[root@localhost https]# ./mkcert -CAROOT/root/.local/share/mkcert\n```\n\n\n\n将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem\n\n\n\n替换完毕后,再度执行下列命令\n\n\n\n```\nmkcert -install\n```\n\n\n\n至此,LINUX上的就配置完毕.\n\n\n\n\n\n### 5.MAC安装CA根证书\n\n\n\n#### 01.下载mkcert\n\n\n\n```\nbrew install mkcertbrew install nss\n```\n\n\n\n#### 02.创建CA证书目录\n\n```\nmkcert -install\n```\n\n\n\n#### 03.安装CA证书\n\n\n\n```\nmkcert -installmkcert -CAROOT\n```\n\n\n\n将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem\n\n\n\n替换完毕后,再度执行下列命令\n\n\n\n```\nmkcert -install\n```\n\n\n\n至此,MAC上的就配置完毕.","source":"_posts/network-deploy-https.md","raw":"---\ntitle: 企业网络之内网安全HTTPS\ncover:  /img/network-deploy/https_title.png\nsubtitle: 企业网络之内网安全HTTPS\ncategories: \"企业网络\"\ntags: \"企业网络\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: network-deploy-https\n---\nHTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性\n\n\n\n### 1.为什么需要在内网部署安全的HTTPS\n\n\n\n(1) 保持正式环境与开发环境一致\n\n\n\n(2) HTTPS普及,倘若不使用可信任的HTTPS,需要做一些额外的配置,比如DOCKER,GRPC,K8S等一些列应用.\n\n\n\n(3) 方便一些语言做良好的开发环境,比如,GO中的gomod.\n\n\n\n### 2.如何在内网部署被客户端信任的HTTPS\n\n\n\n#### 01.Github项目\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert\n```\n\n\n\nmkcert 是一个使用GO语言编写的生成本地自签证书的小程序，具有跨平台，使用简单，支持多域名，自动信任CA等一系列方便的特性可供本地开发时快速创建HTTPS环境使用.\n\n\n\n#### 02.下载mkcert的可执行文件\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert/releases/tag/v1.4.3\n```\n\n\n\n根据对应的系统,下载对应的二进制文件.\n\n\n\n下载完毕之后,请将这二进制文件重命名为mkcert,并给mkcert可执行权限.\n\n\n\n#### 03.生成CA根证书\n\n\n\n在生成CA根证书之前,需要准备一台电脑.这台电脑的作用之一就是以后负责生成HTTPS证书的电脑.\n\n\n\n因为个人喜好的原因.自从出道以来,用的服务器都是centos.所以这个HTTPS的生成的计算机系统采用centos8\n\n\n\n```\nyum install nss-tools -y./mkcert -install\n```\n\n\n\n#### 04.保存CA根证书\n\n\n\n```\n# 查看根证书的目录\n[root@localhost https]# ./mkcert -CAROOT/root/.local/share/mkcert\n[root@localhost https]# ll \n/root/.local/share/mkcerttotal 8-r--------. 1 root root 2484 Dec 24 21:33 \nrootCA-key.pem-rw-r--r--. 1 root root 1688 Dec 24 21:33 rootCA.pem\n```\n\n\n\n将rootCA-key.pem rootCA.pem 保存妥善. 因为,每一台计算机都需要安装这个根证书.\n\n\n\n个人一般是将其放在网络共享盘和基于NGINX搭建的文件服务器里.\n\n\n\n因为,这样方便别人下载安装.\n\n\n\n#### 05.生成HTTPS证书\n\n\n\n```\n[root@localhost https]# ./mkcert www.hfdy.com *.hfdy.com\nCreated a new certificate valid for the following names 📜 - \"www.hfdy.com\" - \"*.hfdy.com\"Reminder: X.509 wildcards only go one level deep, so this won't match a.b.hfdy.com ℹ️ The certificate is at \"./www.hfdy.com+1.pem\" and the key at \"./www.hfdy.com+1-key.pem\" ✅It will expire on 24 March 2023 🗓\n[root@localhost https]# ls mkcert  \nwww.hfdy.com+1-key.pem  www.hfdy.com+1.pem\n[root@localhost https]# \n```\n\n\n\n## 3.WINDOWS安装CA根证书\n\n\n\n#### 01.下载mkcert\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert/releases/tag/v1.4.3\n```\n\n\n\n在上列地址中下载windows版本的可执行文件.并将mkcert-v1.4.3-windows-amd64.exe重命名为mkcert.exe\n\n\n\n#### 02.创建CA证书目录\n\n\n\n```\n# 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmdmkcert -install\n```\n\n\n\n#### 03.安装CA证书\n\n\n\n```\nE:\\code\\golang\\bin>mkcert -CAROOTC:\\Users\\Administrator\\AppData\\Local\\mkcertE:\\code\\golang\\bin>\n```\n\n\n\n将证书服务器的rootCA-key.pem和rootCA.pem复制到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem\n\n\n\n替换完毕后,再度执行下列命令\n\n\n\n```\nmkcert -install\n```\n\n\n\n至此,WINDOWS上的就配置完毕.\n\n\n\n### 4.LINUX安装CA根证书\n\n\n\n#### 01.下载mkcert\n\n\n\n```\nhttps://github.com/FiloSottile/mkcert/releases/tag/v1.4.3\n```\n\n\n\n在上列地址中下载linux版本的文件.并将mkcert-v1.4.3-linux-amd64.exe重命名为mkcert. 并给与可执行权限.\n\n\n\n#### 02.创建CA证书目录\n\n```\nyum install nss-tools -y# 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmd\nmkcert -install\n```\n\n\n\n#### 03.安装CA证书\n\n\n\n```\n[root@localhost https]# ./mkcert -install\nThe local CA is already installed in the system trust store! 👍\nThe local CA is already installed in the Firefox and/or Chrome/Chromium trust store! 👍\n[root@localhost https]# ./mkcert -CAROOT/root/.local/share/mkcert\n```\n\n\n\n将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem\n\n\n\n替换完毕后,再度执行下列命令\n\n\n\n```\nmkcert -install\n```\n\n\n\n至此,LINUX上的就配置完毕.\n\n\n\n\n\n### 5.MAC安装CA根证书\n\n\n\n#### 01.下载mkcert\n\n\n\n```\nbrew install mkcertbrew install nss\n```\n\n\n\n#### 02.创建CA证书目录\n\n```\nmkcert -install\n```\n\n\n\n#### 03.安装CA证书\n\n\n\n```\nmkcert -installmkcert -CAROOT\n```\n\n\n\n将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem\n\n\n\n替换完毕后,再度执行下列命令\n\n\n\n```\nmkcert -install\n```\n\n\n\n至此,MAC上的就配置完毕.","slug":"network-deploy-https","published":1,"date":"2021-03-15T15:42:33.953Z","updated":"2021-03-15T16:34:27.016Z","_id":"ckmat3ac9000i34vleol63ed4","comments":1,"layout":"post","photos":[],"link":"","content":"<p>HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性</p>\n<h3 id=\"1-为什么需要在内网部署安全的HTTPS\"><a href=\"#1-为什么需要在内网部署安全的HTTPS\" class=\"headerlink\" title=\"1.为什么需要在内网部署安全的HTTPS\"></a>1.为什么需要在内网部署安全的HTTPS</h3><p>(1) 保持正式环境与开发环境一致</p>\n<p>(2) HTTPS普及,倘若不使用可信任的HTTPS,需要做一些额外的配置,比如DOCKER,GRPC,K8S等一些列应用.</p>\n<p>(3) 方便一些语言做良好的开发环境,比如,GO中的gomod.</p>\n<h3 id=\"2-如何在内网部署被客户端信任的HTTPS\"><a href=\"#2-如何在内网部署被客户端信任的HTTPS\" class=\"headerlink\" title=\"2.如何在内网部署被客户端信任的HTTPS\"></a>2.如何在内网部署被客户端信任的HTTPS</h3><h4 id=\"01-Github项目\"><a href=\"#01-Github项目\" class=\"headerlink\" title=\"01.Github项目\"></a>01.Github项目</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert</span><br></pre></td></tr></table></figure>\n\n\n\n<p>mkcert 是一个使用GO语言编写的生成本地自签证书的小程序，具有跨平台，使用简单，支持多域名，自动信任CA等一系列方便的特性可供本地开发时快速创建HTTPS环境使用.</p>\n<h4 id=\"02-下载mkcert的可执行文件\"><a href=\"#02-下载mkcert的可执行文件\" class=\"headerlink\" title=\"02.下载mkcert的可执行文件\"></a>02.下载mkcert的可执行文件</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert&#x2F;releases&#x2F;tag&#x2F;v1.4.3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>根据对应的系统,下载对应的二进制文件.</p>\n<p>下载完毕之后,请将这二进制文件重命名为mkcert,并给mkcert可执行权限.</p>\n<h4 id=\"03-生成CA根证书\"><a href=\"#03-生成CA根证书\" class=\"headerlink\" title=\"03.生成CA根证书\"></a>03.生成CA根证书</h4><p>在生成CA根证书之前,需要准备一台电脑.这台电脑的作用之一就是以后负责生成HTTPS证书的电脑.</p>\n<p>因为个人喜好的原因.自从出道以来,用的服务器都是centos.所以这个HTTPS的生成的计算机系统采用centos8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install nss-tools -y.&#x2F;mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"04-保存CA根证书\"><a href=\"#04-保存CA根证书\" class=\"headerlink\" title=\"04.保存CA根证书\"></a>04.保存CA根证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看根证书的目录</span><br><span class=\"line\">[root@localhost https]# .&#x2F;mkcert -CAROOT&#x2F;root&#x2F;.local&#x2F;share&#x2F;mkcert</span><br><span class=\"line\">[root@localhost https]# ll </span><br><span class=\"line\">&#x2F;root&#x2F;.local&#x2F;share&#x2F;mkcerttotal 8-r--------. 1 root root 2484 Dec 24 21:33 </span><br><span class=\"line\">rootCA-key.pem-rw-r--r--. 1 root root 1688 Dec 24 21:33 rootCA.pem</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将rootCA-key.pem rootCA.pem 保存妥善. 因为,每一台计算机都需要安装这个根证书.</p>\n<p>个人一般是将其放在网络共享盘和基于NGINX搭建的文件服务器里.</p>\n<p>因为,这样方便别人下载安装.</p>\n<h4 id=\"05-生成HTTPS证书\"><a href=\"#05-生成HTTPS证书\" class=\"headerlink\" title=\"05.生成HTTPS证书\"></a>05.生成HTTPS证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost https]# .&#x2F;mkcert www.hfdy.com *.hfdy.com</span><br><span class=\"line\">Created a new certificate valid for the following names 📜 - &quot;www.hfdy.com&quot; - &quot;*.hfdy.com&quot;Reminder: X.509 wildcards only go one level deep, so this won&#39;t match a.b.hfdy.com ℹ️ The certificate is at &quot;.&#x2F;www.hfdy.com+1.pem&quot; and the key at &quot;.&#x2F;www.hfdy.com+1-key.pem&quot; ✅It will expire on 24 March 2023 🗓</span><br><span class=\"line\">[root@localhost https]# ls mkcert  </span><br><span class=\"line\">www.hfdy.com+1-key.pem  www.hfdy.com+1.pem</span><br><span class=\"line\">[root@localhost https]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"3-WINDOWS安装CA根证书\"><a href=\"#3-WINDOWS安装CA根证书\" class=\"headerlink\" title=\"3.WINDOWS安装CA根证书\"></a>3.WINDOWS安装CA根证书</h2><h4 id=\"01-下载mkcert\"><a href=\"#01-下载mkcert\" class=\"headerlink\" title=\"01.下载mkcert\"></a>01.下载mkcert</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert&#x2F;releases&#x2F;tag&#x2F;v1.4.3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>在上列地址中下载windows版本的可执行文件.并将mkcert-v1.4.3-windows-amd64.exe重命名为mkcert.exe</p>\n<h4 id=\"02-创建CA证书目录\"><a href=\"#02-创建CA证书目录\" class=\"headerlink\" title=\"02.创建CA证书目录\"></a>02.创建CA证书目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmdmkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-安装CA证书\"><a href=\"#03-安装CA证书\" class=\"headerlink\" title=\"03.安装CA证书\"></a>03.安装CA证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E:\\code\\golang\\bin&gt;mkcert -CAROOTC:\\Users\\Administrator\\AppData\\Local\\mkcertE:\\code\\golang\\bin&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将证书服务器的rootCA-key.pem和rootCA.pem复制到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem</p>\n<p>替换完毕后,再度执行下列命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<p>至此,WINDOWS上的就配置完毕.</p>\n<h3 id=\"4-LINUX安装CA根证书\"><a href=\"#4-LINUX安装CA根证书\" class=\"headerlink\" title=\"4.LINUX安装CA根证书\"></a>4.LINUX安装CA根证书</h3><h4 id=\"01-下载mkcert-1\"><a href=\"#01-下载mkcert-1\" class=\"headerlink\" title=\"01.下载mkcert\"></a>01.下载mkcert</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert&#x2F;releases&#x2F;tag&#x2F;v1.4.3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>在上列地址中下载linux版本的文件.并将mkcert-v1.4.3-linux-amd64.exe重命名为mkcert. 并给与可执行权限.</p>\n<h4 id=\"02-创建CA证书目录-1\"><a href=\"#02-创建CA证书目录-1\" class=\"headerlink\" title=\"02.创建CA证书目录\"></a>02.创建CA证书目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install nss-tools -y# 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmd</span><br><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-安装CA证书-1\"><a href=\"#03-安装CA证书-1\" class=\"headerlink\" title=\"03.安装CA证书\"></a>03.安装CA证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost https]# .&#x2F;mkcert -install</span><br><span class=\"line\">The local CA is already installed in the system trust store! 👍</span><br><span class=\"line\">The local CA is already installed in the Firefox and&#x2F;or Chrome&#x2F;Chromium trust store! 👍</span><br><span class=\"line\">[root@localhost https]# .&#x2F;mkcert -CAROOT&#x2F;root&#x2F;.local&#x2F;share&#x2F;mkcert</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem</p>\n<p>替换完毕后,再度执行下列命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<p>至此,LINUX上的就配置完毕.</p>\n<h3 id=\"5-MAC安装CA根证书\"><a href=\"#5-MAC安装CA根证书\" class=\"headerlink\" title=\"5.MAC安装CA根证书\"></a>5.MAC安装CA根证书</h3><h4 id=\"01-下载mkcert-2\"><a href=\"#01-下载mkcert-2\" class=\"headerlink\" title=\"01.下载mkcert\"></a>01.下载mkcert</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install mkcertbrew install nss</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"02-创建CA证书目录-2\"><a href=\"#02-创建CA证书目录-2\" class=\"headerlink\" title=\"02.创建CA证书目录\"></a>02.创建CA证书目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-安装CA证书-2\"><a href=\"#03-安装CA证书-2\" class=\"headerlink\" title=\"03.安装CA证书\"></a>03.安装CA证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -installmkcert -CAROOT</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem</p>\n<p>替换完毕后,再度执行下列命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<p>至此,MAC上的就配置完毕.</p>\n","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性</p>\n<h3 id=\"1-为什么需要在内网部署安全的HTTPS\"><a href=\"#1-为什么需要在内网部署安全的HTTPS\" class=\"headerlink\" title=\"1.为什么需要在内网部署安全的HTTPS\"></a>1.为什么需要在内网部署安全的HTTPS</h3><p>(1) 保持正式环境与开发环境一致</p>\n<p>(2) HTTPS普及,倘若不使用可信任的HTTPS,需要做一些额外的配置,比如DOCKER,GRPC,K8S等一些列应用.</p>\n<p>(3) 方便一些语言做良好的开发环境,比如,GO中的gomod.</p>\n<h3 id=\"2-如何在内网部署被客户端信任的HTTPS\"><a href=\"#2-如何在内网部署被客户端信任的HTTPS\" class=\"headerlink\" title=\"2.如何在内网部署被客户端信任的HTTPS\"></a>2.如何在内网部署被客户端信任的HTTPS</h3><h4 id=\"01-Github项目\"><a href=\"#01-Github项目\" class=\"headerlink\" title=\"01.Github项目\"></a>01.Github项目</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert</span><br></pre></td></tr></table></figure>\n\n\n\n<p>mkcert 是一个使用GO语言编写的生成本地自签证书的小程序，具有跨平台，使用简单，支持多域名，自动信任CA等一系列方便的特性可供本地开发时快速创建HTTPS环境使用.</p>\n<h4 id=\"02-下载mkcert的可执行文件\"><a href=\"#02-下载mkcert的可执行文件\" class=\"headerlink\" title=\"02.下载mkcert的可执行文件\"></a>02.下载mkcert的可执行文件</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert&#x2F;releases&#x2F;tag&#x2F;v1.4.3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>根据对应的系统,下载对应的二进制文件.</p>\n<p>下载完毕之后,请将这二进制文件重命名为mkcert,并给mkcert可执行权限.</p>\n<h4 id=\"03-生成CA根证书\"><a href=\"#03-生成CA根证书\" class=\"headerlink\" title=\"03.生成CA根证书\"></a>03.生成CA根证书</h4><p>在生成CA根证书之前,需要准备一台电脑.这台电脑的作用之一就是以后负责生成HTTPS证书的电脑.</p>\n<p>因为个人喜好的原因.自从出道以来,用的服务器都是centos.所以这个HTTPS的生成的计算机系统采用centos8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install nss-tools -y.&#x2F;mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"04-保存CA根证书\"><a href=\"#04-保存CA根证书\" class=\"headerlink\" title=\"04.保存CA根证书\"></a>04.保存CA根证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看根证书的目录</span><br><span class=\"line\">[root@localhost https]# .&#x2F;mkcert -CAROOT&#x2F;root&#x2F;.local&#x2F;share&#x2F;mkcert</span><br><span class=\"line\">[root@localhost https]# ll </span><br><span class=\"line\">&#x2F;root&#x2F;.local&#x2F;share&#x2F;mkcerttotal 8-r--------. 1 root root 2484 Dec 24 21:33 </span><br><span class=\"line\">rootCA-key.pem-rw-r--r--. 1 root root 1688 Dec 24 21:33 rootCA.pem</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将rootCA-key.pem rootCA.pem 保存妥善. 因为,每一台计算机都需要安装这个根证书.</p>\n<p>个人一般是将其放在网络共享盘和基于NGINX搭建的文件服务器里.</p>\n<p>因为,这样方便别人下载安装.</p>\n<h4 id=\"05-生成HTTPS证书\"><a href=\"#05-生成HTTPS证书\" class=\"headerlink\" title=\"05.生成HTTPS证书\"></a>05.生成HTTPS证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost https]# .&#x2F;mkcert www.hfdy.com *.hfdy.com</span><br><span class=\"line\">Created a new certificate valid for the following names 📜 - &quot;www.hfdy.com&quot; - &quot;*.hfdy.com&quot;Reminder: X.509 wildcards only go one level deep, so this won&#39;t match a.b.hfdy.com ℹ️ The certificate is at &quot;.&#x2F;www.hfdy.com+1.pem&quot; and the key at &quot;.&#x2F;www.hfdy.com+1-key.pem&quot; ✅It will expire on 24 March 2023 🗓</span><br><span class=\"line\">[root@localhost https]# ls mkcert  </span><br><span class=\"line\">www.hfdy.com+1-key.pem  www.hfdy.com+1.pem</span><br><span class=\"line\">[root@localhost https]# </span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"3-WINDOWS安装CA根证书\"><a href=\"#3-WINDOWS安装CA根证书\" class=\"headerlink\" title=\"3.WINDOWS安装CA根证书\"></a>3.WINDOWS安装CA根证书</h2><h4 id=\"01-下载mkcert\"><a href=\"#01-下载mkcert\" class=\"headerlink\" title=\"01.下载mkcert\"></a>01.下载mkcert</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert&#x2F;releases&#x2F;tag&#x2F;v1.4.3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>在上列地址中下载windows版本的可执行文件.并将mkcert-v1.4.3-windows-amd64.exe重命名为mkcert.exe</p>\n<h4 id=\"02-创建CA证书目录\"><a href=\"#02-创建CA证书目录\" class=\"headerlink\" title=\"02.创建CA证书目录\"></a>02.创建CA证书目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmdmkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-安装CA证书\"><a href=\"#03-安装CA证书\" class=\"headerlink\" title=\"03.安装CA证书\"></a>03.安装CA证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E:\\code\\golang\\bin&gt;mkcert -CAROOTC:\\Users\\Administrator\\AppData\\Local\\mkcertE:\\code\\golang\\bin&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将证书服务器的rootCA-key.pem和rootCA.pem复制到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem</p>\n<p>替换完毕后,再度执行下列命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<p>至此,WINDOWS上的就配置完毕.</p>\n<h3 id=\"4-LINUX安装CA根证书\"><a href=\"#4-LINUX安装CA根证书\" class=\"headerlink\" title=\"4.LINUX安装CA根证书\"></a>4.LINUX安装CA根证书</h3><h4 id=\"01-下载mkcert-1\"><a href=\"#01-下载mkcert-1\" class=\"headerlink\" title=\"01.下载mkcert\"></a>01.下载mkcert</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;FiloSottile&#x2F;mkcert&#x2F;releases&#x2F;tag&#x2F;v1.4.3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>在上列地址中下载linux版本的文件.并将mkcert-v1.4.3-linux-amd64.exe重命名为mkcert. 并给与可执行权限.</p>\n<h4 id=\"02-创建CA证书目录-1\"><a href=\"#02-创建CA证书目录-1\" class=\"headerlink\" title=\"02.创建CA证书目录\"></a>02.创建CA证书目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install nss-tools -y# 执行下列命令,不能用powershell打开.# 执行下列命令需要有管理员权限的cmd</span><br><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-安装CA证书-1\"><a href=\"#03-安装CA证书-1\" class=\"headerlink\" title=\"03.安装CA证书\"></a>03.安装CA证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost https]# .&#x2F;mkcert -install</span><br><span class=\"line\">The local CA is already installed in the system trust store! 👍</span><br><span class=\"line\">The local CA is already installed in the Firefox and&#x2F;or Chrome&#x2F;Chromium trust store! 👍</span><br><span class=\"line\">[root@localhost https]# .&#x2F;mkcert -CAROOT&#x2F;root&#x2F;.local&#x2F;share&#x2F;mkcert</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem</p>\n<p>替换完毕后,再度执行下列命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<p>至此,LINUX上的就配置完毕.</p>\n<h3 id=\"5-MAC安装CA根证书\"><a href=\"#5-MAC安装CA根证书\" class=\"headerlink\" title=\"5.MAC安装CA根证书\"></a>5.MAC安装CA根证书</h3><h4 id=\"01-下载mkcert-2\"><a href=\"#01-下载mkcert-2\" class=\"headerlink\" title=\"01.下载mkcert\"></a>01.下载mkcert</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install mkcertbrew install nss</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"02-创建CA证书目录-2\"><a href=\"#02-创建CA证书目录-2\" class=\"headerlink\" title=\"02.创建CA证书目录\"></a>02.创建CA证书目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-安装CA证书-2\"><a href=\"#03-安装CA证书-2\" class=\"headerlink\" title=\"03.安装CA证书\"></a>03.安装CA证书</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -installmkcert -CAROOT</span><br></pre></td></tr></table></figure>\n\n\n\n<p>将证书服务器的rootCA-key.pem和rootCA.pem复制或者下载到本地. 并且用这两个证书替换掉mkert -CAROOT下的rootCA-key.pem和rootCA.pem</p>\n<p>替换完毕后,再度执行下列命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkcert -install</span><br></pre></td></tr></table></figure>\n\n\n\n<p>至此,MAC上的就配置完毕.</p>\n"},{"title":"企业网络之部署DOCKER","cover":"/img/network-deploy/docker_title.png","subtitle":"企业网络之部署DOCKER","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"network-deploy-docker","_content":"Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的LINUX或WINDOWS机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口\n\n\n\n### 01.安装docker-ce\n\n\n\n```\ncurl https://download.docker.com/linux/centos/docker-ce.repo -o /etc/yum.repos.d/docker-ce.repo\nyum install https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm -y\nyum install docker-ce docker-ce-cli -y\nsystemctl start docker\nsystemctl enable docker\n```\n\n\n\n### 02.安装docker-compose\n\n\n\n```\ncurl -L \"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\nln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\ndocker-compose --version\n```\n\n\n\n#### 03.配置daemon.json\n\n\n\n```\n\n\ncat > /etc/docker/daemon.json <<EOF\n{\n    \"exec-opts\": [\"native.cgroupdriver=systemd\"],\n    \"log-driver\": \"json-file\",\n    \"log-opts\": {\n    \"max-size\": \"100m\"\n    },\n    \"insecure-registries\":[\"192.168.42.128\"],\n    \"storage-driver\": \"overlay2\",\n    \"registry-mirrors\":[\n        \"http://hub-mirror.c.163.com\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://registry.docker-cn.com\"\n    ]\n}\nEOF\nsystemctl daemon-reload \nsystemctl restart docker\nsystemctl enable docker\n```\n\n","source":"_posts/network-deploy-docker.md","raw":"---\ntitle: 企业网络之部署DOCKER\ncover:  /img/network-deploy/docker_title.png\nsubtitle: 企业网络之部署DOCKER\ncategories: \"企业网络\"\ntags: \"企业网络\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: network-deploy-docker\n\n---\nDocker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的LINUX或WINDOWS机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口\n\n\n\n### 01.安装docker-ce\n\n\n\n```\ncurl https://download.docker.com/linux/centos/docker-ce.repo -o /etc/yum.repos.d/docker-ce.repo\nyum install https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm -y\nyum install docker-ce docker-ce-cli -y\nsystemctl start docker\nsystemctl enable docker\n```\n\n\n\n### 02.安装docker-compose\n\n\n\n```\ncurl -L \"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\nln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\ndocker-compose --version\n```\n\n\n\n#### 03.配置daemon.json\n\n\n\n```\n\n\ncat > /etc/docker/daemon.json <<EOF\n{\n    \"exec-opts\": [\"native.cgroupdriver=systemd\"],\n    \"log-driver\": \"json-file\",\n    \"log-opts\": {\n    \"max-size\": \"100m\"\n    },\n    \"insecure-registries\":[\"192.168.42.128\"],\n    \"storage-driver\": \"overlay2\",\n    \"registry-mirrors\":[\n        \"http://hub-mirror.c.163.com\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://registry.docker-cn.com\"\n    ]\n}\nEOF\nsystemctl daemon-reload \nsystemctl restart docker\nsystemctl enable docker\n```\n\n","slug":"network-deploy-docker","published":1,"date":"2021-03-15T16:41:28.723Z","updated":"2021-03-15T16:44:42.862Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckmavtb1k0000ywvl6sng36ko","content":"<p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的LINUX或WINDOWS机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口</p>\n<h3 id=\"01-安装docker-ce\"><a href=\"#01-安装docker-ce\" class=\"headerlink\" title=\"01.安装docker-ce\"></a>01.安装docker-ce</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo -o &#x2F;etc&#x2F;yum.repos.d&#x2F;docker-ce.repo</span><br><span class=\"line\">yum install https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;fedora&#x2F;30&#x2F;x86_64&#x2F;stable&#x2F;Packages&#x2F;containerd.io-1.2.6-3.3.fc30.x86_64.rpm -y</span><br><span class=\"line\">yum install docker-ce docker-ce-cli -y</span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"02-安装docker-compose\"><a href=\"#02-安装docker-compose\" class=\"headerlink\" title=\"02.安装docker-compose\"></a>02.安装docker-compose</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L &quot;https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;compose&#x2F;releases&#x2F;download&#x2F;1.25.5&#x2F;docker-compose-$(uname -s)-$(uname -m)&quot; -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class=\"line\">chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class=\"line\">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose &#x2F;usr&#x2F;bin&#x2F;docker-compose</span><br><span class=\"line\">docker-compose --version</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-配置daemon-json\"><a href=\"#03-配置daemon-json\" class=\"headerlink\" title=\"03.配置daemon.json\"></a>03.配置daemon.json</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt; &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;EOF</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;exec-opts&quot;: [&quot;native.cgroupdriver&#x3D;systemd&quot;],</span><br><span class=\"line\">    &quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">    &quot;log-opts&quot;: &#123;</span><br><span class=\"line\">    &quot;max-size&quot;: &quot;100m&quot;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &quot;insecure-registries&quot;:[&quot;192.168.42.128&quot;],</span><br><span class=\"line\">    &quot;storage-driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">    &quot;registry-mirrors&quot;:[</span><br><span class=\"line\">        &quot;http:&#x2F;&#x2F;hub-mirror.c.163.com&quot;,</span><br><span class=\"line\">        &quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;,</span><br><span class=\"line\">        &quot;https:&#x2F;&#x2F;registry.docker-cn.com&quot;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">systemctl daemon-reload </span><br><span class=\"line\">systemctl restart docker</span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的LINUX或WINDOWS机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口</p>\n<h3 id=\"01-安装docker-ce\"><a href=\"#01-安装docker-ce\" class=\"headerlink\" title=\"01.安装docker-ce\"></a>01.安装docker-ce</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo -o &#x2F;etc&#x2F;yum.repos.d&#x2F;docker-ce.repo</span><br><span class=\"line\">yum install https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;fedora&#x2F;30&#x2F;x86_64&#x2F;stable&#x2F;Packages&#x2F;containerd.io-1.2.6-3.3.fc30.x86_64.rpm -y</span><br><span class=\"line\">yum install docker-ce docker-ce-cli -y</span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"02-安装docker-compose\"><a href=\"#02-安装docker-compose\" class=\"headerlink\" title=\"02.安装docker-compose\"></a>02.安装docker-compose</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L &quot;https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;compose&#x2F;releases&#x2F;download&#x2F;1.25.5&#x2F;docker-compose-$(uname -s)-$(uname -m)&quot; -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class=\"line\">chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class=\"line\">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose &#x2F;usr&#x2F;bin&#x2F;docker-compose</span><br><span class=\"line\">docker-compose --version</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-配置daemon-json\"><a href=\"#03-配置daemon-json\" class=\"headerlink\" title=\"03.配置daemon.json\"></a>03.配置daemon.json</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt; &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;EOF</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;exec-opts&quot;: [&quot;native.cgroupdriver&#x3D;systemd&quot;],</span><br><span class=\"line\">    &quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">    &quot;log-opts&quot;: &#123;</span><br><span class=\"line\">    &quot;max-size&quot;: &quot;100m&quot;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &quot;insecure-registries&quot;:[&quot;192.168.42.128&quot;],</span><br><span class=\"line\">    &quot;storage-driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">    &quot;registry-mirrors&quot;:[</span><br><span class=\"line\">        &quot;http:&#x2F;&#x2F;hub-mirror.c.163.com&quot;,</span><br><span class=\"line\">        &quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;,</span><br><span class=\"line\">        &quot;https:&#x2F;&#x2F;registry.docker-cn.com&quot;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">systemctl daemon-reload </span><br><span class=\"line\">systemctl restart docker</span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n"},{"title":"企业网络之部署GOGS服务","cover":"/img/network-deploy/git_title.png","subtitle":"企业网络之部署GOGS服务","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"images","_content":"\n\n在进行部署之前,已经部署好了下面的这些环境\n\n\n\n[企业网络之局域网安全HTTPS](https://yuansudong.gitee.io/2021/network-deploy-https/index.html)\n\n[企业网络之部署DOCKER](https://yuansudong.gitee.io/2021/network-deploy-docker/index.html)\n\n[企业网络之部署DNS服务](https://yuansudong.gitee.io/2021/network-deploy-dns/index.html)\n\n[企业网络之部署NGINX](https://yuansudong.gitee.io/2021/network-deploy-nginx/index.html)\n\n\n\n#### 01.创建GIT用户,并将其加入docker组\n\n\n\n```\n\n# 创建git用户\nsudo useradd -s /bin/bash -d /home/git -m git\n# 增加git用户入docker组\nsudo gpasswd -a git docker\n# 查看用户d\nid git\nuid=1000(git) gid=1000(git) groups=1000(git),984(docker)\n```\n\n\n\n#### 02.登录GIT,部署服务\n\n\n\n```\nsu git\nmkdir docker\ncat > docker/docker-compose.yml <<EOF\nversion: \"3.8\"\nservices:\n  gogs.hfdy.net:\n    image: gogs/gogs:latest\n    restart: always\n    container_name: gogs.hfdy.net\n    ports:\n         - \"10022:22\"\n         - \"3000:3000\"\n    environment:\n         - PUID=1000  # 此处的PUID 要和id git 命令的相同\n         - PGID=1000  # 此处的PGID 要和id git 命令的相同\n    volumes:\n         - /home/git:/data\n         \nEOF\n\ncd docker && docker-compose up -d --build\n```\n\n\n\n#### 03.配置NGINX反向代理\n\n\n\n```\ncat > /etc/nginx/hosts/gogs.hfdy.com.conf <<EOF\nupstream backend.gogs  {\n    server 127.0.0.1:3000 max_fails=0 fail_timeout=0s; #api 服务器 失败10次断60秒\n    # server 127.0.0.1:8001 max_fails=10 fail_timeout=60s; #api 服务器 失败10次断60秒\n    # server 127.0.0.1:8002 backup; # api 服务器 表示服务器为备用\n    keepalive 64;   # 连接池的数量,不易太多\n}\nserver {\n    listen 80; #监听端口\n    server_name gogs.hfdy.com; #域名\n    rewrite ^(.*)$  https://$host$1 permanent; # 将http强制转换为https\n}\nserver {\n    listen       443 ssl ;\n    server_name  gogs.hfdy.com;\n    ssl_certificate /etc/nginx/cert/hfdy.pem;\n    ssl_certificate_key /etc/nginx/cert/hfdy-key.pem; \n    add_header Strict-Transport-Security \"max-age=63072000; includeSubdomains; preload\";\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 1440m;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers on;\n    ssl_ciphers \"ECDHE-ECDSA-CHACHA20-POLY1305 ECDHE-RSA-CHACHA20-POLY1305 ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-RSA-AES128-GCM-SHA256 ECDHE-ECDSA-AES256-GCM-SHA384 ECDHE-RSA-AES256-GCM-SHA384 DHE-RSA-AES128-GCM-SHA256 DHE-RSA-AES256-GCM-SHA384 ECDHE-ECDSA-AES128-SHA256 ECDHE-RSA-AES128-SHA256 ECDHE-ECDSA-AES128-SHA ECDHE-RSA-AES256-SHA384 ECDHE-RSA-AES128-SHA ECDHE-ECDSA-AES256-SHA384 ECDHE-ECDSA-AES256-SHA ECDHE-RSA-AES256-SHA DHE-RSA-AES128-SHA256 DHE-RSA-AES128-SHA DHE-RSA-AES256-SHA256 DHE-RSA-AES256-SHA ECDHE-ECDSA-DES-CBC3-SHA ECDHE-RSA-DES-CBC3-SHA EDH-RSA-DES-CBC3-SHA AES128-GCM-SHA256 AES256-GCM-SHA384 AES128-SHA256 AES256-SHA256 AES128-SHA AES256-SHA DES-CBC3-SHA !DSS\";\n    access_log  /nginx/logs/gogs.hfdy.com.access.log  main;      #访问日志路径 日志级别\n    error_log   /nginx/logs/gogs.hfdy.com.error.log;   # 错误日志  # 可以在下方直接使用 [ debug | info | notice | warn | error | crit ]  参数\n    location / {\n        add_header Access-Control-Allow-Origin $http_origin;\n        add_header Access-Control-Allow-Methods 'GET,POST,PUT,DELETE,FETCH';\n        add_header Access-Control-Allow-Credentials true;\n        add_header Access-Control-Allow-Headers 'x-mac,x-crfs-token,x-crfs-token,content-type';\n        #限速处理,现在先不配置限速\n        if ($request_method = 'OPTIONS' ) {\n                return 204;\n        }\n        proxy_pass   http://backend.gogs/;\n        #Proxy Settings\n        proxy_redirect     off;    #关闭重定向\n        proxy_set_header   Host             $host;  #在头部中设置host\n        proxy_set_header   X-Real-IP        $remote_addr;  #在头部中设置请求的真是IP\n        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n        proxy_request_buffering on; #接受完整的数据包之后再向上游转发\n        proxy_connect_timeout      75;  #连接超时限制,默认为60s, 超时会返回502\n        proxy_send_timeout         75; #发送超时时间\n        proxy_read_timeout         75; #读取超时时间,默认为60s\n        proxy_buffering on; #接受完整的上游响应,再发送给浏览器\n        proxy_buffer_size          32k; #缓冲区大小\n        proxy_buffers              16 64k; #响应的缓冲区大小\n        proxy_busy_buffers_size    64K; #繁忙的缓冲区大小\n        proxy_temp_file_write_size 64k; #中间文件的写大小\n        proxy_max_temp_file_size 1024m;   #响应的最大中间文件,默认就是1G\n        proxy_limit_rate 0; #不限制读取上游的响应速度\n        proxy_http_version 1.1; #http的版本\n        proxy_set_header Connection \"\"; #设置connect\n    }\n}\nEOF\n\nnginx -t\nsystemctl reload nginx\n```\n\n\n\n#### 04.打开浏览器配置GOGS\n\n\n\n![图片](https://mmbiz.qpic.cn/mmbiz_png/Jb5bUNlS7P2lou6qN28VxZcKCdcFEuG3GcJrq6EbWp9YLpEd7GfU1y4JtbzHHlziaUhjU2LJzfM3SvkutDC6Ruw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)\n\n\n\n配置好之后,基本可以使用\n\n\n\n#### 05.docker与宿主机共享22端口\n\n\n\n```\nsu git\nssh-keygen -t rsa -b 4096 -C \"git@gogs.hfdy.com\"\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n# 在 authorized_keys 最前面添加下面的\n# no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty\n# example:no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC0QmMG+Xz+qjIEp7Vrlt5SLGergYF4DJbY7+4l7R9nvhrbbSSVzNiKGngSCPvQWfkLv1XZhlzG9V7Pr/Gj86yJcz4/AvMYkZanVZ+zi9JFb3CfJLtxeMSUgNC6Ig2UDxAW53hGpADlFL+4Ic9yMoNw0AoqmU2FfKjfO3kFc8xXJ+vAboXgEukxWl/3vniMzIwDiQAfTftbV9RUl2UmbHO70l65FrIvo5llagvSSzu9q3xqhVN5CHdOvRFOEnNJ/xdvnoUE7hbYTjoooOK5o6paXtbPkNWlp3vpyjXnMAxJOYMr+0Gp+S1hGoTMnLyTE/94KKvC7wgrpLpKkd9CnD2uT7B/60tj+tn+hQnBTB5dVqQ1eWUhQ7tySqXXyDuWzAin5CI9q+FlCoK83OAKlFJMopIVgESf19xLkD/x064oyIY0X3q9gZ7QeZk5QSI5vIDFdG9+SYyUUhwYxSnuPn6fmn1RbetOWguzBXy6betP4jQE7HxU4RC/6r+TxapdXSmDfQ92Pjd9Qx9atJ6ntjV6bcxU3u7j5XijaDhkoIPbK5cqnTm7OXZjjfkhWeNAI+IkM2ubF6Ya53j3eOHqKE64h5aIOWgkxjojoxf4spkrGfIeE5aD6Ab4+9Lyu0KmBsCzuTT66oS2gQlQcQ/vmcIgOrGjMDd07GfAjURUzsmgxw== git@gogs.hfdy.com\n```\n\n\n\n#### 06.配置GIT用户SSH登录\n\n\n\n```\n[root@localhost ~]$ mkdir -p /app/gogs/\n[root@localhost ~]$ cat >/app/gogs/gogs <<'END'\n#!/bin/sh\nssh -p 10022 -o StrictHostKeyChecking=no git@127.0.0.1 \\\n\"SSH_ORIGINAL_COMMAND=\\\"$SSH_ORIGINAL_COMMAND\\\" $0 $@\"\nEND\n[root@localhost ~]$ chmod 755 /app/gogs/gogs\n```\n\n\n\n#### 07.遇见的问题\n\n\n\n  Q: git clone 在windows上报SSL certificate problem: unable to get local issuer certificate.\n\n\n\n  A: 对于mkcert生成的证书以及安装,于ubuntu下是不会有这个问题的.在windows下需要使用如下命令解决.\n\n  \n\n```\ngit config --global http.sslverify false\n```","source":"_posts/network-deploy-git.md","raw":"---\ntitle: 企业网络之部署GOGS服务\ncover:  /img/network-deploy/git_title.png\nsubtitle: 企业网络之部署GOGS服务\ncategories: \"企业网络\"\ntags: \"企业网络\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: images\n---\n\n\n在进行部署之前,已经部署好了下面的这些环境\n\n\n\n[企业网络之局域网安全HTTPS](https://yuansudong.gitee.io/2021/network-deploy-https/index.html)\n\n[企业网络之部署DOCKER](https://yuansudong.gitee.io/2021/network-deploy-docker/index.html)\n\n[企业网络之部署DNS服务](https://yuansudong.gitee.io/2021/network-deploy-dns/index.html)\n\n[企业网络之部署NGINX](https://yuansudong.gitee.io/2021/network-deploy-nginx/index.html)\n\n\n\n#### 01.创建GIT用户,并将其加入docker组\n\n\n\n```\n\n# 创建git用户\nsudo useradd -s /bin/bash -d /home/git -m git\n# 增加git用户入docker组\nsudo gpasswd -a git docker\n# 查看用户d\nid git\nuid=1000(git) gid=1000(git) groups=1000(git),984(docker)\n```\n\n\n\n#### 02.登录GIT,部署服务\n\n\n\n```\nsu git\nmkdir docker\ncat > docker/docker-compose.yml <<EOF\nversion: \"3.8\"\nservices:\n  gogs.hfdy.net:\n    image: gogs/gogs:latest\n    restart: always\n    container_name: gogs.hfdy.net\n    ports:\n         - \"10022:22\"\n         - \"3000:3000\"\n    environment:\n         - PUID=1000  # 此处的PUID 要和id git 命令的相同\n         - PGID=1000  # 此处的PGID 要和id git 命令的相同\n    volumes:\n         - /home/git:/data\n         \nEOF\n\ncd docker && docker-compose up -d --build\n```\n\n\n\n#### 03.配置NGINX反向代理\n\n\n\n```\ncat > /etc/nginx/hosts/gogs.hfdy.com.conf <<EOF\nupstream backend.gogs  {\n    server 127.0.0.1:3000 max_fails=0 fail_timeout=0s; #api 服务器 失败10次断60秒\n    # server 127.0.0.1:8001 max_fails=10 fail_timeout=60s; #api 服务器 失败10次断60秒\n    # server 127.0.0.1:8002 backup; # api 服务器 表示服务器为备用\n    keepalive 64;   # 连接池的数量,不易太多\n}\nserver {\n    listen 80; #监听端口\n    server_name gogs.hfdy.com; #域名\n    rewrite ^(.*)$  https://$host$1 permanent; # 将http强制转换为https\n}\nserver {\n    listen       443 ssl ;\n    server_name  gogs.hfdy.com;\n    ssl_certificate /etc/nginx/cert/hfdy.pem;\n    ssl_certificate_key /etc/nginx/cert/hfdy-key.pem; \n    add_header Strict-Transport-Security \"max-age=63072000; includeSubdomains; preload\";\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 1440m;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers on;\n    ssl_ciphers \"ECDHE-ECDSA-CHACHA20-POLY1305 ECDHE-RSA-CHACHA20-POLY1305 ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-RSA-AES128-GCM-SHA256 ECDHE-ECDSA-AES256-GCM-SHA384 ECDHE-RSA-AES256-GCM-SHA384 DHE-RSA-AES128-GCM-SHA256 DHE-RSA-AES256-GCM-SHA384 ECDHE-ECDSA-AES128-SHA256 ECDHE-RSA-AES128-SHA256 ECDHE-ECDSA-AES128-SHA ECDHE-RSA-AES256-SHA384 ECDHE-RSA-AES128-SHA ECDHE-ECDSA-AES256-SHA384 ECDHE-ECDSA-AES256-SHA ECDHE-RSA-AES256-SHA DHE-RSA-AES128-SHA256 DHE-RSA-AES128-SHA DHE-RSA-AES256-SHA256 DHE-RSA-AES256-SHA ECDHE-ECDSA-DES-CBC3-SHA ECDHE-RSA-DES-CBC3-SHA EDH-RSA-DES-CBC3-SHA AES128-GCM-SHA256 AES256-GCM-SHA384 AES128-SHA256 AES256-SHA256 AES128-SHA AES256-SHA DES-CBC3-SHA !DSS\";\n    access_log  /nginx/logs/gogs.hfdy.com.access.log  main;      #访问日志路径 日志级别\n    error_log   /nginx/logs/gogs.hfdy.com.error.log;   # 错误日志  # 可以在下方直接使用 [ debug | info | notice | warn | error | crit ]  参数\n    location / {\n        add_header Access-Control-Allow-Origin $http_origin;\n        add_header Access-Control-Allow-Methods 'GET,POST,PUT,DELETE,FETCH';\n        add_header Access-Control-Allow-Credentials true;\n        add_header Access-Control-Allow-Headers 'x-mac,x-crfs-token,x-crfs-token,content-type';\n        #限速处理,现在先不配置限速\n        if ($request_method = 'OPTIONS' ) {\n                return 204;\n        }\n        proxy_pass   http://backend.gogs/;\n        #Proxy Settings\n        proxy_redirect     off;    #关闭重定向\n        proxy_set_header   Host             $host;  #在头部中设置host\n        proxy_set_header   X-Real-IP        $remote_addr;  #在头部中设置请求的真是IP\n        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n        proxy_request_buffering on; #接受完整的数据包之后再向上游转发\n        proxy_connect_timeout      75;  #连接超时限制,默认为60s, 超时会返回502\n        proxy_send_timeout         75; #发送超时时间\n        proxy_read_timeout         75; #读取超时时间,默认为60s\n        proxy_buffering on; #接受完整的上游响应,再发送给浏览器\n        proxy_buffer_size          32k; #缓冲区大小\n        proxy_buffers              16 64k; #响应的缓冲区大小\n        proxy_busy_buffers_size    64K; #繁忙的缓冲区大小\n        proxy_temp_file_write_size 64k; #中间文件的写大小\n        proxy_max_temp_file_size 1024m;   #响应的最大中间文件,默认就是1G\n        proxy_limit_rate 0; #不限制读取上游的响应速度\n        proxy_http_version 1.1; #http的版本\n        proxy_set_header Connection \"\"; #设置connect\n    }\n}\nEOF\n\nnginx -t\nsystemctl reload nginx\n```\n\n\n\n#### 04.打开浏览器配置GOGS\n\n\n\n![图片](https://mmbiz.qpic.cn/mmbiz_png/Jb5bUNlS7P2lou6qN28VxZcKCdcFEuG3GcJrq6EbWp9YLpEd7GfU1y4JtbzHHlziaUhjU2LJzfM3SvkutDC6Ruw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)\n\n\n\n配置好之后,基本可以使用\n\n\n\n#### 05.docker与宿主机共享22端口\n\n\n\n```\nsu git\nssh-keygen -t rsa -b 4096 -C \"git@gogs.hfdy.com\"\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n# 在 authorized_keys 最前面添加下面的\n# no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty\n# example:no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC0QmMG+Xz+qjIEp7Vrlt5SLGergYF4DJbY7+4l7R9nvhrbbSSVzNiKGngSCPvQWfkLv1XZhlzG9V7Pr/Gj86yJcz4/AvMYkZanVZ+zi9JFb3CfJLtxeMSUgNC6Ig2UDxAW53hGpADlFL+4Ic9yMoNw0AoqmU2FfKjfO3kFc8xXJ+vAboXgEukxWl/3vniMzIwDiQAfTftbV9RUl2UmbHO70l65FrIvo5llagvSSzu9q3xqhVN5CHdOvRFOEnNJ/xdvnoUE7hbYTjoooOK5o6paXtbPkNWlp3vpyjXnMAxJOYMr+0Gp+S1hGoTMnLyTE/94KKvC7wgrpLpKkd9CnD2uT7B/60tj+tn+hQnBTB5dVqQ1eWUhQ7tySqXXyDuWzAin5CI9q+FlCoK83OAKlFJMopIVgESf19xLkD/x064oyIY0X3q9gZ7QeZk5QSI5vIDFdG9+SYyUUhwYxSnuPn6fmn1RbetOWguzBXy6betP4jQE7HxU4RC/6r+TxapdXSmDfQ92Pjd9Qx9atJ6ntjV6bcxU3u7j5XijaDhkoIPbK5cqnTm7OXZjjfkhWeNAI+IkM2ubF6Ya53j3eOHqKE64h5aIOWgkxjojoxf4spkrGfIeE5aD6Ab4+9Lyu0KmBsCzuTT66oS2gQlQcQ/vmcIgOrGjMDd07GfAjURUzsmgxw== git@gogs.hfdy.com\n```\n\n\n\n#### 06.配置GIT用户SSH登录\n\n\n\n```\n[root@localhost ~]$ mkdir -p /app/gogs/\n[root@localhost ~]$ cat >/app/gogs/gogs <<'END'\n#!/bin/sh\nssh -p 10022 -o StrictHostKeyChecking=no git@127.0.0.1 \\\n\"SSH_ORIGINAL_COMMAND=\\\"$SSH_ORIGINAL_COMMAND\\\" $0 $@\"\nEND\n[root@localhost ~]$ chmod 755 /app/gogs/gogs\n```\n\n\n\n#### 07.遇见的问题\n\n\n\n  Q: git clone 在windows上报SSL certificate problem: unable to get local issuer certificate.\n\n\n\n  A: 对于mkcert生成的证书以及安装,于ubuntu下是不会有这个问题的.在windows下需要使用如下命令解决.\n\n  \n\n```\ngit config --global http.sslverify false\n```","slug":"network-deploy-git","published":1,"date":"2021-03-15T16:46:34.705Z","updated":"2021-03-15T17:00:09.662Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckmavtb1p0001ywvl3zo2gx7u","content":"<p>在进行部署之前,已经部署好了下面的这些环境</p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-https/index.html\">企业网络之局域网安全HTTPS</a></p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-docker/index.html\">企业网络之部署DOCKER</a></p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-dns/index.html\">企业网络之部署DNS服务</a></p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-nginx/index.html\">企业网络之部署NGINX</a></p>\n<h4 id=\"01-创建GIT用户-并将其加入docker组\"><a href=\"#01-创建GIT用户-并将其加入docker组\" class=\"headerlink\" title=\"01.创建GIT用户,并将其加入docker组\"></a>01.创建GIT用户,并将其加入docker组</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"># 创建git用户</span><br><span class=\"line\">sudo useradd -s &#x2F;bin&#x2F;bash -d &#x2F;home&#x2F;git -m git</span><br><span class=\"line\"># 增加git用户入docker组</span><br><span class=\"line\">sudo gpasswd -a git docker</span><br><span class=\"line\"># 查看用户d</span><br><span class=\"line\">id git</span><br><span class=\"line\">uid&#x3D;1000(git) gid&#x3D;1000(git) groups&#x3D;1000(git),984(docker)</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"02-登录GIT-部署服务\"><a href=\"#02-登录GIT-部署服务\" class=\"headerlink\" title=\"02.登录GIT,部署服务\"></a>02.登录GIT,部署服务</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su git</span><br><span class=\"line\">mkdir docker</span><br><span class=\"line\">cat &gt; docker&#x2F;docker-compose.yml &lt;&lt;EOF</span><br><span class=\"line\">version: &quot;3.8&quot;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  gogs.hfdy.net:</span><br><span class=\"line\">    image: gogs&#x2F;gogs:latest</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    container_name: gogs.hfdy.net</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">         - &quot;10022:22&quot;</span><br><span class=\"line\">         - &quot;3000:3000&quot;</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">         - PUID&#x3D;1000  # 此处的PUID 要和id git 命令的相同</span><br><span class=\"line\">         - PGID&#x3D;1000  # 此处的PGID 要和id git 命令的相同</span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">         - &#x2F;home&#x2F;git:&#x2F;data</span><br><span class=\"line\">         </span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">cd docker &amp;&amp; docker-compose up -d --build</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-配置NGINX反向代理\"><a href=\"#03-配置NGINX反向代理\" class=\"headerlink\" title=\"03.配置NGINX反向代理\"></a>03.配置NGINX反向代理</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt; &#x2F;etc&#x2F;nginx&#x2F;hosts&#x2F;gogs.hfdy.com.conf &lt;&lt;EOF</span><br><span class=\"line\">upstream backend.gogs  &#123;</span><br><span class=\"line\">    server 127.0.0.1:3000 max_fails&#x3D;0 fail_timeout&#x3D;0s; #api 服务器 失败10次断60秒</span><br><span class=\"line\">    # server 127.0.0.1:8001 max_fails&#x3D;10 fail_timeout&#x3D;60s; #api 服务器 失败10次断60秒</span><br><span class=\"line\">    # server 127.0.0.1:8002 backup; # api 服务器 表示服务器为备用</span><br><span class=\"line\">    keepalive 64;   # 连接池的数量,不易太多</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80; #监听端口</span><br><span class=\"line\">    server_name gogs.hfdy.com; #域名</span><br><span class=\"line\">    rewrite ^(.*)$  https:&#x2F;&#x2F;$host$1 permanent; # 将http强制转换为https</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen       443 ssl ;</span><br><span class=\"line\">    server_name  gogs.hfdy.com;</span><br><span class=\"line\">    ssl_certificate &#x2F;etc&#x2F;nginx&#x2F;cert&#x2F;hfdy.pem;</span><br><span class=\"line\">    ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;cert&#x2F;hfdy-key.pem; </span><br><span class=\"line\">    add_header Strict-Transport-Security &quot;max-age&#x3D;63072000; includeSubdomains; preload&quot;;</span><br><span class=\"line\">    ssl_session_cache shared:SSL:10m;</span><br><span class=\"line\">    ssl_session_timeout 1440m;</span><br><span class=\"line\">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class=\"line\">    ssl_prefer_server_ciphers on;</span><br><span class=\"line\">    ssl_ciphers &quot;ECDHE-ECDSA-CHACHA20-POLY1305 ECDHE-RSA-CHACHA20-POLY1305 ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-RSA-AES128-GCM-SHA256 ECDHE-ECDSA-AES256-GCM-SHA384 ECDHE-RSA-AES256-GCM-SHA384 DHE-RSA-AES128-GCM-SHA256 DHE-RSA-AES256-GCM-SHA384 ECDHE-ECDSA-AES128-SHA256 ECDHE-RSA-AES128-SHA256 ECDHE-ECDSA-AES128-SHA ECDHE-RSA-AES256-SHA384 ECDHE-RSA-AES128-SHA ECDHE-ECDSA-AES256-SHA384 ECDHE-ECDSA-AES256-SHA ECDHE-RSA-AES256-SHA DHE-RSA-AES128-SHA256 DHE-RSA-AES128-SHA DHE-RSA-AES256-SHA256 DHE-RSA-AES256-SHA ECDHE-ECDSA-DES-CBC3-SHA ECDHE-RSA-DES-CBC3-SHA EDH-RSA-DES-CBC3-SHA AES128-GCM-SHA256 AES256-GCM-SHA384 AES128-SHA256 AES256-SHA256 AES128-SHA AES256-SHA DES-CBC3-SHA !DSS&quot;;</span><br><span class=\"line\">    access_log  &#x2F;nginx&#x2F;logs&#x2F;gogs.hfdy.com.access.log  main;      #访问日志路径 日志级别</span><br><span class=\"line\">    error_log   &#x2F;nginx&#x2F;logs&#x2F;gogs.hfdy.com.error.log;   # 错误日志  # 可以在下方直接使用 [ debug | info | notice | warn | error | crit ]  参数</span><br><span class=\"line\">    location &#x2F; &#123;</span><br><span class=\"line\">        add_header Access-Control-Allow-Origin $http_origin;</span><br><span class=\"line\">        add_header Access-Control-Allow-Methods &#39;GET,POST,PUT,DELETE,FETCH&#39;;</span><br><span class=\"line\">        add_header Access-Control-Allow-Credentials true;</span><br><span class=\"line\">        add_header Access-Control-Allow-Headers &#39;x-mac,x-crfs-token,x-crfs-token,content-type&#39;;</span><br><span class=\"line\">        #限速处理,现在先不配置限速</span><br><span class=\"line\">        if ($request_method &#x3D; &#39;OPTIONS&#39; ) &#123;</span><br><span class=\"line\">                return 204;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        proxy_pass   http:&#x2F;&#x2F;backend.gogs&#x2F;;</span><br><span class=\"line\">        #Proxy Settings</span><br><span class=\"line\">        proxy_redirect     off;    #关闭重定向</span><br><span class=\"line\">        proxy_set_header   Host             $host;  #在头部中设置host</span><br><span class=\"line\">        proxy_set_header   X-Real-IP        $remote_addr;  #在头部中设置请求的真是IP</span><br><span class=\"line\">        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class=\"line\">        proxy_request_buffering on; #接受完整的数据包之后再向上游转发</span><br><span class=\"line\">        proxy_connect_timeout      75;  #连接超时限制,默认为60s, 超时会返回502</span><br><span class=\"line\">        proxy_send_timeout         75; #发送超时时间</span><br><span class=\"line\">        proxy_read_timeout         75; #读取超时时间,默认为60s</span><br><span class=\"line\">        proxy_buffering on; #接受完整的上游响应,再发送给浏览器</span><br><span class=\"line\">        proxy_buffer_size          32k; #缓冲区大小</span><br><span class=\"line\">        proxy_buffers              16 64k; #响应的缓冲区大小</span><br><span class=\"line\">        proxy_busy_buffers_size    64K; #繁忙的缓冲区大小</span><br><span class=\"line\">        proxy_temp_file_write_size 64k; #中间文件的写大小</span><br><span class=\"line\">        proxy_max_temp_file_size 1024m;   #响应的最大中间文件,默认就是1G</span><br><span class=\"line\">        proxy_limit_rate 0; #不限制读取上游的响应速度</span><br><span class=\"line\">        proxy_http_version 1.1; #http的版本</span><br><span class=\"line\">        proxy_set_header Connection &quot;&quot;; #设置connect</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">nginx -t</span><br><span class=\"line\">systemctl reload nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"04-打开浏览器配置GOGS\"><a href=\"#04-打开浏览器配置GOGS\" class=\"headerlink\" title=\"04.打开浏览器配置GOGS\"></a>04.打开浏览器配置GOGS</h4><p><img src=\"https://mmbiz.qpic.cn/mmbiz_png/Jb5bUNlS7P2lou6qN28VxZcKCdcFEuG3GcJrq6EbWp9YLpEd7GfU1y4JtbzHHlziaUhjU2LJzfM3SvkutDC6Ruw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\"></p>\n<p>配置好之后,基本可以使用</p>\n<h4 id=\"05-docker与宿主机共享22端口\"><a href=\"#05-docker与宿主机共享22端口\" class=\"headerlink\" title=\"05.docker与宿主机共享22端口\"></a>05.docker与宿主机共享22端口</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su git</span><br><span class=\"line\">ssh-keygen -t rsa -b 4096 -C &quot;git@gogs.hfdy.com&quot;</span><br><span class=\"line\">cat ~&#x2F;.ssh&#x2F;id_rsa.pub &gt;&gt; ~&#x2F;.ssh&#x2F;authorized_keys</span><br><span class=\"line\"># 在 authorized_keys 最前面添加下面的</span><br><span class=\"line\"># no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty</span><br><span class=\"line\"># example:no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC0QmMG+Xz+qjIEp7Vrlt5SLGergYF4DJbY7+4l7R9nvhrbbSSVzNiKGngSCPvQWfkLv1XZhlzG9V7Pr&#x2F;Gj86yJcz4&#x2F;AvMYkZanVZ+zi9JFb3CfJLtxeMSUgNC6Ig2UDxAW53hGpADlFL+4Ic9yMoNw0AoqmU2FfKjfO3kFc8xXJ+vAboXgEukxWl&#x2F;3vniMzIwDiQAfTftbV9RUl2UmbHO70l65FrIvo5llagvSSzu9q3xqhVN5CHdOvRFOEnNJ&#x2F;xdvnoUE7hbYTjoooOK5o6paXtbPkNWlp3vpyjXnMAxJOYMr+0Gp+S1hGoTMnLyTE&#x2F;94KKvC7wgrpLpKkd9CnD2uT7B&#x2F;60tj+tn+hQnBTB5dVqQ1eWUhQ7tySqXXyDuWzAin5CI9q+FlCoK83OAKlFJMopIVgESf19xLkD&#x2F;x064oyIY0X3q9gZ7QeZk5QSI5vIDFdG9+SYyUUhwYxSnuPn6fmn1RbetOWguzBXy6betP4jQE7HxU4RC&#x2F;6r+TxapdXSmDfQ92Pjd9Qx9atJ6ntjV6bcxU3u7j5XijaDhkoIPbK5cqnTm7OXZjjfkhWeNAI+IkM2ubF6Ya53j3eOHqKE64h5aIOWgkxjojoxf4spkrGfIeE5aD6Ab4+9Lyu0KmBsCzuTT66oS2gQlQcQ&#x2F;vmcIgOrGjMDd07GfAjURUzsmgxw&#x3D;&#x3D; git@gogs.hfdy.com</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"06-配置GIT用户SSH登录\"><a href=\"#06-配置GIT用户SSH登录\" class=\"headerlink\" title=\"06.配置GIT用户SSH登录\"></a>06.配置GIT用户SSH登录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]$ mkdir -p &#x2F;app&#x2F;gogs&#x2F;</span><br><span class=\"line\">[root@localhost ~]$ cat &gt;&#x2F;app&#x2F;gogs&#x2F;gogs &lt;&lt;&#39;END&#39;</span><br><span class=\"line\">#!&#x2F;bin&#x2F;sh</span><br><span class=\"line\">ssh -p 10022 -o StrictHostKeyChecking&#x3D;no git@127.0.0.1 \\</span><br><span class=\"line\">&quot;SSH_ORIGINAL_COMMAND&#x3D;\\&quot;$SSH_ORIGINAL_COMMAND\\&quot; $0 $@&quot;</span><br><span class=\"line\">END</span><br><span class=\"line\">[root@localhost ~]$ chmod 755 &#x2F;app&#x2F;gogs&#x2F;gogs</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"07-遇见的问题\"><a href=\"#07-遇见的问题\" class=\"headerlink\" title=\"07.遇见的问题\"></a>07.遇见的问题</h4><p>  Q: git clone 在windows上报SSL certificate problem: unable to get local issuer certificate.</p>\n<p>  A: 对于mkcert生成的证书以及安装,于ubuntu下是不会有这个问题的.在windows下需要使用如下命令解决.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.sslverify false</span><br></pre></td></tr></table></figure>","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>在进行部署之前,已经部署好了下面的这些环境</p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-https/index.html\">企业网络之局域网安全HTTPS</a></p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-docker/index.html\">企业网络之部署DOCKER</a></p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-dns/index.html\">企业网络之部署DNS服务</a></p>\n<p><a href=\"https://yuansudong.gitee.io/2021/network-deploy-nginx/index.html\">企业网络之部署NGINX</a></p>\n<h4 id=\"01-创建GIT用户-并将其加入docker组\"><a href=\"#01-创建GIT用户-并将其加入docker组\" class=\"headerlink\" title=\"01.创建GIT用户,并将其加入docker组\"></a>01.创建GIT用户,并将其加入docker组</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"># 创建git用户</span><br><span class=\"line\">sudo useradd -s &#x2F;bin&#x2F;bash -d &#x2F;home&#x2F;git -m git</span><br><span class=\"line\"># 增加git用户入docker组</span><br><span class=\"line\">sudo gpasswd -a git docker</span><br><span class=\"line\"># 查看用户d</span><br><span class=\"line\">id git</span><br><span class=\"line\">uid&#x3D;1000(git) gid&#x3D;1000(git) groups&#x3D;1000(git),984(docker)</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"02-登录GIT-部署服务\"><a href=\"#02-登录GIT-部署服务\" class=\"headerlink\" title=\"02.登录GIT,部署服务\"></a>02.登录GIT,部署服务</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su git</span><br><span class=\"line\">mkdir docker</span><br><span class=\"line\">cat &gt; docker&#x2F;docker-compose.yml &lt;&lt;EOF</span><br><span class=\"line\">version: &quot;3.8&quot;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  gogs.hfdy.net:</span><br><span class=\"line\">    image: gogs&#x2F;gogs:latest</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    container_name: gogs.hfdy.net</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">         - &quot;10022:22&quot;</span><br><span class=\"line\">         - &quot;3000:3000&quot;</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">         - PUID&#x3D;1000  # 此处的PUID 要和id git 命令的相同</span><br><span class=\"line\">         - PGID&#x3D;1000  # 此处的PGID 要和id git 命令的相同</span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">         - &#x2F;home&#x2F;git:&#x2F;data</span><br><span class=\"line\">         </span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">cd docker &amp;&amp; docker-compose up -d --build</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"03-配置NGINX反向代理\"><a href=\"#03-配置NGINX反向代理\" class=\"headerlink\" title=\"03.配置NGINX反向代理\"></a>03.配置NGINX反向代理</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt; &#x2F;etc&#x2F;nginx&#x2F;hosts&#x2F;gogs.hfdy.com.conf &lt;&lt;EOF</span><br><span class=\"line\">upstream backend.gogs  &#123;</span><br><span class=\"line\">    server 127.0.0.1:3000 max_fails&#x3D;0 fail_timeout&#x3D;0s; #api 服务器 失败10次断60秒</span><br><span class=\"line\">    # server 127.0.0.1:8001 max_fails&#x3D;10 fail_timeout&#x3D;60s; #api 服务器 失败10次断60秒</span><br><span class=\"line\">    # server 127.0.0.1:8002 backup; # api 服务器 表示服务器为备用</span><br><span class=\"line\">    keepalive 64;   # 连接池的数量,不易太多</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80; #监听端口</span><br><span class=\"line\">    server_name gogs.hfdy.com; #域名</span><br><span class=\"line\">    rewrite ^(.*)$  https:&#x2F;&#x2F;$host$1 permanent; # 将http强制转换为https</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen       443 ssl ;</span><br><span class=\"line\">    server_name  gogs.hfdy.com;</span><br><span class=\"line\">    ssl_certificate &#x2F;etc&#x2F;nginx&#x2F;cert&#x2F;hfdy.pem;</span><br><span class=\"line\">    ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;cert&#x2F;hfdy-key.pem; </span><br><span class=\"line\">    add_header Strict-Transport-Security &quot;max-age&#x3D;63072000; includeSubdomains; preload&quot;;</span><br><span class=\"line\">    ssl_session_cache shared:SSL:10m;</span><br><span class=\"line\">    ssl_session_timeout 1440m;</span><br><span class=\"line\">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class=\"line\">    ssl_prefer_server_ciphers on;</span><br><span class=\"line\">    ssl_ciphers &quot;ECDHE-ECDSA-CHACHA20-POLY1305 ECDHE-RSA-CHACHA20-POLY1305 ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-RSA-AES128-GCM-SHA256 ECDHE-ECDSA-AES256-GCM-SHA384 ECDHE-RSA-AES256-GCM-SHA384 DHE-RSA-AES128-GCM-SHA256 DHE-RSA-AES256-GCM-SHA384 ECDHE-ECDSA-AES128-SHA256 ECDHE-RSA-AES128-SHA256 ECDHE-ECDSA-AES128-SHA ECDHE-RSA-AES256-SHA384 ECDHE-RSA-AES128-SHA ECDHE-ECDSA-AES256-SHA384 ECDHE-ECDSA-AES256-SHA ECDHE-RSA-AES256-SHA DHE-RSA-AES128-SHA256 DHE-RSA-AES128-SHA DHE-RSA-AES256-SHA256 DHE-RSA-AES256-SHA ECDHE-ECDSA-DES-CBC3-SHA ECDHE-RSA-DES-CBC3-SHA EDH-RSA-DES-CBC3-SHA AES128-GCM-SHA256 AES256-GCM-SHA384 AES128-SHA256 AES256-SHA256 AES128-SHA AES256-SHA DES-CBC3-SHA !DSS&quot;;</span><br><span class=\"line\">    access_log  &#x2F;nginx&#x2F;logs&#x2F;gogs.hfdy.com.access.log  main;      #访问日志路径 日志级别</span><br><span class=\"line\">    error_log   &#x2F;nginx&#x2F;logs&#x2F;gogs.hfdy.com.error.log;   # 错误日志  # 可以在下方直接使用 [ debug | info | notice | warn | error | crit ]  参数</span><br><span class=\"line\">    location &#x2F; &#123;</span><br><span class=\"line\">        add_header Access-Control-Allow-Origin $http_origin;</span><br><span class=\"line\">        add_header Access-Control-Allow-Methods &#39;GET,POST,PUT,DELETE,FETCH&#39;;</span><br><span class=\"line\">        add_header Access-Control-Allow-Credentials true;</span><br><span class=\"line\">        add_header Access-Control-Allow-Headers &#39;x-mac,x-crfs-token,x-crfs-token,content-type&#39;;</span><br><span class=\"line\">        #限速处理,现在先不配置限速</span><br><span class=\"line\">        if ($request_method &#x3D; &#39;OPTIONS&#39; ) &#123;</span><br><span class=\"line\">                return 204;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        proxy_pass   http:&#x2F;&#x2F;backend.gogs&#x2F;;</span><br><span class=\"line\">        #Proxy Settings</span><br><span class=\"line\">        proxy_redirect     off;    #关闭重定向</span><br><span class=\"line\">        proxy_set_header   Host             $host;  #在头部中设置host</span><br><span class=\"line\">        proxy_set_header   X-Real-IP        $remote_addr;  #在头部中设置请求的真是IP</span><br><span class=\"line\">        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class=\"line\">        proxy_request_buffering on; #接受完整的数据包之后再向上游转发</span><br><span class=\"line\">        proxy_connect_timeout      75;  #连接超时限制,默认为60s, 超时会返回502</span><br><span class=\"line\">        proxy_send_timeout         75; #发送超时时间</span><br><span class=\"line\">        proxy_read_timeout         75; #读取超时时间,默认为60s</span><br><span class=\"line\">        proxy_buffering on; #接受完整的上游响应,再发送给浏览器</span><br><span class=\"line\">        proxy_buffer_size          32k; #缓冲区大小</span><br><span class=\"line\">        proxy_buffers              16 64k; #响应的缓冲区大小</span><br><span class=\"line\">        proxy_busy_buffers_size    64K; #繁忙的缓冲区大小</span><br><span class=\"line\">        proxy_temp_file_write_size 64k; #中间文件的写大小</span><br><span class=\"line\">        proxy_max_temp_file_size 1024m;   #响应的最大中间文件,默认就是1G</span><br><span class=\"line\">        proxy_limit_rate 0; #不限制读取上游的响应速度</span><br><span class=\"line\">        proxy_http_version 1.1; #http的版本</span><br><span class=\"line\">        proxy_set_header Connection &quot;&quot;; #设置connect</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">nginx -t</span><br><span class=\"line\">systemctl reload nginx</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"04-打开浏览器配置GOGS\"><a href=\"#04-打开浏览器配置GOGS\" class=\"headerlink\" title=\"04.打开浏览器配置GOGS\"></a>04.打开浏览器配置GOGS</h4><p><img src=\"https://mmbiz.qpic.cn/mmbiz_png/Jb5bUNlS7P2lou6qN28VxZcKCdcFEuG3GcJrq6EbWp9YLpEd7GfU1y4JtbzHHlziaUhjU2LJzfM3SvkutDC6Ruw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\"></p>\n<p>配置好之后,基本可以使用</p>\n<h4 id=\"05-docker与宿主机共享22端口\"><a href=\"#05-docker与宿主机共享22端口\" class=\"headerlink\" title=\"05.docker与宿主机共享22端口\"></a>05.docker与宿主机共享22端口</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su git</span><br><span class=\"line\">ssh-keygen -t rsa -b 4096 -C &quot;git@gogs.hfdy.com&quot;</span><br><span class=\"line\">cat ~&#x2F;.ssh&#x2F;id_rsa.pub &gt;&gt; ~&#x2F;.ssh&#x2F;authorized_keys</span><br><span class=\"line\"># 在 authorized_keys 最前面添加下面的</span><br><span class=\"line\"># no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty</span><br><span class=\"line\"># example:no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC0QmMG+Xz+qjIEp7Vrlt5SLGergYF4DJbY7+4l7R9nvhrbbSSVzNiKGngSCPvQWfkLv1XZhlzG9V7Pr&#x2F;Gj86yJcz4&#x2F;AvMYkZanVZ+zi9JFb3CfJLtxeMSUgNC6Ig2UDxAW53hGpADlFL+4Ic9yMoNw0AoqmU2FfKjfO3kFc8xXJ+vAboXgEukxWl&#x2F;3vniMzIwDiQAfTftbV9RUl2UmbHO70l65FrIvo5llagvSSzu9q3xqhVN5CHdOvRFOEnNJ&#x2F;xdvnoUE7hbYTjoooOK5o6paXtbPkNWlp3vpyjXnMAxJOYMr+0Gp+S1hGoTMnLyTE&#x2F;94KKvC7wgrpLpKkd9CnD2uT7B&#x2F;60tj+tn+hQnBTB5dVqQ1eWUhQ7tySqXXyDuWzAin5CI9q+FlCoK83OAKlFJMopIVgESf19xLkD&#x2F;x064oyIY0X3q9gZ7QeZk5QSI5vIDFdG9+SYyUUhwYxSnuPn6fmn1RbetOWguzBXy6betP4jQE7HxU4RC&#x2F;6r+TxapdXSmDfQ92Pjd9Qx9atJ6ntjV6bcxU3u7j5XijaDhkoIPbK5cqnTm7OXZjjfkhWeNAI+IkM2ubF6Ya53j3eOHqKE64h5aIOWgkxjojoxf4spkrGfIeE5aD6Ab4+9Lyu0KmBsCzuTT66oS2gQlQcQ&#x2F;vmcIgOrGjMDd07GfAjURUzsmgxw&#x3D;&#x3D; git@gogs.hfdy.com</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"06-配置GIT用户SSH登录\"><a href=\"#06-配置GIT用户SSH登录\" class=\"headerlink\" title=\"06.配置GIT用户SSH登录\"></a>06.配置GIT用户SSH登录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]$ mkdir -p &#x2F;app&#x2F;gogs&#x2F;</span><br><span class=\"line\">[root@localhost ~]$ cat &gt;&#x2F;app&#x2F;gogs&#x2F;gogs &lt;&lt;&#39;END&#39;</span><br><span class=\"line\">#!&#x2F;bin&#x2F;sh</span><br><span class=\"line\">ssh -p 10022 -o StrictHostKeyChecking&#x3D;no git@127.0.0.1 \\</span><br><span class=\"line\">&quot;SSH_ORIGINAL_COMMAND&#x3D;\\&quot;$SSH_ORIGINAL_COMMAND\\&quot; $0 $@&quot;</span><br><span class=\"line\">END</span><br><span class=\"line\">[root@localhost ~]$ chmod 755 &#x2F;app&#x2F;gogs&#x2F;gogs</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"07-遇见的问题\"><a href=\"#07-遇见的问题\" class=\"headerlink\" title=\"07.遇见的问题\"></a>07.遇见的问题</h4><p>  Q: git clone 在windows上报SSL certificate problem: unable to get local issuer certificate.</p>\n<p>  A: 对于mkcert生成的证书以及安装,于ubuntu下是不会有这个问题的.在windows下需要使用如下命令解决.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.sslverify false</span><br></pre></td></tr></table></figure>"},{"title":"技术场景之解决重复请求","cover":"/img/technology-sense/request_repeated_title.png","subtitle":"技术场景之解决重复请求","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"images","_content":"\n\n\n何为重复请求? 即期望请求一次的接口,重复请求了多次. 倘若要解决重复请求,就需要实现接口的幂等性.\n\n\n\n何为幂等?幂等(idempotent、idempotence)是一个数学与计算机学概念,常见于抽象代数中.在编程中,幂等是指无论执行多少次,其结果与第一次执行的结果相同.\n\n\n\n何为接口幂等?接口幂等,即同一个网络请求无论多少次进入服务器,其产生的影响与第一次进入服务器的影响相同.而要实现接口幂等,首先得分析,CRUD的幂等性\n\n\n\n\n\n### 01.CRUD幂等\n\n\n\nCRUD 即Create,Read,Update,Delete的简写.其语义对应着SQL中的Insert,Select,Update,Delete 语句.\n\n\n\n#### A.  Create 创建类操作\n\n  \n\n在数据库中,数据的创建是通过主键自增+唯一索引的方式来确定一行数据.其操作不具备幂等性\n\n\n\n#### B.  Read 查询类操作\n\n\n\n不考虑并发的情况下,在数据查询中,不会修改或者新数增数据,其操作无论执行多少次,其返回的结果与第一次操作的情况相同.\n\n\n\n可谓是天然幂等.\n\n\n\n#### C.  Update 更新类操作\n\n\n\n基于主键的计算式Update,不具备幂等性.比如下列的SQL语句.多次执行的结果,与第一次执行的结果不同\n\n\n\n```\nUPDATE Bi SET Bi.Number = Bi.Number - 1 WHERE Bi.Id = 1\n```\n\n\n\n基于主键的非计算式Update,具备幂等性.比如下列的SQL语句.多次执行的结果与第一次执行的结果相同.\n\n\n\n```\nUPDATE Bi SET Bi.Number = @Value WHERE Bi.Id = 1\n```\n\n\n\n#### D.  Delete 删除类操作\n\n\n\n基于主键的delete是具备幂等性的.比如,下列的SQL语句\n\n\n\n```\nDELETE FROM Bi WHERE Bi.Id = 1\n```\n\n\n\n基于逻辑删除,将DeletedAt字段置为当前时间.在查询时过滤掉该条数据.\n\n\n\n如此方式,在数据层面不具有幂等性.但是,在逻辑方面他具有了幂等性.比如,下列的SQL语句.\n\n\n\n```\nUPDATE Bi SET Bi.DeletedAt = {{当前的时间戳}} WHERE Bi.Id = 1\n```\n\n\n\n### 02.原因分析及其解决方案\n\n\n\n#### 01.重复点击\n\n重复点击,即,用户不小心双击或者测试人员恶意双击造成的重复请求\n\n对于这一类的重复请求.通用的解决方案是客户端在一个请求未结束之前,将点击按钮置为灰色,让按钮失去执行接口的能力.\n\n#### 06.在浏览器中因为后退等操作按钮,导致POST重复提交\n\n05.网络波动引起的重复请求\n\n04.RPC调用时,重试引起的重复调用\n\n\n\n对于这三类问题,有下列几种解决办法.\n\n\n\n第一种方案: 在正式执行接口之前,客户端先通过I1接口申请一个单次准入令牌.该令牌全局唯一,且有效时间为5分钟.客户端在发起正式请求时,在带header中带上单次准入令牌.服务器根据此准入令牌,与redis中进行删除操作,只有删除的个数为1时,才会允许放行. 否则返回相关错误码,客户端根据错误码提示操作太频繁或者网络出小差再试一次等提示.\n\n\n\n优点:  客户端不用挂心准入令牌的生成,实现了各端的统一,且服务器可以根据准入令牌做限流处理.\n\n\n\n缺点:  增加了TPS的耗时,增加了客户端的编码量(因人而异).  \n\n\n\n第二种方案: 客户端自行生成一个唯一标识符.与以前项目中,客户端感觉每次请求之前都要去服务器拿准入token,有些麻烦,所以决定自己生成.\n\n在生成之后,通过将其加入header中带入服务器.服务器根据数据表中的唯一索引,或者SQL执行受影响的行数,可以确保幂等.\n\n\n\n下面是以前合作的搭档对于唯一标识符的生成方式.\n\n\n\n```\nbString = {精确到纳秒的时间戳}_{设备标识符}_md5(请求体)_sha1(请求体)\nmd5Body = md5(bString)\nsha1Body = sha1(bString)\nrequestId = md5Body_sha1Body  \n```\n\n\n\nrequestId 就是需要带在header中的请求ID","source":"_posts/technology-sense-network-request-repeated.md","raw":"---\ntitle: 技术场景之解决重复请求\ncover:  /img/technology-sense/request_repeated_title.png\nsubtitle: 技术场景之解决重复请求\ncategories: \"技术场景\"\ntags: \"技术场景\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: images\n---\n\n\n\n何为重复请求? 即期望请求一次的接口,重复请求了多次. 倘若要解决重复请求,就需要实现接口的幂等性.\n\n\n\n何为幂等?幂等(idempotent、idempotence)是一个数学与计算机学概念,常见于抽象代数中.在编程中,幂等是指无论执行多少次,其结果与第一次执行的结果相同.\n\n\n\n何为接口幂等?接口幂等,即同一个网络请求无论多少次进入服务器,其产生的影响与第一次进入服务器的影响相同.而要实现接口幂等,首先得分析,CRUD的幂等性\n\n\n\n\n\n### 01.CRUD幂等\n\n\n\nCRUD 即Create,Read,Update,Delete的简写.其语义对应着SQL中的Insert,Select,Update,Delete 语句.\n\n\n\n#### A.  Create 创建类操作\n\n  \n\n在数据库中,数据的创建是通过主键自增+唯一索引的方式来确定一行数据.其操作不具备幂等性\n\n\n\n#### B.  Read 查询类操作\n\n\n\n不考虑并发的情况下,在数据查询中,不会修改或者新数增数据,其操作无论执行多少次,其返回的结果与第一次操作的情况相同.\n\n\n\n可谓是天然幂等.\n\n\n\n#### C.  Update 更新类操作\n\n\n\n基于主键的计算式Update,不具备幂等性.比如下列的SQL语句.多次执行的结果,与第一次执行的结果不同\n\n\n\n```\nUPDATE Bi SET Bi.Number = Bi.Number - 1 WHERE Bi.Id = 1\n```\n\n\n\n基于主键的非计算式Update,具备幂等性.比如下列的SQL语句.多次执行的结果与第一次执行的结果相同.\n\n\n\n```\nUPDATE Bi SET Bi.Number = @Value WHERE Bi.Id = 1\n```\n\n\n\n#### D.  Delete 删除类操作\n\n\n\n基于主键的delete是具备幂等性的.比如,下列的SQL语句\n\n\n\n```\nDELETE FROM Bi WHERE Bi.Id = 1\n```\n\n\n\n基于逻辑删除,将DeletedAt字段置为当前时间.在查询时过滤掉该条数据.\n\n\n\n如此方式,在数据层面不具有幂等性.但是,在逻辑方面他具有了幂等性.比如,下列的SQL语句.\n\n\n\n```\nUPDATE Bi SET Bi.DeletedAt = {{当前的时间戳}} WHERE Bi.Id = 1\n```\n\n\n\n### 02.原因分析及其解决方案\n\n\n\n#### 01.重复点击\n\n重复点击,即,用户不小心双击或者测试人员恶意双击造成的重复请求\n\n对于这一类的重复请求.通用的解决方案是客户端在一个请求未结束之前,将点击按钮置为灰色,让按钮失去执行接口的能力.\n\n#### 06.在浏览器中因为后退等操作按钮,导致POST重复提交\n\n05.网络波动引起的重复请求\n\n04.RPC调用时,重试引起的重复调用\n\n\n\n对于这三类问题,有下列几种解决办法.\n\n\n\n第一种方案: 在正式执行接口之前,客户端先通过I1接口申请一个单次准入令牌.该令牌全局唯一,且有效时间为5分钟.客户端在发起正式请求时,在带header中带上单次准入令牌.服务器根据此准入令牌,与redis中进行删除操作,只有删除的个数为1时,才会允许放行. 否则返回相关错误码,客户端根据错误码提示操作太频繁或者网络出小差再试一次等提示.\n\n\n\n优点:  客户端不用挂心准入令牌的生成,实现了各端的统一,且服务器可以根据准入令牌做限流处理.\n\n\n\n缺点:  增加了TPS的耗时,增加了客户端的编码量(因人而异).  \n\n\n\n第二种方案: 客户端自行生成一个唯一标识符.与以前项目中,客户端感觉每次请求之前都要去服务器拿准入token,有些麻烦,所以决定自己生成.\n\n在生成之后,通过将其加入header中带入服务器.服务器根据数据表中的唯一索引,或者SQL执行受影响的行数,可以确保幂等.\n\n\n\n下面是以前合作的搭档对于唯一标识符的生成方式.\n\n\n\n```\nbString = {精确到纳秒的时间戳}_{设备标识符}_md5(请求体)_sha1(请求体)\nmd5Body = md5(bString)\nsha1Body = sha1(bString)\nrequestId = md5Body_sha1Body  \n```\n\n\n\nrequestId 就是需要带在header中的请求ID","slug":"technology-sense-network-request-repeated","published":1,"date":"2021-03-15T16:58:23.122Z","updated":"2021-03-15T17:14:03.604Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckmavtb1x0005ywvlftpb04qo","content":"<p>何为重复请求? 即期望请求一次的接口,重复请求了多次. 倘若要解决重复请求,就需要实现接口的幂等性.</p>\n<p>何为幂等?幂等(idempotent、idempotence)是一个数学与计算机学概念,常见于抽象代数中.在编程中,幂等是指无论执行多少次,其结果与第一次执行的结果相同.</p>\n<p>何为接口幂等?接口幂等,即同一个网络请求无论多少次进入服务器,其产生的影响与第一次进入服务器的影响相同.而要实现接口幂等,首先得分析,CRUD的幂等性</p>\n<h3 id=\"01-CRUD幂等\"><a href=\"#01-CRUD幂等\" class=\"headerlink\" title=\"01.CRUD幂等\"></a>01.CRUD幂等</h3><p>CRUD 即Create,Read,Update,Delete的简写.其语义对应着SQL中的Insert,Select,Update,Delete 语句.</p>\n<h4 id=\"A-Create-创建类操作\"><a href=\"#A-Create-创建类操作\" class=\"headerlink\" title=\"A.  Create 创建类操作\"></a>A.  Create 创建类操作</h4><p>在数据库中,数据的创建是通过主键自增+唯一索引的方式来确定一行数据.其操作不具备幂等性</p>\n<h4 id=\"B-Read-查询类操作\"><a href=\"#B-Read-查询类操作\" class=\"headerlink\" title=\"B.  Read 查询类操作\"></a>B.  Read 查询类操作</h4><p>不考虑并发的情况下,在数据查询中,不会修改或者新数增数据,其操作无论执行多少次,其返回的结果与第一次操作的情况相同.</p>\n<p>可谓是天然幂等.</p>\n<h4 id=\"C-Update-更新类操作\"><a href=\"#C-Update-更新类操作\" class=\"headerlink\" title=\"C.  Update 更新类操作\"></a>C.  Update 更新类操作</h4><p>基于主键的计算式Update,不具备幂等性.比如下列的SQL语句.多次执行的结果,与第一次执行的结果不同</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE Bi SET Bi.Number &#x3D; Bi.Number - 1 WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<p>基于主键的非计算式Update,具备幂等性.比如下列的SQL语句.多次执行的结果与第一次执行的结果相同.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE Bi SET Bi.Number &#x3D; @Value WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"D-Delete-删除类操作\"><a href=\"#D-Delete-删除类操作\" class=\"headerlink\" title=\"D.  Delete 删除类操作\"></a>D.  Delete 删除类操作</h4><p>基于主键的delete是具备幂等性的.比如,下列的SQL语句</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DELETE FROM Bi WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<p>基于逻辑删除,将DeletedAt字段置为当前时间.在查询时过滤掉该条数据.</p>\n<p>如此方式,在数据层面不具有幂等性.但是,在逻辑方面他具有了幂等性.比如,下列的SQL语句.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE Bi SET Bi.DeletedAt &#x3D; &#123;&#123;当前的时间戳&#125;&#125; WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"02-原因分析及其解决方案\"><a href=\"#02-原因分析及其解决方案\" class=\"headerlink\" title=\"02.原因分析及其解决方案\"></a>02.原因分析及其解决方案</h3><h4 id=\"01-重复点击\"><a href=\"#01-重复点击\" class=\"headerlink\" title=\"01.重复点击\"></a>01.重复点击</h4><p>重复点击,即,用户不小心双击或者测试人员恶意双击造成的重复请求</p>\n<p>对于这一类的重复请求.通用的解决方案是客户端在一个请求未结束之前,将点击按钮置为灰色,让按钮失去执行接口的能力.</p>\n<h4 id=\"06-在浏览器中因为后退等操作按钮-导致POST重复提交\"><a href=\"#06-在浏览器中因为后退等操作按钮-导致POST重复提交\" class=\"headerlink\" title=\"06.在浏览器中因为后退等操作按钮,导致POST重复提交\"></a>06.在浏览器中因为后退等操作按钮,导致POST重复提交</h4><p>05.网络波动引起的重复请求</p>\n<p>04.RPC调用时,重试引起的重复调用</p>\n<p>对于这三类问题,有下列几种解决办法.</p>\n<p>第一种方案: 在正式执行接口之前,客户端先通过I1接口申请一个单次准入令牌.该令牌全局唯一,且有效时间为5分钟.客户端在发起正式请求时,在带header中带上单次准入令牌.服务器根据此准入令牌,与redis中进行删除操作,只有删除的个数为1时,才会允许放行. 否则返回相关错误码,客户端根据错误码提示操作太频繁或者网络出小差再试一次等提示.</p>\n<p>优点:  客户端不用挂心准入令牌的生成,实现了各端的统一,且服务器可以根据准入令牌做限流处理.</p>\n<p>缺点:  增加了TPS的耗时,增加了客户端的编码量(因人而异).  </p>\n<p>第二种方案: 客户端自行生成一个唯一标识符.与以前项目中,客户端感觉每次请求之前都要去服务器拿准入token,有些麻烦,所以决定自己生成.</p>\n<p>在生成之后,通过将其加入header中带入服务器.服务器根据数据表中的唯一索引,或者SQL执行受影响的行数,可以确保幂等.</p>\n<p>下面是以前合作的搭档对于唯一标识符的生成方式.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bString &#x3D; &#123;精确到纳秒的时间戳&#125;_&#123;设备标识符&#125;_md5(请求体)_sha1(请求体)</span><br><span class=\"line\">md5Body &#x3D; md5(bString)</span><br><span class=\"line\">sha1Body &#x3D; sha1(bString)</span><br><span class=\"line\">requestId &#x3D; md5Body_sha1Body  </span><br></pre></td></tr></table></figure>\n\n\n\n<p>requestId 就是需要带在header中的请求ID</p>\n","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>何为重复请求? 即期望请求一次的接口,重复请求了多次. 倘若要解决重复请求,就需要实现接口的幂等性.</p>\n<p>何为幂等?幂等(idempotent、idempotence)是一个数学与计算机学概念,常见于抽象代数中.在编程中,幂等是指无论执行多少次,其结果与第一次执行的结果相同.</p>\n<p>何为接口幂等?接口幂等,即同一个网络请求无论多少次进入服务器,其产生的影响与第一次进入服务器的影响相同.而要实现接口幂等,首先得分析,CRUD的幂等性</p>\n<h3 id=\"01-CRUD幂等\"><a href=\"#01-CRUD幂等\" class=\"headerlink\" title=\"01.CRUD幂等\"></a>01.CRUD幂等</h3><p>CRUD 即Create,Read,Update,Delete的简写.其语义对应着SQL中的Insert,Select,Update,Delete 语句.</p>\n<h4 id=\"A-Create-创建类操作\"><a href=\"#A-Create-创建类操作\" class=\"headerlink\" title=\"A.  Create 创建类操作\"></a>A.  Create 创建类操作</h4><p>在数据库中,数据的创建是通过主键自增+唯一索引的方式来确定一行数据.其操作不具备幂等性</p>\n<h4 id=\"B-Read-查询类操作\"><a href=\"#B-Read-查询类操作\" class=\"headerlink\" title=\"B.  Read 查询类操作\"></a>B.  Read 查询类操作</h4><p>不考虑并发的情况下,在数据查询中,不会修改或者新数增数据,其操作无论执行多少次,其返回的结果与第一次操作的情况相同.</p>\n<p>可谓是天然幂等.</p>\n<h4 id=\"C-Update-更新类操作\"><a href=\"#C-Update-更新类操作\" class=\"headerlink\" title=\"C.  Update 更新类操作\"></a>C.  Update 更新类操作</h4><p>基于主键的计算式Update,不具备幂等性.比如下列的SQL语句.多次执行的结果,与第一次执行的结果不同</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE Bi SET Bi.Number &#x3D; Bi.Number - 1 WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<p>基于主键的非计算式Update,具备幂等性.比如下列的SQL语句.多次执行的结果与第一次执行的结果相同.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE Bi SET Bi.Number &#x3D; @Value WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"D-Delete-删除类操作\"><a href=\"#D-Delete-删除类操作\" class=\"headerlink\" title=\"D.  Delete 删除类操作\"></a>D.  Delete 删除类操作</h4><p>基于主键的delete是具备幂等性的.比如,下列的SQL语句</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DELETE FROM Bi WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<p>基于逻辑删除,将DeletedAt字段置为当前时间.在查询时过滤掉该条数据.</p>\n<p>如此方式,在数据层面不具有幂等性.但是,在逻辑方面他具有了幂等性.比如,下列的SQL语句.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE Bi SET Bi.DeletedAt &#x3D; &#123;&#123;当前的时间戳&#125;&#125; WHERE Bi.Id &#x3D; 1</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"02-原因分析及其解决方案\"><a href=\"#02-原因分析及其解决方案\" class=\"headerlink\" title=\"02.原因分析及其解决方案\"></a>02.原因分析及其解决方案</h3><h4 id=\"01-重复点击\"><a href=\"#01-重复点击\" class=\"headerlink\" title=\"01.重复点击\"></a>01.重复点击</h4><p>重复点击,即,用户不小心双击或者测试人员恶意双击造成的重复请求</p>\n<p>对于这一类的重复请求.通用的解决方案是客户端在一个请求未结束之前,将点击按钮置为灰色,让按钮失去执行接口的能力.</p>\n<h4 id=\"06-在浏览器中因为后退等操作按钮-导致POST重复提交\"><a href=\"#06-在浏览器中因为后退等操作按钮-导致POST重复提交\" class=\"headerlink\" title=\"06.在浏览器中因为后退等操作按钮,导致POST重复提交\"></a>06.在浏览器中因为后退等操作按钮,导致POST重复提交</h4><p>05.网络波动引起的重复请求</p>\n<p>04.RPC调用时,重试引起的重复调用</p>\n<p>对于这三类问题,有下列几种解决办法.</p>\n<p>第一种方案: 在正式执行接口之前,客户端先通过I1接口申请一个单次准入令牌.该令牌全局唯一,且有效时间为5分钟.客户端在发起正式请求时,在带header中带上单次准入令牌.服务器根据此准入令牌,与redis中进行删除操作,只有删除的个数为1时,才会允许放行. 否则返回相关错误码,客户端根据错误码提示操作太频繁或者网络出小差再试一次等提示.</p>\n<p>优点:  客户端不用挂心准入令牌的生成,实现了各端的统一,且服务器可以根据准入令牌做限流处理.</p>\n<p>缺点:  增加了TPS的耗时,增加了客户端的编码量(因人而异).  </p>\n<p>第二种方案: 客户端自行生成一个唯一标识符.与以前项目中,客户端感觉每次请求之前都要去服务器拿准入token,有些麻烦,所以决定自己生成.</p>\n<p>在生成之后,通过将其加入header中带入服务器.服务器根据数据表中的唯一索引,或者SQL执行受影响的行数,可以确保幂等.</p>\n<p>下面是以前合作的搭档对于唯一标识符的生成方式.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bString &#x3D; &#123;精确到纳秒的时间戳&#125;_&#123;设备标识符&#125;_md5(请求体)_sha1(请求体)</span><br><span class=\"line\">md5Body &#x3D; md5(bString)</span><br><span class=\"line\">sha1Body &#x3D; sha1(bString)</span><br><span class=\"line\">requestId &#x3D; md5Body_sha1Body  </span><br></pre></td></tr></table></figure>\n\n\n\n<p>requestId 就是需要带在header中的请求ID</p>\n"},{"title":"技术场景之解决排序引起的数据重复","cover":"/img/technology-sense/data_repeated_title.png","subtitle":"技术场景之解决排序引起的数据重复","author":{"nick":"袁苏东","link":"https://github.com/yuansudong"},"typora-root-url":"images","_content":"\n列表,在实际开发中是一个非常常见的功能.比如,广场,附近的人都是基于列表所展示的.但是,对于非个人数据的列表.比如广场,会时不时的出现重复卡片的问题.\n\n\n\n经过排查,发现出现重复数据的原因,是因为服务器接口返回的数据重复,从而导致客户端展示出有重复数据的问题,也导致了用户体验极差的结果.\n\n\n\n下面,就对于出现的原因进行分析\n\n\n\n在列表中,通常需要按照一个维度进行排序.下面以广场这个常见的功能模块进行说明.\n\n\n\n广场,其筛选条件包含着距离最近,点赞最多,最新发布,及其性别等一些列的筛选条件.\n\n\n\n其中,距离最近,点赞最多,最新发布为互斥条件,三者只能选其一,且三种都要通过排序来达到效果.\n\n\n\n距离最近,以用户发布动态的经纬度为准,计算两个点之间的距离,升序排序.其公式如下.\n\n\n\n```\nDistance = R*Arccos(sin(MLatA)*sin(MLatB)*cos(MLonA-MLonB) + cos(MLatA)*cos(MLatB))*Pi/180\n```\n\n\n\n点赞最多,以动态表中,字段为点赞的个数,进行降序排序.\n\n\n\n最新发布,以动态表中,创建时间为维度,进行降序排序.\n\n\n\n对于这些排序,在静态数据下,不会出现重复的ITEM.但是,倘若在浏览期间,有其他用户发布了最新的动态,此时对于在浏览期间的用户,便会看到有重复的ITEM出现.\n\n\n\n记得第一次遇见这类情形时,大脑中懵然一片.在模拟用户流程之后,得出了造成这一现象的原因是排序造成的.\n\n\n\n比如,现有一个有序列表[5,4,3,2,1],且列表中的数据不能被移除.\n\n\n\n用户A想浏览这个列表.其方式是通过每次从列表中获取两个ITEM,现在已经获取了2次,偏移量为4.第一次获取[5,4],第二次获取[3,2].\n\n\n\n就在此时,用户B向列表中插入了一个新的ITEM,其值为6.此时,这个有序列表就变成了[6,5,4,3,2,1]\n\n\n\n用户A第三次获取列表中的ITEM,通过前两次获取,用户A处于偏移量为4的位置.根据规则,第三次用户A拿到的数据为[2,1].即,用户A三次获得的数据为[5,4],[3,2],[2,1].\n\n\n\n下面我们就解决办法做出讨论\n\n\n\n#### 01.基于REDIS缓存\n\n\n\n通过redis中的list结构,为每个用户临时维护一个浏览的list.从而解决数据重复的问题.  \n\n\n\n优点:各类客户端以服务器为准,可以高度统一.\n\n\n\n缺点:基于缓存做,那么在一定时间间隔内,用户无法看到最新状态\n\n\n\n结论:产品不允许,且服务器内存消耗,不合适\n\n\n\n#### 02.服务器基于数据的临界值,进行筛选\n\n\n\n在SQL优化中,有一段经验,对于数据筛选排序,须尽量避免使用OFFSET,采用临界值的方式缩小数据集,进行TOPN查询.\n\n\n\n但是,需得注意的是,对于此类用法有一个前提,其排序字段需要有序性和唯一性.否则,会出现漏数据或者数据重复的问题.下面以最新发布为例.\n\n\n\n在最新发布中,按照创建时间降序排序. 而在APP设计中,产品并没有说明在1秒内,只允许一个用户发布动态.\n\n\n\n这也就决定了在1秒内可能会有N个用户发布动态,也就造成了创建时间的可重复性.\n\n\n\n下面是一个SQL的举例\n\n\n\n```\nselect {需要的数据} from user_dynamic where dynamic.create_at < {{客户端最后一条数据的时间戳}}   order by dynamic.create_at desc limit 50\n```\n\n\n\n对于上面的SQL语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于进行筛选,最大可漏数据为53.\n\n\n\n```\nselect {需要的数据} from user_dynamic where dynamic.create_at <= {{客户端最后一条数据的时间戳}}   order by dynamic.create_at desc limit 50\n```\n\n\n\n对于上面的sql语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于等于进行筛选,最大重复数据为无限.\n\n\n\n之所以无限,是因为我取50条,最后一条数据的时间戳还是100.这会造成无限循环.\n\n\n\n#### 03.客户端去重\n\n\n\n客户端在获取数据时,在本地维护一个set或者hashmap的数据集.其唯一key为动态的唯一ID.\n\n\n\n每次获取数据后,在展示之前,先通过set或者dictionary进行查询,发现有重复数据时,客户端不予以展示,并且会在广场的滚动视图的顶端对用户进行微小的提示.\n\n\n\n比如,有新动态啦! 有人距离你更进一步! 等一些列俏皮词汇,并且给与用户能回滚到最顶端,重新查看的功能.","source":"_posts/technology-sense-sql-order-repeated.md","raw":"---\ntitle: 技术场景之解决排序引起的数据重复\ncover:  /img/technology-sense/data_repeated_title.png\nsubtitle: 技术场景之解决排序引起的数据重复\ncategories: \"技术场景\"\ntags: \"技术场景\"\nauthor:\n  nick: 袁苏东\n  link: https://github.com/yuansudong\ntypora-root-url: images\n---\n\n列表,在实际开发中是一个非常常见的功能.比如,广场,附近的人都是基于列表所展示的.但是,对于非个人数据的列表.比如广场,会时不时的出现重复卡片的问题.\n\n\n\n经过排查,发现出现重复数据的原因,是因为服务器接口返回的数据重复,从而导致客户端展示出有重复数据的问题,也导致了用户体验极差的结果.\n\n\n\n下面,就对于出现的原因进行分析\n\n\n\n在列表中,通常需要按照一个维度进行排序.下面以广场这个常见的功能模块进行说明.\n\n\n\n广场,其筛选条件包含着距离最近,点赞最多,最新发布,及其性别等一些列的筛选条件.\n\n\n\n其中,距离最近,点赞最多,最新发布为互斥条件,三者只能选其一,且三种都要通过排序来达到效果.\n\n\n\n距离最近,以用户发布动态的经纬度为准,计算两个点之间的距离,升序排序.其公式如下.\n\n\n\n```\nDistance = R*Arccos(sin(MLatA)*sin(MLatB)*cos(MLonA-MLonB) + cos(MLatA)*cos(MLatB))*Pi/180\n```\n\n\n\n点赞最多,以动态表中,字段为点赞的个数,进行降序排序.\n\n\n\n最新发布,以动态表中,创建时间为维度,进行降序排序.\n\n\n\n对于这些排序,在静态数据下,不会出现重复的ITEM.但是,倘若在浏览期间,有其他用户发布了最新的动态,此时对于在浏览期间的用户,便会看到有重复的ITEM出现.\n\n\n\n记得第一次遇见这类情形时,大脑中懵然一片.在模拟用户流程之后,得出了造成这一现象的原因是排序造成的.\n\n\n\n比如,现有一个有序列表[5,4,3,2,1],且列表中的数据不能被移除.\n\n\n\n用户A想浏览这个列表.其方式是通过每次从列表中获取两个ITEM,现在已经获取了2次,偏移量为4.第一次获取[5,4],第二次获取[3,2].\n\n\n\n就在此时,用户B向列表中插入了一个新的ITEM,其值为6.此时,这个有序列表就变成了[6,5,4,3,2,1]\n\n\n\n用户A第三次获取列表中的ITEM,通过前两次获取,用户A处于偏移量为4的位置.根据规则,第三次用户A拿到的数据为[2,1].即,用户A三次获得的数据为[5,4],[3,2],[2,1].\n\n\n\n下面我们就解决办法做出讨论\n\n\n\n#### 01.基于REDIS缓存\n\n\n\n通过redis中的list结构,为每个用户临时维护一个浏览的list.从而解决数据重复的问题.  \n\n\n\n优点:各类客户端以服务器为准,可以高度统一.\n\n\n\n缺点:基于缓存做,那么在一定时间间隔内,用户无法看到最新状态\n\n\n\n结论:产品不允许,且服务器内存消耗,不合适\n\n\n\n#### 02.服务器基于数据的临界值,进行筛选\n\n\n\n在SQL优化中,有一段经验,对于数据筛选排序,须尽量避免使用OFFSET,采用临界值的方式缩小数据集,进行TOPN查询.\n\n\n\n但是,需得注意的是,对于此类用法有一个前提,其排序字段需要有序性和唯一性.否则,会出现漏数据或者数据重复的问题.下面以最新发布为例.\n\n\n\n在最新发布中,按照创建时间降序排序. 而在APP设计中,产品并没有说明在1秒内,只允许一个用户发布动态.\n\n\n\n这也就决定了在1秒内可能会有N个用户发布动态,也就造成了创建时间的可重复性.\n\n\n\n下面是一个SQL的举例\n\n\n\n```\nselect {需要的数据} from user_dynamic where dynamic.create_at < {{客户端最后一条数据的时间戳}}   order by dynamic.create_at desc limit 50\n```\n\n\n\n对于上面的SQL语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于进行筛选,最大可漏数据为53.\n\n\n\n```\nselect {需要的数据} from user_dynamic where dynamic.create_at <= {{客户端最后一条数据的时间戳}}   order by dynamic.create_at desc limit 50\n```\n\n\n\n对于上面的sql语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于等于进行筛选,最大重复数据为无限.\n\n\n\n之所以无限,是因为我取50条,最后一条数据的时间戳还是100.这会造成无限循环.\n\n\n\n#### 03.客户端去重\n\n\n\n客户端在获取数据时,在本地维护一个set或者hashmap的数据集.其唯一key为动态的唯一ID.\n\n\n\n每次获取数据后,在展示之前,先通过set或者dictionary进行查询,发现有重复数据时,客户端不予以展示,并且会在广场的滚动视图的顶端对用户进行微小的提示.\n\n\n\n比如,有新动态啦! 有人距离你更进一步! 等一些列俏皮词汇,并且给与用户能回滚到最顶端,重新查看的功能.","slug":"technology-sense-sql-order-repeated","published":1,"date":"2021-03-15T16:58:23.122Z","updated":"2021-03-15T17:04:57.959Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckmavtb200007ywvl6pcu42o9","content":"<p>列表,在实际开发中是一个非常常见的功能.比如,广场,附近的人都是基于列表所展示的.但是,对于非个人数据的列表.比如广场,会时不时的出现重复卡片的问题.</p>\n<p>经过排查,发现出现重复数据的原因,是因为服务器接口返回的数据重复,从而导致客户端展示出有重复数据的问题,也导致了用户体验极差的结果.</p>\n<p>下面,就对于出现的原因进行分析</p>\n<p>在列表中,通常需要按照一个维度进行排序.下面以广场这个常见的功能模块进行说明.</p>\n<p>广场,其筛选条件包含着距离最近,点赞最多,最新发布,及其性别等一些列的筛选条件.</p>\n<p>其中,距离最近,点赞最多,最新发布为互斥条件,三者只能选其一,且三种都要通过排序来达到效果.</p>\n<p>距离最近,以用户发布动态的经纬度为准,计算两个点之间的距离,升序排序.其公式如下.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Distance &#x3D; R*Arccos(sin(MLatA)*sin(MLatB)*cos(MLonA-MLonB) + cos(MLatA)*cos(MLatB))*Pi&#x2F;180</span><br></pre></td></tr></table></figure>\n\n\n\n<p>点赞最多,以动态表中,字段为点赞的个数,进行降序排序.</p>\n<p>最新发布,以动态表中,创建时间为维度,进行降序排序.</p>\n<p>对于这些排序,在静态数据下,不会出现重复的ITEM.但是,倘若在浏览期间,有其他用户发布了最新的动态,此时对于在浏览期间的用户,便会看到有重复的ITEM出现.</p>\n<p>记得第一次遇见这类情形时,大脑中懵然一片.在模拟用户流程之后,得出了造成这一现象的原因是排序造成的.</p>\n<p>比如,现有一个有序列表[5,4,3,2,1],且列表中的数据不能被移除.</p>\n<p>用户A想浏览这个列表.其方式是通过每次从列表中获取两个ITEM,现在已经获取了2次,偏移量为4.第一次获取[5,4],第二次获取[3,2].</p>\n<p>就在此时,用户B向列表中插入了一个新的ITEM,其值为6.此时,这个有序列表就变成了[6,5,4,3,2,1]</p>\n<p>用户A第三次获取列表中的ITEM,通过前两次获取,用户A处于偏移量为4的位置.根据规则,第三次用户A拿到的数据为[2,1].即,用户A三次获得的数据为[5,4],[3,2],[2,1].</p>\n<p>下面我们就解决办法做出讨论</p>\n<h4 id=\"01-基于REDIS缓存\"><a href=\"#01-基于REDIS缓存\" class=\"headerlink\" title=\"01.基于REDIS缓存\"></a>01.基于REDIS缓存</h4><p>通过redis中的list结构,为每个用户临时维护一个浏览的list.从而解决数据重复的问题.  </p>\n<p>优点:各类客户端以服务器为准,可以高度统一.</p>\n<p>缺点:基于缓存做,那么在一定时间间隔内,用户无法看到最新状态</p>\n<p>结论:产品不允许,且服务器内存消耗,不合适</p>\n<h4 id=\"02-服务器基于数据的临界值-进行筛选\"><a href=\"#02-服务器基于数据的临界值-进行筛选\" class=\"headerlink\" title=\"02.服务器基于数据的临界值,进行筛选\"></a>02.服务器基于数据的临界值,进行筛选</h4><p>在SQL优化中,有一段经验,对于数据筛选排序,须尽量避免使用OFFSET,采用临界值的方式缩小数据集,进行TOPN查询.</p>\n<p>但是,需得注意的是,对于此类用法有一个前提,其排序字段需要有序性和唯一性.否则,会出现漏数据或者数据重复的问题.下面以最新发布为例.</p>\n<p>在最新发布中,按照创建时间降序排序. 而在APP设计中,产品并没有说明在1秒内,只允许一个用户发布动态.</p>\n<p>这也就决定了在1秒内可能会有N个用户发布动态,也就造成了创建时间的可重复性.</p>\n<p>下面是一个SQL的举例</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select &#123;需要的数据&#125; from user_dynamic where dynamic.create_at &lt; &#123;&#123;客户端最后一条数据的时间戳&#125;&#125;   order by dynamic.create_at desc limit 50</span><br></pre></td></tr></table></figure>\n\n\n\n<p>对于上面的SQL语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于进行筛选,最大可漏数据为53.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select &#123;需要的数据&#125; from user_dynamic where dynamic.create_at &lt;&#x3D; &#123;&#123;客户端最后一条数据的时间戳&#125;&#125;   order by dynamic.create_at desc limit 50</span><br></pre></td></tr></table></figure>\n\n\n\n<p>对于上面的sql语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于等于进行筛选,最大重复数据为无限.</p>\n<p>之所以无限,是因为我取50条,最后一条数据的时间戳还是100.这会造成无限循环.</p>\n<h4 id=\"03-客户端去重\"><a href=\"#03-客户端去重\" class=\"headerlink\" title=\"03.客户端去重\"></a>03.客户端去重</h4><p>客户端在获取数据时,在本地维护一个set或者hashmap的数据集.其唯一key为动态的唯一ID.</p>\n<p>每次获取数据后,在展示之前,先通过set或者dictionary进行查询,发现有重复数据时,客户端不予以展示,并且会在广场的滚动视图的顶端对用户进行微小的提示.</p>\n<p>比如,有新动态啦! 有人距离你更进一步! 等一些列俏皮词汇,并且给与用户能回滚到最顶端,重新查看的功能.</p>\n","site":{"data":{"favicons":["<link rel=\"shortcut icon\" href=\"/img//favicon.ico\">","<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/img//favicon-16x16.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/img//favicon-32x32.png\">","<link rel=\"icon\" type=\"image/png\" sizes=\"48x48\" href=\"/img//favicon-48x48.png\">","<link rel=\"manifest\" href=\"/img//manifest.json\">","<meta name=\"mobile-web-app-capable\" content=\"yes\">","<meta name=\"theme-color\" content=\"#fff\">","<meta name=\"application-name\">","<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"/img//apple-touch-icon-57x57.png\">","<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"/img//apple-touch-icon-60x60.png\">","<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"/img//apple-touch-icon-72x72.png\">","<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"/img//apple-touch-icon-76x76.png\">","<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"/img//apple-touch-icon-114x114.png\">","<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"/img//apple-touch-icon-120x120.png\">","<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/img//apple-touch-icon-144x144.png\">","<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"/img//apple-touch-icon-152x152.png\">","<link rel=\"apple-touch-icon\" sizes=\"167x167\" href=\"/img//apple-touch-icon-167x167.png\">","<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/img//apple-touch-icon-180x180.png\">","<link rel=\"apple-touch-icon\" sizes=\"1024x1024\" href=\"/img//apple-touch-icon-1024x1024.png\">","<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">","<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">","<meta name=\"apple-mobile-web-app-title\">","<meta name=\"msapplication-TileColor\" content=\"#fff\">","<meta name=\"msapplication-TileImage\" content=\"/img//mstile-144x144.png\">","<meta name=\"msapplication-config\" content=\"/img//browserconfig.xml\">"],"contact":[{"title":"github","icon":"icon-github","link":"https://github.com/yuansudong"},{"title":"email","icon":"icon-email","link":"mailto:1145919989@qq.com"},{"title":"qq","icon":"icon-qq","link":"/atom.xml"}]}},"excerpt":"","more":"<p>列表,在实际开发中是一个非常常见的功能.比如,广场,附近的人都是基于列表所展示的.但是,对于非个人数据的列表.比如广场,会时不时的出现重复卡片的问题.</p>\n<p>经过排查,发现出现重复数据的原因,是因为服务器接口返回的数据重复,从而导致客户端展示出有重复数据的问题,也导致了用户体验极差的结果.</p>\n<p>下面,就对于出现的原因进行分析</p>\n<p>在列表中,通常需要按照一个维度进行排序.下面以广场这个常见的功能模块进行说明.</p>\n<p>广场,其筛选条件包含着距离最近,点赞最多,最新发布,及其性别等一些列的筛选条件.</p>\n<p>其中,距离最近,点赞最多,最新发布为互斥条件,三者只能选其一,且三种都要通过排序来达到效果.</p>\n<p>距离最近,以用户发布动态的经纬度为准,计算两个点之间的距离,升序排序.其公式如下.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Distance &#x3D; R*Arccos(sin(MLatA)*sin(MLatB)*cos(MLonA-MLonB) + cos(MLatA)*cos(MLatB))*Pi&#x2F;180</span><br></pre></td></tr></table></figure>\n\n\n\n<p>点赞最多,以动态表中,字段为点赞的个数,进行降序排序.</p>\n<p>最新发布,以动态表中,创建时间为维度,进行降序排序.</p>\n<p>对于这些排序,在静态数据下,不会出现重复的ITEM.但是,倘若在浏览期间,有其他用户发布了最新的动态,此时对于在浏览期间的用户,便会看到有重复的ITEM出现.</p>\n<p>记得第一次遇见这类情形时,大脑中懵然一片.在模拟用户流程之后,得出了造成这一现象的原因是排序造成的.</p>\n<p>比如,现有一个有序列表[5,4,3,2,1],且列表中的数据不能被移除.</p>\n<p>用户A想浏览这个列表.其方式是通过每次从列表中获取两个ITEM,现在已经获取了2次,偏移量为4.第一次获取[5,4],第二次获取[3,2].</p>\n<p>就在此时,用户B向列表中插入了一个新的ITEM,其值为6.此时,这个有序列表就变成了[6,5,4,3,2,1]</p>\n<p>用户A第三次获取列表中的ITEM,通过前两次获取,用户A处于偏移量为4的位置.根据规则,第三次用户A拿到的数据为[2,1].即,用户A三次获得的数据为[5,4],[3,2],[2,1].</p>\n<p>下面我们就解决办法做出讨论</p>\n<h4 id=\"01-基于REDIS缓存\"><a href=\"#01-基于REDIS缓存\" class=\"headerlink\" title=\"01.基于REDIS缓存\"></a>01.基于REDIS缓存</h4><p>通过redis中的list结构,为每个用户临时维护一个浏览的list.从而解决数据重复的问题.  </p>\n<p>优点:各类客户端以服务器为准,可以高度统一.</p>\n<p>缺点:基于缓存做,那么在一定时间间隔内,用户无法看到最新状态</p>\n<p>结论:产品不允许,且服务器内存消耗,不合适</p>\n<h4 id=\"02-服务器基于数据的临界值-进行筛选\"><a href=\"#02-服务器基于数据的临界值-进行筛选\" class=\"headerlink\" title=\"02.服务器基于数据的临界值,进行筛选\"></a>02.服务器基于数据的临界值,进行筛选</h4><p>在SQL优化中,有一段经验,对于数据筛选排序,须尽量避免使用OFFSET,采用临界值的方式缩小数据集,进行TOPN查询.</p>\n<p>但是,需得注意的是,对于此类用法有一个前提,其排序字段需要有序性和唯一性.否则,会出现漏数据或者数据重复的问题.下面以最新发布为例.</p>\n<p>在最新发布中,按照创建时间降序排序. 而在APP设计中,产品并没有说明在1秒内,只允许一个用户发布动态.</p>\n<p>这也就决定了在1秒内可能会有N个用户发布动态,也就造成了创建时间的可重复性.</p>\n<p>下面是一个SQL的举例</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select &#123;需要的数据&#125; from user_dynamic where dynamic.create_at &lt; &#123;&#123;客户端最后一条数据的时间戳&#125;&#125;   order by dynamic.create_at desc limit 50</span><br></pre></td></tr></table></figure>\n\n\n\n<p>对于上面的SQL语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于进行筛选,最大可漏数据为53.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select &#123;需要的数据&#125; from user_dynamic where dynamic.create_at &lt;&#x3D; &#123;&#123;客户端最后一条数据的时间戳&#125;&#125;   order by dynamic.create_at desc limit 50</span><br></pre></td></tr></table></figure>\n\n\n\n<p>对于上面的sql语句,假设客户端给的时间戳为100,且在100这个时间戳内,有123条动态.如果用小于等于进行筛选,最大重复数据为无限.</p>\n<p>之所以无限,是因为我取50条,最后一条数据的时间戳还是100.这会造成无限循环.</p>\n<h4 id=\"03-客户端去重\"><a href=\"#03-客户端去重\" class=\"headerlink\" title=\"03.客户端去重\"></a>03.客户端去重</h4><p>客户端在获取数据时,在本地维护一个set或者hashmap的数据集.其唯一key为动态的唯一ID.</p>\n<p>每次获取数据后,在展示之前,先通过set或者dictionary进行查询,发现有重复数据时,客户端不予以展示,并且会在广场的滚动视图的顶端对用户进行微小的提示.</p>\n<p>比如,有新动态啦! 有人距离你更进一步! 等一些列俏皮词汇,并且给与用户能回滚到最顶端,重新查看的功能.</p>\n"}],"PostAsset":[{"_id":"source/_posts/hello-world/image-20210315203750702.png","slug":"image-20210315203750702.png","post":"ckmaf86by0000oovlepycdqlw","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ckmajyz5u0003s0vl2ivdaidb","category_id":"ckmak0lwi0006s0vle7nqbcyy","_id":"ckmak0lwr0009s0vlhp61eghd"},{"post_id":"ckmaf86by0000oovlepycdqlw","category_id":"ckmak0q8p000as0vlhbzv7nnf","_id":"ckmak0q8r000ds0vl9t8155sc"},{"post_id":"ckmasyb6j000934vl3wdueb6h","category_id":"ckmas94ms0000qcvleiqzhya1","_id":"ckmasyb6m000b34vl73vo1ldk"},{"post_id":"ckmat2nhp000f34vl9m7vbzts","category_id":"ckmas94ms0000qcvleiqzhya1","_id":"ckmat2nhs000h34vl7qwt6dvw"},{"post_id":"ckmat3ac9000i34vleol63ed4","category_id":"ckmas94ms0000qcvleiqzhya1","_id":"ckmat3acb000k34vl3z227ni4"},{"post_id":"ckmavtb1k0000ywvl6sng36ko","category_id":"ckmas94ms0000qcvleiqzhya1","_id":"ckmavtb1w0004ywvlblwz2vqo"},{"post_id":"ckmavtb1p0001ywvl3zo2gx7u","category_id":"ckmas94ms0000qcvleiqzhya1","_id":"ckmavtb1z0006ywvlhq4d6ljg"},{"post_id":"ckmavtb1x0005ywvlftpb04qo","category_id":"ckmak0q8p000as0vlhbzv7nnf","_id":"ckmavtb24000aywvl7jdn0hoq"},{"post_id":"ckmavtb200007ywvl6pcu42o9","category_id":"ckmak0q8p000as0vlhbzv7nnf","_id":"ckmavtb25000bywvl9aizca92"}],"PostTag":[{"post_id":"ckmajyz5u0003s0vl2ivdaidb","tag_id":"ckmak0lwo0007s0vl6ln63nfn","_id":"ckmak0lwq0008s0vl9y4f23kj"},{"post_id":"ckmaf86by0000oovlepycdqlw","tag_id":"ckmak0q8q000bs0vlheidg260","_id":"ckmak0q8r000cs0vl7hls5530"},{"post_id":"ckmasyb6j000934vl3wdueb6h","tag_id":"ckmas94mw0001qcvl87nq2d26","_id":"ckmasyb6l000a34vl79b42z43"},{"post_id":"ckmat2nhp000f34vl9m7vbzts","tag_id":"ckmas94mw0001qcvl87nq2d26","_id":"ckmat2nhs000g34vl8zkefawf"},{"post_id":"ckmat3ac9000i34vleol63ed4","tag_id":"ckmas94mw0001qcvl87nq2d26","_id":"ckmat3acb000j34vl5hlk9afr"},{"post_id":"ckmavtb1k0000ywvl6sng36ko","tag_id":"ckmas94mw0001qcvl87nq2d26","_id":"ckmavtb1r0002ywvl1vfr7jnf"},{"post_id":"ckmavtb1p0001ywvl3zo2gx7u","tag_id":"ckmas94mw0001qcvl87nq2d26","_id":"ckmavtb1u0003ywvl7la91ssd"},{"post_id":"ckmavtb1x0005ywvlftpb04qo","tag_id":"ckmak0q8q000bs0vlheidg260","_id":"ckmavtb230008ywvl5o3kcjgb"},{"post_id":"ckmavtb200007ywvl6pcu42o9","tag_id":"ckmak0q8q000bs0vlheidg260","_id":"ckmavtb240009ywvl1c8nb6jv"}],"Tag":[{"name":"Go语言","_id":"ckmak0lwo0007s0vl6ln63nfn"},{"name":"技术场景","_id":"ckmak0q8q000bs0vlheidg260"},{"name":"企业网络","_id":"ckmas94mw0001qcvl87nq2d26"}]}}